import e,{useState as t,useMemo as n}from"react";import{storybookArgTypes as r,storybookExcludedControlParams as o}from"@lg-tools/storybook-utils";import i from"@leafygreen-ui/button";import{css as a,cx as l}from"@leafygreen-ui/emotion";import c,{Footer as u,CloseIconColor as s}from"@leafygreen-ui/modal";import d from"prop-types";import f from"@leafygreen-ui/icon/dist/Warning";import{useDarkMode as p}from"@leafygreen-ui/leafygreen-provider";import{palette as m}from"@leafygreen-ui/palette";import b from"@leafygreen-ui/text-input";import{H3 as y}from"@leafygreen-ui/typography";import{Theme as g}from"@leafygreen-ui/lib";import{typeScales as v}from"@leafygreen-ui/tokens";function h(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function x(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k.apply(this,arguments)}function O(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function C(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||M(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T,w,P,S,N,I,A,D,B,q,z,_="lg-confirmation_modal",F={root:_,input:"".concat(_,"-confirmation_input"),title:"".concat(_,"-title"),confirm:"".concat(_,"-footer-confirm_button"),cancel:"".concat(_,"-footer-cancel_button")},H={Default:"primary",Danger:"danger"},L=a(T||(T=C(["\n  line-height: 32px;\n  margin-bottom: 10px;\n"]))),R=a(w||(w=C(["\n  width: 600px;\n  padding: initial;\n  letter-spacing: 0;\n"]))),U=a(P||(P=C(["\n  font-size: ","px;\n  line-height: ","px;\n"])),v.body1.fontSize,v.body1.lineHeight),W=a(S||(S=C(["\n  color: ",";\n"])),m.gray.light1),$=x(x({},H.Default,a(N||(N=C(["\n    padding: 40px 36px 0px;\n  "])))),H.Danger,a(I||(I=C(["\n    padding: 40px 36px 0px 78px;\n  "])))),G=a(A||(A=C(["\n  width: 300px;\n  margin-top: 14px;\n\n  label {\n    margin-bottom: 3px;\n  }\n"]))),J=a(D||(D=C(["\n  margin: 0 2px;\n\n  &:first-of-type {\n    margin: 0 0 0 5px;\n  }\n\n  &:last-of-type {\n    margin: 0 5px 0 0;\n  }\n"]))),K=a(B||(B=C(["\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  left: 36px;\n  top: 40px;\n\n  svg {\n    margin-top: -3px;\n  }\n"]))),Q=x(x({},g.Light,a(q||(q=C(["\n    background: ",";\n  "])),m.red.light3)),g.Dark,a(z||(z=C(["\n    background: ",";\n  "])),m.red.dark2)),V=["children","title","requiredInputText","buttonText","submitDisabled","variant","onConfirm","onCancel","darkMode","confirmButtonProps","cancelButtonProps"],X=e.forwardRef((function(r,o){var a,s=r.children,d=r.title,g=r.requiredInputText,v=r.buttonText,h=r.submitDisabled,C=r.variant,M=void 0===C?H.Default:C,E=r.onConfirm,T=r.onCancel,w=r.darkMode,P=r.confirmButtonProps,S=void 0===P?{}:P,N=r.cancelButtonProps,I=void 0===N?{}:N,A=O(r,V),D=j(t(!g),2),B=D[0],q=D[1],z=p(w),_=z.theme,X=z.darkMode,Y=n((function(){q(!g);var t=null;if(g){t=e.createElement(b,{label:'Type "'.concat(g,'" to confirm your action'),className:G,onChange:function(e){q(e.target.value===g)},autoFocus:!0,darkMode:X,"data-testid":F.input})}return t}),[g,X]),Z=E||(null==S?void 0:S.onClick),ee=T||(null==I?void 0:I.onClick),te=function(){g&&q(!1)},ne=function(){null==ee||ee(),te()},re=null!==(a=null!=h?h:null==S?void 0:S.disabled)&&void 0!==a&&a;return e.createElement(c,k({},A,{contentClassName:R,setOpen:ne,darkMode:X,ref:o}),e.createElement("div",{className:l(U,$[M],x({},W,X))},M===H.Danger&&e.createElement("div",{className:l(K,Q[_])},e.createElement(f,{fill:X?m.red.light3:m.red.base,role:"presentation"})),e.createElement(y,{as:"h1",className:l(L),"data-testid":F.title},d),s,Y),e.createElement(u,null,e.createElement(i,k({},S,{"data-testid":F.confirm,disabled:!B||re,className:l(J,null==S?void 0:S.className),variant:M,onClick:function(){null==Z||Z(),te()}}),v||(null==S?void 0:S.children)||"Confirm"),e.createElement(i,k({},I,{onClick:ne,className:l(J,null==I?void 0:I.className),"data-testid":F.cancel}),"Cancel")))}));X.displayName="ConfirmationModal",X.propTypes={title:d.string.isRequired,open:d.bool,onConfirm:d.func,onCancel:d.func,children:d.node,className:d.string,buttonText:d.string,variant:d.oneOf(Object.values(H)),requiredInputText:d.string,darkMode:d.bool,confirmButtonProps:d.objectOf(d.any),cancelButtonProps:d.objectOf(d.any)};var Y,Z,ee,te=["darkMode"],ne=["darkMode"],re={title:"Components/Modals/ConfirmationModal",component:X,parameters:{default:"LiveExample",controls:{exclude:[].concat((ee=o,function(e){if(Array.isArray(e))return E(e)}(ee)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(ee)||M(ee)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),["open","initialFocus"])}},args:{open:!0,title:"Confirm Title Here",buttonText:"Confirm",children:"This is some description text, and it is extra long so it fills up this modal. Another thing about the modals here. This is some description text, and it is extra long so it fills up this modal. Another thing about the modals here.",className:a(Y||(Y=C(["\n      z-index: 1;\n    "]))),closeIconColor:"default",variant:"primary"},argTypes:{requiredInputText:{control:"text"},open:{control:"boolean"},title:{control:"text"},buttonText:{control:"text"},children:r.children,darkMode:r.darkMode,variant:{control:"select",options:Object.values(H)},closeIconColor:{control:"select",options:Object.values(s)}}},oe=function(n){var r=n.darkMode,o=O(n,te),a=j(t(!1),2),l=a[0],c=a[1],u=function(){return c(!1)};return e.createElement("div",null,e.createElement(i,{darkMode:r,onClick:function(){return c(!l)}},"Open Modal"),e.createElement(X,k({},o,{open:l,confirmButtonProps:{onClick:u},cancelButtonProps:{onClick:u},darkMode:r})))};oe.parameters={chromatic:{disableSnapshot:!0}};var ie=function(t){var n=t.darkMode,r=O(t,ne);return e.createElement("div",{className:a(Z||(Z=C(["\n        height: 100vh;\n      "])))},e.createElement(X,k({},r,{open:!0,darkMode:n})),";")},ae=ie.bind({});ae.args={darkMode:!0};export{ie as Basic,ae as DarkMode,oe as LiveExample,re as default};
