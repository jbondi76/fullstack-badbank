{"version":3,"file":"index.js","sources":["../../src/types.ts","../../src/styles.tsx","../../src/IconButton.tsx"],"sourcesContent":["import { BoxProps } from '@leafygreen-ui/box';\nimport { Either, HTMLElementProps } from '@leafygreen-ui/lib';\n\nexport const Size = {\n  Default: 'default',\n  Large: 'large',\n  XLarge: 'xlarge',\n} as const;\n\nexport type Size = (typeof Size)[keyof typeof Size];\n\n// Since applications can't yet tree-shake, we're duplicating this interface from the types in the namespaces within the Icon package rather than importing the Icon package.\n// TODO: Import {IconProps} from '.../icon`\nexport interface IconProps extends React.SVGProps<SVGSVGElement> {\n  glyph: string;\n  size?: Size | number;\n  title?: string | null | boolean;\n}\n\n// Not extending `button` props. Instead using `BoxProps`\nexport interface BaseIconButtonProps {\n  className?: string;\n\n  /**\n   * The Leafygreen `<Icon />` component to render\n   */\n  children?: React.ReactNode;\n\n  /**\n   * If `true`, the button will be rendered with disabled styles\n   */\n  disabled?: boolean;\n  /**\n   * Size of the icon\n   */\n  size?: Size;\n\n  darkMode?: boolean;\n  /**\n   * If `true`, the button will be rendered with active styles\n   */\n  active?: boolean;\n  /**\n   * `href` property for the button. If this value is set, the IconButton will be rendered with an anchor tag.\n   */\n  href?: string;\n  /**\n   * The aria-label attribute defines a string value that labels an interactive element.\n   *\n   * [Mozilla Docs](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-label)\n   */\n  'aria-label'?: string;\n  /**\n   * The aria-labelledby attribute identifies the element (or elements) that labels the element it is applied to.\n   *\n   * [Mozilla Docs](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-labelledby)\n   */\n  'aria-labelledby'?: string;\n  /**\n   * Callback fired on click\n   */\n  onClick?: React.MouseEventHandler<HTMLButtonElement | HTMLAnchorElement>;\n\n  /**\n   * The component or HTML Element that the button is rendered as.\n   */\n  as?: React.ElementType<any>;\n\n  /**\n   * Sets the tabIndex for IconButton component.\n   */\n  tabIndex?: HTMLElementProps<'button'>['tabIndex'];\n}\n\ntype AriaLabels = 'aria-label' | 'aria-labelledby';\n\nexport type AccessibleIconButtonProps = BoxProps<\n  'button',\n  Either<BaseIconButtonProps, AriaLabels>\n>;\n","import { transparentize } from 'polished';\n\nimport { css } from '@leafygreen-ui/emotion';\nimport { Theme } from '@leafygreen-ui/lib';\nimport { palette } from '@leafygreen-ui/palette';\nimport { focusRing, transitionDuration } from '@leafygreen-ui/tokens';\n\nimport { Size } from './types';\n\nexport const removeButtonStyle = css`\n  border: none;\n  -webkit-appearance: unset;\n  padding: unset;\n`;\n\nexport const baseIconButtonStyle = css`\n  display: inline-block;\n  border-radius: 100px;\n  position: relative;\n  cursor: pointer;\n  flex-shrink: 0;\n  transition: ${transitionDuration.default}ms ease-in-out;\n  transition-property: color, box-shadow;\n\n  // Set background to fully-transparent white for cross-browser compatability with Safari\n  //\n  // Safari treats \"transparent\" values in CSS as transparent black instead of white\n  // which can make things render differently across browsers if not defined explicitly.\n  background-color: rgba(255, 255, 255, 0);\n\n  &:before {\n    content: '';\n    transition: ${transitionDuration.default}ms all ease-in-out;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    border-radius: 100%;\n    transform: scale(0.8);\n  }\n\n  &:active:before,\n  &:hover:before,\n  &:focus:before {\n    transform: scale(1);\n  }\n\n  &:focus {\n    outline: none;\n  }\n`;\n\nexport const iconButtonSizes = {\n  [Size.Default]: css`\n    height: 28px;\n    width: 28px;\n  `,\n  [Size.Large]: css`\n    height: 36px;\n    width: 36px;\n  `,\n  [Size.XLarge]: css`\n    height: 42px;\n    width: 42px;\n  `,\n} as const;\n\nexport const iconButtonMode: Record<Theme, string> = {\n  [Theme.Light]: css`\n    color: ${palette.gray.dark1};\n\n    &:active,\n    &:hover {\n      color: ${palette.black};\n\n      &:before {\n        background-color: ${transparentize(0.9, palette.gray.dark2)};\n      }\n    }\n  `,\n  [Theme.Dark]: css`\n    color: ${palette.gray.light1};\n\n    &:active,\n    &:hover {\n      color: ${palette.gray.light3};\n\n      &:before {\n        background-color: ${transparentize(0.9, palette.gray.light2)};\n      }\n    }\n  `,\n};\n\nexport const focusStyle: Record<Theme, string> = {\n  [Theme.Light]: css`\n    &:focus-visible {\n      color: ${palette.black};\n      box-shadow: ${focusRing[Theme.Light].default};\n\n      &:before {\n        background-color: ${transparentize(0.9, palette.gray.dark2)};\n      }\n    }\n  `,\n  [Theme.Dark]: css`\n    &:focus-visible {\n      color: ${palette.gray.light3};\n      box-shadow: ${focusRing[Theme.Dark].default};\n\n      &:before {\n        background-color: ${transparentize(0.9, palette.gray.light2)};\n      }\n    }\n  `,\n} as const;\n\nexport const disabledStyle: Record<Theme, string> = {\n  [Theme.Light]: css`\n    cursor: not-allowed;\n    color: ${palette.gray.light1};\n    background-color: rgba(255, 255, 255, 0);\n\n    &:active,\n    &:hover {\n      color: ${palette.gray.light1};\n\n      &:before {\n        background-color: rgba(255, 255, 255, 0);\n      }\n    }\n\n    &:focus {\n      color: ${palette.gray.light1};\n\n      &:before {\n        background-color: rgba(255, 255, 255, 0);\n      }\n    }\n  `,\n\n  [Theme.Dark]: css`\n    cursor: not-allowed;\n    color: ${palette.gray.dark1};\n    background-color: rgba(255, 255, 255, 0);\n\n    &:active,\n    &:hover {\n      color: ${palette.gray.dark1};\n\n      &:before {\n        background-color: rgba(255, 255, 255, 0);\n      }\n    }\n\n    &:focus {\n      color: ${palette.gray.dark1};\n\n      &:before {\n        background-color: rgba(255, 255, 255, 0);\n      }\n    }\n  `,\n} as const;\n\nexport const activeStyle: Record<Theme, string> = {\n  [Theme.Light]: css`\n    color: ${palette.black};\n\n    &:before {\n      background-color: ${transparentize(0.9, palette.gray.dark2)};\n      transform: scale(1);\n    }\n  `,\n  [Theme.Dark]: css`\n    color: ${palette.gray.light3};\n\n    &:before {\n      background-color: ${transparentize(0.9, palette.gray.light2)};\n      transform: scale(1);\n    }\n  `,\n} as const;\n\nexport const iconStyle = css`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { validateAriaLabelProps } from '@leafygreen-ui/a11y';\nimport Box from '@leafygreen-ui/box';\nimport { cx } from '@leafygreen-ui/emotion';\nimport { isComponentGlyph } from '@leafygreen-ui/icon';\nimport { useDarkMode } from '@leafygreen-ui/leafygreen-provider';\nimport { isComponentType } from '@leafygreen-ui/lib';\n\nimport {\n  activeStyle,\n  baseIconButtonStyle,\n  disabledStyle,\n  focusStyle,\n  iconButtonMode,\n  iconButtonSizes,\n  iconStyle,\n  removeButtonStyle,\n} from './styles';\nimport { AccessibleIconButtonProps, IconProps, Size } from './types';\n\nexport const IconButton = React.forwardRef(\n  (\n    {\n      size = Size.Default,\n      darkMode: darkModeProp,\n      disabled = false,\n      active = false,\n      tabIndex = 0,\n      className,\n      children,\n      ...rest\n    }: AccessibleIconButtonProps,\n    ref: React.Ref<any>,\n  ) => {\n    const { theme } = useDarkMode(darkModeProp);\n    const isAnchor: boolean = typeof rest.href === 'string';\n\n    // We do our own proptype validation here to ensure either 'aria-label' or 'aria-labelledby' are passed to the component.\n    validateAriaLabelProps(rest, 'IconButton');\n\n    const processedChildren = React.Children.map(children, child => {\n      if (!child) {\n        return null;\n      }\n\n      // Check to see if child is a LeafyGreen Icon or a LeafyGreen Glyph\n      // If so, we unset the title and rely on the aria-label prop to give\n      // information about the rendered content.\n      if (isComponentType(child, 'Icon') || isComponentGlyph(child)) {\n        const { size: childSize, title }: IconProps = child.props;\n\n        const newChildProps: Partial<IconProps> = {\n          size: childSize || size,\n        };\n\n        if (typeof title !== 'string' || title.length === 0) {\n          // Unsets the title within an icon since the button itself will have\n          // aria-label or aria-labelledby set.\n          newChildProps.title = false;\n        }\n\n        return React.cloneElement(child, newChildProps);\n      }\n\n      return child;\n    });\n\n    const iconButtonProps = {\n      ...rest,\n      ref,\n      tabIndex,\n      // We don't set the `disabled` prop since we want the button to be focusable\n      ['aria-disabled']: disabled,\n      // Override any actions if it's disabled\n      href: disabled ? undefined : rest.href,\n      onClick: disabled ? undefined : rest.onClick,\n      className: cx(\n        removeButtonStyle,\n        baseIconButtonStyle,\n        iconButtonSizes[size],\n        iconButtonMode[theme],\n        focusStyle[theme],\n        {\n          [activeStyle[theme]]: active && !disabled,\n          [disabledStyle[theme]]: disabled,\n        },\n        className,\n      ),\n    };\n\n    return (\n      <Box as={isAnchor ? 'a' : 'button'} {...iconButtonProps}>\n        <div className={iconStyle}>{processedChildren}</div>\n      </Box>\n    );\n  },\n);\n\nIconButton.displayName = 'IconButton';\n\nIconButton.propTypes = {\n  darkMode: PropTypes.bool,\n  size: PropTypes.oneOf(Object.values(Size)),\n  className: PropTypes.string,\n  children: PropTypes.node,\n  disabled: PropTypes.bool,\n  href: PropTypes.string,\n  active: PropTypes.bool,\n};\n"],"names":["_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","_templateObject13","_templateObject14","Size","Default","Large","XLarge","removeButtonStyle","css","_taggedTemplateLiteral","baseIconButtonStyle","transitionDuration","default","iconButtonSizes","_defineProperty","iconButtonMode","Theme","Light","palette","gray","dark1","black","transparentize","dark2","Dark","light1","light3","light2","focusStyle","focusRing","disabledStyle","activeStyle","iconStyle","_excluded","IconButton","React","forwardRef","_ref","ref","_ref$size","size","darkModeProp","darkMode","_ref$disabled","disabled","_ref$active","active","_ref$tabIndex","tabIndex","className","children","rest","_objectWithoutProperties","theme","useDarkMode","isAnchor","href","validateAriaLabelProps","processedChildren","Children","map","child","isComponentType","isComponentGlyph","_child$props","props","childSize","title","newChildProps","length","cloneElement","iconButtonProps","_objectSpread","undefined","onClick","cx","createElement","Box","_extends","as","displayName","propTypes","PropTypes","bool","oneOf","Object","values","string","node"],"mappings":"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"}