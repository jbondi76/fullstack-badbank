import e,{useState as t,useRef as n,useEffect as r}from"react";import{flushSync as o}from"react-dom";import i from"prop-types";import{usePrefersReducedMotion as a}from"@leafygreen-ui/a11y";import{useIdAllocator as l,useIsomorphicLayoutEffect as p}from"@leafygreen-ui/hooks";import{useDarkMode as s}from"@leafygreen-ui/leafygreen-provider";import u,{Align as c,Justify as f}from"@leafygreen-ui/popover";import{transparentize as m}from"polished";import{css as d,cx as y}from"@leafygreen-ui/emotion";import{Theme as b}from"@leafygreen-ui/lib";import{palette as g}from"@leafygreen-ui/palette";import h from"focus-trap-react";import v from"@leafygreen-ui/button";import x from"@leafygreen-ui/icon/dist/X";import O from"@leafygreen-ui/icon-button";import C from"@leafygreen-ui/tooltip";import{Body as E,Disclaimer as w}from"@leafygreen-ui/typography";function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function N(e,t,n){return(t=k(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(this,arguments)}function P(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function M(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],p=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(p=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);p=!0);}catch(e){s=!0,o=e}finally{try{if(!p&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){t>e.length&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D,B,Z,R,z,J,L,F,q,G,H,U,X,$,K,Q=d(D||(D=M(["\n  padding: 32px 16px 16px;\n"]))),V=d(B||(B=M(["\n  cursor: auto;\n"]))),W=function(e,t){var n=t?g.blue.light2:g.blue.base,r=d(Z||(Z=M(["\n    position: relative;\n\n    div {\n      width: ","px;\n      height: ","px;\n      border-radius: 50%;\n      background-color: ",";\n      transform-origin: center;\n      position: relative;\n    }\n  "])),24,24,m(.5,n));return y(r,e?d(R||(R=M(["\n        div {\n          box-shadow: 0px 0px 0px 4px ",";\n        }\n      "])),m(.83,n)):d(z||(z=M(["\n      &::before,\n      &::after {\n        content: '';\n        position: absolute;\n        border-radius: 50%;\n        translate: -50% -50%;\n        top: 50%;\n        left: 50%;\n        scale: 0.9;\n        opacity: 0;\n        width: ","px;\n        height: ","px;\n        background: rgba(255, 255, 255, 0);\n        box-shadow: 0px 0px 0px 0px ",";\n      }\n\n      // inner most pulse ring\n      &::before {\n        animation: pulse-outer 2.3s infinite cubic-bezier(0.42, 0, 0.61, 0.69);\n      }\n\n      // outer mosts pulse ring\n      &::after {\n        animation: pulse-outer-2 2.3s infinite cubic-bezier(0.42, 0, 0.46, 0.72);\n      }\n\n      @keyframes pulse-outer {\n        10% {\n          box-shadow: 0px 0px 0px 0px ",";\n          opacity: 1;\n        }\n\n        40%,\n        100% {\n          // this should scale up to 1 and have 0 opacity by 42% and remain that way until 100%\n          scale: 1;\n          box-shadow: 0px 0px 0px 15px ",";\n          opacity: 0;\n        }\n      }\n\n      @keyframes pulse-outer-2 {\n        10% {\n          box-shadow: 0px 0px 0px 0px ",";\n          opacity: 1;\n        }\n\n        35%,\n        100% {\n          // this should scale up to 1 and have 0 opacity by 35% and remain that way until 100%. This is 35% so that it gives the illusion of disappearing before the first ring.\n          scale: 1;\n          box-shadow: 0px 0px 0px 18px ",";\n          opacity: 0;\n        }\n      }\n\n      div {\n        animation: pulse-inner 2.3s infinite cubic-bezier(0.42, 0, 0.58, 0.72);\n\n        @keyframes pulse-inner {\n          40% {\n            // at 0% this will start to slowly scale and by 40% this should scale to 1.3\n            scale: 1.3;\n          }\n          73% {\n            // By 73% this should scale back to 1. From 73% to 100% it will remain at 1.\n            scale: 1;\n          }\n        }\n      }\n    "])),24,24,m(1,n),m(.95,n),m(.7,n),m(.95,n),m(.7,n)))},Y=d(J||(J=M(["\n  margin-bottom: 16px;\n"]))),_=d(L||(L=M(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  gap: 16px;\n"]))),ee=N(N({},b.Light,d(F||(F=M(["\n    color: ",";\n  "])),g.gray.light1)),b.Dark,d(q||(q=M(["\n    color: ",";\n  "])),g.black)),te=d(G||(G=M(["\n  margin-bottom: 4px;\n"]))),ne=d(H||(H=M(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n"]))),re=d(U||(U=M(["\n  color: ",";\n  &:hover,\n  &:active {\n    &::before {\n      background-color: ",";\n    }\n  }\n"])),g.gray.dark2,g.gray.light3),oe=N(N({},b.Light,d(X||(X=M(["\n    color: ",";\n  "])),g.gray.base)),b.Dark,d($||($=M(["\n    color: ",";\n  "])),g.gray.dark2)),ie=d(K||(K=M(["\n  height: 28px;\n"]))),ae=["darkMode","open","setOpen","tooltipJustify","tooltipAlign","refEl","portalClassName","portalContainer","scrollContainer","popoverZIndex","theme","title","isStandalone","buttonText","numberOfSteps","currentStep","children","tooltipClassName","onEscClose","handleButtonClick","handleCloseClick","usePortal"],le="guide-cue-label",pe="guide-cue-desc";function se(t){var n=t.darkMode,r=t.open,o=t.setOpen,i=t.tooltipJustify,a=t.tooltipAlign,p=t.refEl,s=t.portalClassName,u=t.portalContainer,c=t.scrollContainer,f=t.popoverZIndex,m=t.theme,d=t.title,b=t.isStandalone,g=t.buttonText,S=t.numberOfSteps,k=t.currentStep,j=t.children,M=t.tooltipClassName,A=t.onEscClose,I=t.handleButtonClick,D=t.handleCloseClick,B=t.usePortal,Z=void 0===B||B,R=P(t,ae),z=l({prefix:"guide-cue"});return e.createElement(e.Fragment,null,e.createElement(C,T({darkMode:n,open:r,setOpen:o,justify:i,align:a,refEl:p,className:y(N({},Q,!b),V,M),portalClassName:s,portalContainer:u,scrollContainer:c,popoverZIndex:f,onClose:A,role:"dialog","aria-labelledby":le,usePortal:Z},R),e.createElement(h,{focusTrapOptions:{clickOutsideDeactivates:!0}},e.createElement("div",null,!b&&e.createElement(O,{className:y(ne,N({},re,n)),"aria-label":"Close Tooltip",onClick:D,darkMode:!n},e.createElement(x,null)),e.createElement("div",{className:Y},e.createElement(E,{id:le,as:"h2",className:te,darkMode:!n},e.createElement("strong",null,d)),e.createElement(E,{as:"div",className:ee[m],id:pe},j)),e.createElement("div",{className:_},!b&&e.createElement(w,{className:oe[m]},k," of ",S),e.createElement(v,{variant:"primary",onClick:function(){return I()},darkMode:!n,className:ie,id:z},g))))))}se.displayName="TooltipContent";var ue={Top:c.Top,Bottom:c.Bottom,Left:c.Left,Right:c.Right},ce={Start:f.Start,Middle:f.Middle,End:f.End},fe=["open","setOpen","refEl","numberOfSteps","currentStep","darkMode","title","children","onDismiss","onPrimaryButtonClick","tooltipClassName","portalClassName","buttonText","tooltipAlign","tooltipJustify","beaconAlign","portalContainer","portalRef","scrollContainer","popoverZIndex"];function me(i){var l=i.open,f=i.setOpen,m=i.refEl,d=i.numberOfSteps,y=i.currentStep,b=void 0===y?1:y,g=i.darkMode,h=i.title,v=i.children,x=i.onDismiss,O=void 0===x?function(){}:x,C=i.onPrimaryButtonClick,E=void 0===C?function(){}:C,w=i.tooltipClassName,k=i.portalClassName,j=i.buttonText,M=i.tooltipAlign,I=void 0===M?ue.Top:M,D=i.tooltipJustify,B=void 0===D?ce.Middle:D,Z=i.beaconAlign,R=void 0===Z?c.CenterHorizontal:Z,z=i.portalContainer,J=i.portalRef,L=i.scrollContainer,F=i.popoverZIndex,q=P(i,fe),G=s(g),H=G.darkMode,U=G.theme,X=a(),$=A(t(!1),2),K=$[0],Q=$[1],V=A(t(!1),2),Y=V[0],_=V[1],ee=n(null),te=j||(b===d||1===d?"Got it":"Next"),ne=d<=1;r((function(){var e,t;return l&&!ne?(Q(!0),e=setTimeout((function(){return o((function(){_(!0)}))}),400)):(_(!1),t=setTimeout((function(){return Q(!1)}),100)),function(){clearTimeout(e),clearTimeout(t)}}),[l,ne]);var re={portalClassName:k,portalContainer:z,portalRef:J,scrollContainer:L},oe=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({darkMode:H,open:l,setOpen:f,tooltipJustify:B,tooltipAlign:I,refEl:m,popoverZIndex:F,numberOfSteps:d,currentStep:b,theme:U,title:h,isStandalone:ne,buttonText:te,tooltipClassName:w,onEscClose:ne?E:O,handleButtonClick:function(){f(!1),setTimeout((function(){return E()}),ne?0:400)},handleCloseClick:function(){f(!1),setTimeout((function(){return O()}),400)}},q),ie=A(t(!1),2),ae=ie[0],le=ie[1];return p((function(){return le(!0)}),[]),ae?e.createElement(e.Fragment,null,ne?e.createElement(se,T({},oe,re),v):e.createElement(u,T({active:K,refEl:m,align:R,justify:ce.Middle,spacing:-12,adjustOnMutation:!0,popoverZIndex:F},re),e.createElement("div",{ref:ee,className:W(X,H)},e.createElement("div",null)),e.createElement(se,T({},oe,{refEl:ee,open:Y,usePortal:!1}),v))):null}me.displayName="GuideCue",me.propTypes={children:i.node,darkMode:i.bool,open:i.bool,setOpen:i.func,refEl:i.shape({current:"undefined"!=typeof window?i.instanceOf(Element):i.any}),numberOfSteps:i.number.isRequired,currentStep:function(e,t){return e.numberOfSteps>1&&"number"!=typeof e[t]?new Error("`currentStep` prop of type `number` is required if numberOfSteps > 1"):e.numberOfSteps<=1&&void 0!==e[t]&&"number"!=typeof e[t]?new Error("'currentStep' prop is invalid. Type '".concat(j(e[t]),"' supplied to 'currentStep', expected 'number'")):void 0},title:i.string,tooltipClassName:i.string,buttonText:i.string,onDismiss:i.func,onPrimaryButtonClick:i.func,tooltipAlign:i.oneOf(Object.values(ue)),tooltipJustify:i.oneOf(Object.values(ce)),beaconAlign:i.oneOf(Object.values(c)),popoverZIndex:i.number,scrollContainer:"undefined"!=typeof window?i.instanceOf(Element):i.any,portalContainer:"undefined"!=typeof window?i.instanceOf(Element):i.any,portalClassName:i.string,portalRef:i.shape({current:"undefined"!=typeof window?i.instanceOf(Element):i.any})};export{me as GuideCue,ue as TooltipAlign,ce as TooltipJustify};
//# sourceMappingURL=index.js.map
