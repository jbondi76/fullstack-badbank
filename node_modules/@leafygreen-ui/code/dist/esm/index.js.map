{"version":3,"file":"index.js","sources":["../../src/CopyButton/constants.ts","../../src/CopyButton/CopyButton.styles.ts","../../src/CopyButton/CopyButton.tsx","../../src/CustomSelectMenuButton/CustomSelectMenuButton.tsx","../../src/LanguageSwitcher/LanguageSwitcher.styles.ts","../../src/LanguageSwitcher/LanguageSwitcher.tsx","../../src/Panel/Panel.styles.ts","../../src/Panel/Panel.tsx","../../src/globalStyles.tsx","../../src/languages.ts","../../src/renderingPlugin/renderingPlugin.tsx","../../src/Syntax/SyntaxContext.tsx","../../src/Syntax/Syntax.tsx","../../src/types.ts","../../src/WindowChrome/WindowChrome.styles.ts","../../src/WindowChrome/WindowChrome.tsx","../../src/Code/Code.types.ts","../../src/Code/Code.styles.ts","../../src/Code/Code.tsx"],"sourcesContent":["export const COPIED_SUCCESS_DURATION = 1500;\nexport const COPIED_TEXT = 'Copied!';\nexport const COPY_TEXT = 'Copy';\n","import { css } from '@leafygreen-ui/emotion';\nimport { Theme } from '@leafygreen-ui/lib';\nimport { palette } from '@leafygreen-ui/palette';\n\nexport const copiedThemeStyle: Record<Theme, string> = {\n  [Theme.Light]: css`\n    color: ${palette.white};\n    background-color: ${palette.green.dark1};\n\n    &:focus,\n    &:hover {\n      color: ${palette.white};\n\n      &:before {\n        background-color: ${palette.green.dark1};\n      }\n    }\n  `,\n  [Theme.Dark]: css`\n    color: ${palette.gray.dark3};\n    background-color: ${palette.green.base};\n\n    &:focus,\n    &:hover {\n      color: ${palette.gray.dark3};\n\n      &:before {\n        background-color: ${palette.green.base};\n      }\n    }\n  `,\n};\n\nexport const copyButtonThemeStyles: Record<Theme, string> = {\n  [Theme.Light]: css`\n    align-self: center;\n    color: ${palette.gray.base};\n  `,\n  [Theme.Dark]: css`\n    align-self: center;\n    color: ${palette.gray.light1};\n  `,\n};\n","import React, { useEffect, useRef, useState } from 'react';\nimport ClipboardJS from 'clipboard';\n\nimport { VisuallyHidden } from '@leafygreen-ui/a11y';\nimport { cx } from '@leafygreen-ui/emotion';\nimport { useBackdropClick } from '@leafygreen-ui/hooks';\nimport CheckmarkIcon from '@leafygreen-ui/icon/dist/Checkmark';\nimport CopyIcon from '@leafygreen-ui/icon/dist/Copy';\nimport IconButton from '@leafygreen-ui/icon-button';\nimport {\n  useDarkMode,\n  usePopoverPortalContainer,\n} from '@leafygreen-ui/leafygreen-provider';\nimport { keyMap } from '@leafygreen-ui/lib';\nimport Tooltip, { Align, Justify } from '@leafygreen-ui/tooltip';\n\nimport { COPIED_SUCCESS_DURATION, COPIED_TEXT, COPY_TEXT } from './constants';\nimport { copiedThemeStyle, copyButtonThemeStyles } from './CopyButton.styles';\nimport { CopyProps } from './CopyButton.types';\n\nfunction CopyButton({ onCopy, contents }: CopyProps) {\n  const [copied, setCopied] = useState(false);\n  /**\n   * `CopyButton` controls `open` state of tooltip because when `copied` state\n   * changes, it causes the tooltip to re-render\n   */\n  const [open, setOpen] = useState(false);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n  const { theme } = useDarkMode();\n  const { portalContainer } = usePopoverPortalContainer();\n\n  /**\n   * toggles `open` state of tooltip\n   */\n  const closeTooltip = () => setOpen(false);\n  const openTooltip = () => setOpen(true);\n\n  /**\n   * forcibly closes tooltip if user tabs focus on tooltip and clicks\n   * outside of the trigger\n   */\n  useBackdropClick(closeTooltip, buttonRef, open);\n\n  useEffect(() => {\n    if (!buttonRef.current) {\n      return;\n    }\n\n    const clipboard = new ClipboardJS(buttonRef.current, {\n      text: () => contents,\n      container: portalContainer,\n    });\n\n    if (copied) {\n      const timeoutId = setTimeout(() => {\n        setCopied(false);\n      }, COPIED_SUCCESS_DURATION);\n\n      return () => clearTimeout(timeoutId);\n    }\n\n    return () => clipboard.destroy();\n  }, [buttonRef, contents, copied, portalContainer]);\n\n  const handleClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    onCopy?.();\n    setCopied(true);\n  };\n\n  /**\n   * `handleKeyDown` listener used to maintain UX parity with mouse events\n   */\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    switch (e.key) {\n      case keyMap.Escape:\n      case keyMap.Tab: {\n        closeTooltip();\n        break;\n      }\n\n      case keyMap.Enter:\n      case keyMap.Space: {\n        e.preventDefault();\n        buttonRef.current?.click();\n        buttonRef.current?.focus();\n        break;\n      }\n    }\n  };\n\n  /**\n   * `handleMouseEnter` and `handleMouseLeave` are used to control `open`\n   * state when mouse hovers over tooltip trigger\n   */\n  const handleMouseEnter = () => {\n    openTooltip();\n  };\n\n  const handleMouseLeave = () => {\n    closeTooltip();\n  };\n\n  /**\n   * `shouldClose` indicates to `Tooltip` component that tooltip should\n   * remain open even if trigger re-renders\n   */\n  const shouldClose = () => !open;\n\n  return (\n    <Tooltip\n      data-testid=\"code_copy-button_tooltip\"\n      open={open}\n      setOpen={setOpen}\n      align={Align.Top}\n      justify={Justify.Middle}\n      trigger={\n        <IconButton\n          data-testid=\"code_copy-button\"\n          ref={buttonRef}\n          aria-label={COPY_TEXT}\n          className={cx(copyButtonThemeStyles[theme], {\n            [copiedThemeStyle[theme]]: copied,\n          })}\n          onClick={handleClick}\n          onKeyDown={handleKeyDown}\n          onMouseEnter={handleMouseEnter}\n          onMouseLeave={handleMouseLeave}\n        >\n          {copied ? <CheckmarkIcon /> : <CopyIcon />}\n          {copied && (\n            <VisuallyHidden role=\"alert\">{COPIED_TEXT}</VisuallyHidden>\n          )}\n        </IconButton>\n      }\n      shouldClose={shouldClose}\n    >\n      {copied ? COPIED_TEXT : COPY_TEXT}\n    </Tooltip>\n  );\n}\n\nCopyButton.displayName = 'CopyButton';\n\nexport default CopyButton;\n","import React from 'react';\n\nimport Button, { ButtonProps } from '@leafygreen-ui/button';\n\n/**\n * Custom language switcher button.\n *\n * Passing down just the function which will be instantiated inside `Select`\n * @internal\n */\nexport const CustomSelectMenuButton = React.forwardRef(\n  ({ children, ...props }: ButtonProps, ref) => (\n    <Button {...props} ref={ref}>\n      {children}\n    </Button>\n  ),\n);\n\nCustomSelectMenuButton.displayName = 'CustomSelectMenuButton';\n","import { css } from '@leafygreen-ui/emotion';\nimport { Theme } from '@leafygreen-ui/lib';\nimport { palette } from '@leafygreen-ui/palette';\nimport { spacing } from '@leafygreen-ui/tokens';\n\nexport const containerStyle = css`\n  display: flex;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n`;\n\nexport const menuButtonStyle = css`\n  // Override default menuButton styles\n  margin-top: 0;\n  width: 100%;\n  height: 100%;\n  border-radius: 0px;\n  border: 0;\n  font-size: 12px;\n\n  &:hover[aria-disabled='false'],\n  &:focus,\n  &:active {\n    box-shadow: 0 0 0 0;\n    border: 0;\n  }\n\n  // Override button defaults\n  > *:last-child {\n    grid-template-columns: 16px 1fr 16px;\n    padding: 0 12px;\n    > svg {\n      width: 16px;\n      height: 16px;\n    }\n  }\n`;\n\nexport const buttonModeStyle: Record<Theme, string> = {\n  [Theme.Light]: css`\n    background-color: ${palette.white};\n    border-right: 1px solid ${palette.gray.light2};\n    box-shadow: 0 0 0 0;\n\n    &:hover[aria-disabled='false'],\n    &:active,\n    &:focus {\n      border-right: 1px solid ${palette.gray.light2};\n    }\n\n    &:hover[aria-disabled='false'] {\n      background-color: ${palette.gray.light2};\n    }\n\n    &:focus-visible {\n      background-color: ${palette.blue.light2};\n    }\n  `,\n  [Theme.Dark]: css`\n    background-color: ${palette.gray.dark2};\n    border-right: 1px solid ${palette.gray.dark1};\n    color: ${palette.gray.light2};\n\n    &:hover[aria-disabled='false'],\n    &:focus,\n    &:active {\n      border-right: 1px solid ${palette.gray.dark1};\n    }\n\n    &:hover[aria-disabled='false'],\n    &:active {\n      background-color: ${palette.gray.dark1};\n    }\n\n    &:focus-visible {\n      background-color: ${palette.blue.light1};\n    }\n  `,\n};\n\nexport const selectStyle = css`\n  min-width: 144px;\n  height: 100%;\n`;\n\nexport const iconMargin = css`\n  margin-right: ${spacing[3]}px;\n`;\n","import React from 'react';\n\nimport { css, cx } from '@leafygreen-ui/emotion';\nimport { usePrevious } from '@leafygreen-ui/hooks';\nimport { isComponentGlyph } from '@leafygreen-ui/icon';\nimport FileIcon from '@leafygreen-ui/icon/dist/File';\nimport { useDarkMode } from '@leafygreen-ui/leafygreen-provider';\nimport { isComponentType } from '@leafygreen-ui/lib';\nimport { palette } from '@leafygreen-ui/palette';\nimport { Option, Select } from '@leafygreen-ui/select';\n\nimport { CustomSelectMenuButton } from '../CustomSelectMenuButton';\nimport { LanguageOption, PopoverProps } from '../types';\n\nimport {\n  buttonModeStyle,\n  containerStyle,\n  iconMargin,\n  menuButtonStyle,\n  selectStyle,\n} from './LanguageSwitcher.styles';\n\nfunction isLeafyGreenIcon(element: React.ReactNode) {\n  if (isComponentGlyph(element) || isComponentType(element, 'Icon')) {\n    return true;\n  }\n\n  return false;\n}\n\ninterface Props extends PopoverProps {\n  language: LanguageOption;\n  languageOptions: Array<LanguageOption>;\n  onChange: (arg0: LanguageOption) => void;\n}\n\nfunction LanguageSwitcher({\n  language,\n  languageOptions,\n  onChange,\n  usePortal,\n  portalClassName,\n  portalContainer,\n  scrollContainer,\n  popoverZIndex,\n}: Props) {\n  const { theme, darkMode } = useDarkMode();\n  const previousLanguage = usePrevious(language);\n\n  const handleChange = (val: string) => {\n    if (val === '' && previousLanguage !== undefined) {\n      return onChange(previousLanguage);\n    }\n\n    const selectedOption = languageOptions.find(\n      option => option.displayName === val,\n    );\n\n    if (selectedOption !== undefined) {\n      onChange(selectedOption);\n    }\n  };\n\n  const iconStyle = cx(\n    iconMargin,\n    css`\n      color: ${darkMode ? palette.gray.light1 : palette.gray.base};\n    `,\n  );\n\n  // Placeholder for file icon\n  let renderedLogo = <FileIcon className={iconStyle} />;\n\n  if (language.image != null) {\n    if (isLeafyGreenIcon(language.image)) {\n      renderedLogo = React.cloneElement(language.image, {\n        className: iconStyle,\n      });\n    } else {\n      renderedLogo = React.cloneElement(language.image, {\n        className: iconMargin,\n      });\n    }\n  }\n\n  const popoverProps = {\n    popoverZIndex,\n    usePortal,\n    portalClassName,\n    portalContainer,\n    scrollContainer,\n  } as const;\n\n  return (\n    <div className={containerStyle}>\n      <Select\n        darkMode={darkMode}\n        onChange={handleChange}\n        aria-labelledby=\"Language Picker\"\n        value={language?.displayName}\n        className={selectStyle}\n        allowDeselect={false}\n        {...popoverProps}\n        __INTERNAL__menuButtonSlot__={CustomSelectMenuButton}\n        __INTERNAL__menuButtonSlotProps__={{\n          className: cx(menuButtonStyle, buttonModeStyle[theme]),\n          leftGlyph: renderedLogo,\n        }}\n      >\n        {languageOptions?.map(option => (\n          <Option key={option?.displayName} value={option?.displayName}>\n            {option?.displayName}\n          </Option>\n        ))}\n      </Select>\n    </div>\n  );\n}\n\nLanguageSwitcher.displayName = 'LanguageSwitcher';\n\nexport default LanguageSwitcher;\n","import { css, cx } from '@leafygreen-ui/emotion';\nimport { Theme } from '@leafygreen-ui/lib';\nimport { palette } from '@leafygreen-ui/palette';\nimport { spacing } from '@leafygreen-ui/tokens';\n\nexport const basePanelStyle = css`\n  display: flex;\n  align-items: center;\n  flex-shrink: 0;\n  gap: ${spacing[1]}px;\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nexport const basePanelThemeStyle: Record<Theme, string> = {\n  [Theme.Light]: css`\n    background-color: ${palette.white};\n  `,\n  [Theme.Dark]: css`\n    background-color: ${palette.gray.dark2};\n  `,\n};\n\nexport const sidePanelStyle = css`\n  flex-direction: column;\n  padding: 6px;\n  border-left: solid 1px;\n`;\n\nexport const sidePanelThemeStyles: Record<Theme, string> = {\n  [Theme.Light]: cx(\n    sidePanelStyle,\n    css`\n      border-color: ${palette.gray.light2};\n    `,\n  ),\n  [Theme.Dark]: cx(\n    sidePanelStyle,\n    css`\n      border-color: ${palette.gray.dark2};\n    `,\n  ),\n};\n\nexport const languageSwitcherPanelStyle = css`\n  flex-direction: row;\n  border-bottom: 1px solid;\n  justify-content: space-between;\n  padding: 0;\n  padding-right: 8px;\n  height: 40px; // 28px (icon) + 2 x 6px (focus shadow). Can't use padding b/c switcher\n`;\n\nexport const languageSwitcherPanelThemeStyles: Record<Theme, string> = {\n  [Theme.Light]: cx(\n    languageSwitcherPanelStyle,\n    css`\n      border-color: ${palette.gray.light2};\n    `,\n  ),\n  [Theme.Dark]: cx(\n    languageSwitcherPanelStyle,\n    css`\n      border-color: ${palette.gray.dark1};\n    `,\n  ),\n};\n","import React from 'react';\n\nimport { cx } from '@leafygreen-ui/emotion';\nimport { useDarkMode } from '@leafygreen-ui/leafygreen-provider';\n\nimport CopyButton from '../CopyButton/CopyButton';\nimport LanguageSwitcher from '../LanguageSwitcher/LanguageSwitcher';\nimport {\n  LanguageOption,\n  LanguageSwitcher as LanguageSwitcherProps,\n  PopoverProps,\n} from '../types';\n\nimport {\n  basePanelStyle,\n  basePanelThemeStyle,\n  languageSwitcherPanelThemeStyles,\n  sidePanelThemeStyles,\n} from './Panel.styles';\n\ntype PanelProps = Partial<Omit<LanguageSwitcherProps, 'language'>> & {\n  onCopy?: Function;\n  contents: string;\n  showCopyButton?: boolean;\n  language?: LanguageOption;\n  isMultiline?: boolean;\n  customActionButtons?: Array<React.ReactElement>;\n  showCustomActionButtons?: boolean;\n  className?: string;\n} & PopoverProps;\n\nfunction Panel({\n  language,\n  languageOptions,\n  contents,\n  onChange,\n  onCopy,\n  showCopyButton,\n  customActionButtons,\n  showCustomActionButtons,\n  usePortal,\n  portalClassName,\n  portalContainer,\n  scrollContainer,\n  popoverZIndex,\n  className,\n}: PanelProps) {\n  const { theme } = useDarkMode();\n\n  const popoverProps = {\n    popoverZIndex,\n    usePortal,\n    portalClassName,\n    portalContainer,\n    scrollContainer,\n  } as const;\n\n  return (\n    <div\n      className={cx(\n        basePanelStyle,\n        basePanelThemeStyle[theme],\n        {\n          [sidePanelThemeStyles[theme]]: !language,\n          [languageSwitcherPanelThemeStyles[theme]]: !!language,\n        },\n        className,\n      )}\n      data-testid=\"leafygreen-code-panel\"\n    >\n      {language !== undefined &&\n        languageOptions !== undefined &&\n        onChange !== undefined && (\n          <LanguageSwitcher\n            onChange={onChange}\n            language={language}\n            languageOptions={languageOptions}\n            {...popoverProps}\n          />\n        )}\n\n      {showCopyButton && (\n        <CopyButton\n          onCopy={onCopy}\n          contents={contents}\n          withLanguageSwitcher={!!language}\n        />\n      )}\n      {showCustomActionButtons && (\n        <>{customActionButtons?.map((action: React.ReactNode) => action)}</>\n      )}\n    </div>\n  );\n}\n\nPanel.displayName = 'Panel';\n\nexport default Panel;\n","import { injectGlobal } from '@leafygreen-ui/emotion';\nimport { Theme } from '@leafygreen-ui/lib';\nimport { palette } from '@leafygreen-ui/palette';\nimport { fontWeights } from '@leafygreen-ui/tokens';\n\ninterface Base16Palette {\n  0: string; // Background\n  1: string; // Borders / non-text graphical accents\n  2: string; // Comments, Doctags, Formulas\n  3: string; // Default Text\n  4: string; // Highlights\n  5: string; // Variables, XML Tags, Markup Link Text, Markup Lists, Diff Deleted\n  6: string; // Classes, Markup Bold, Search Text Background\n  7: string; // Strings, Inherited Class, Markup Code, Diff Inserted\n  8: string; // Support, Regular Expressions, Escape Characters, Markup Quotes\n  9: string; // Functions, Methods, Classes, Names, Sections, Literals\n  10: string; // Keywords, Storage, Selector, Markup Italic, Diff Changed\n}\n\nexport const variantColors: { readonly [K in Theme]: Base16Palette } = {\n  [Theme.Light]: {\n    0: palette.gray.light3,\n    1: palette.gray.light2,\n    2: palette.gray.dark2,\n    3: palette.black,\n    4: palette.white,\n    5: '#D83713',\n    6: '#956d00',\n    7: '#12824D',\n    8: '#007ab8',\n    9: '#016ee9',\n    10: '#CC3887',\n  },\n\n  [Theme.Dark]: {\n    0: palette.black,\n    1: palette.gray.dark2,\n    2: palette.gray.light1,\n    3: palette.gray.light3,\n    4: palette.gray.dark2,\n    5: '#FF6F44',\n    6: '#EDB210',\n    7: '#35DE7B',\n    8: '#a5e3ff',\n    9: '#2dc4ff',\n    10: '#FF7DC3',\n  },\n};\n\nconst getStyles = (theme: Theme): string => `\n  .lg-highlight-hljs-${theme} {\n    \n    .lg-highlight-keyword,\n    .lg-highlight-keyword.lg-highlight-function,\n    .lg-highlight-keyword.lg-highlight-class,\n    .lg-highlight-selector-tag,\n    .lg-highlight-selector-attr,\n    .lg-highlight-selector-pseudo,\n    .lg-highlight-selector-id,\n    .lg-highlight-selector-class {\n      color: ${variantColors[theme][10]};\n    }\n\n    .lg-highlight-regexp,\n    .lg-highlight-number,\n    .lg-highlight-literal,\n    .lg-highlight-function.lg-highlight-title {\n      color: ${variantColors[theme][9]};\n    }\n\n    .lg-highlight-quote,\n    .lg-highlight-section,\n    .lg-highlight-name {\n      color: ${variantColors[theme][8]};\n    }\n\n    .lg-highlight-string,\n    .lg-highlight-addition {\n      color: ${variantColors[theme][7]};\n    }\n\n    .lg-highlight-meta,\n    .lg-highlight-meta-string {\n      color: ${variantColors[theme][6]};\n    }\n\n    .lg-highlight-variable,\n    .lg-highlight-deletion,\n    .lg-highlight-symbol,\n    .lg-highlight-bullet,\n    .lg-highlight-meta,\n    .lg-highlight-link,\n    .lg-highlight-attr,\n    .lg-highlight-attribute,\n    .lg-highlight-language,\n    .lg-highlight-template-variable,\n    .lg-highlight-built_in,\n    .lg-highlight-type,\n    .lg-highlight-params {\n      color: ${variantColors[theme][5]}\n    }\n\n    .lg-highlight-title,\n    .lg-highlight-class.lg-highlight-title {\n      color: ${variantColors[theme][3]};\n    }\n\n    .lg-highlight-doctag,\n    .lg-highlight-formula {\n      color: ${variantColors[theme][3]};\n    }\n  \n    .lg-highlight-comment {\n      color: ${variantColors[theme][2]};\n      font-style: italic;\n    }\n  \n    .lg-highlight-string {\n      font-weight: 600;\n    }\n    \n    .lg-highlight-emphasis {\n      font-style: italic;\n    }\n  \n    .lg-highlight-strong {\n      font-weight: ${fontWeights.bold};\n    }\n  }\n`;\n\nexport function injectGlobalStyles() {\n  Object.values(Theme).forEach(theme => injectGlobal(getStyles(theme)));\n}\n","import bash from 'highlight.js/lib/languages/bash';\nimport c from 'highlight.js/lib/languages/c';\nimport cpp from 'highlight.js/lib/languages/cpp';\nimport csharp from 'highlight.js/lib/languages/csharp';\nimport dart from 'highlight.js/lib/languages/dart';\nimport diff from 'highlight.js/lib/languages/diff';\nimport go from 'highlight.js/lib/languages/go';\nimport http from 'highlight.js/lib/languages/http';\nimport ini from 'highlight.js/lib/languages/ini';\nimport java from 'highlight.js/lib/languages/java';\nimport javascript from 'highlight.js/lib/languages/javascript';\nimport json from 'highlight.js/lib/languages/json';\nimport kotlin from 'highlight.js/lib/languages/kotlin';\nimport objectivec from 'highlight.js/lib/languages/objectivec';\nimport perl from 'highlight.js/lib/languages/perl';\nimport php from 'highlight.js/lib/languages/php';\nimport properties from 'highlight.js/lib/languages/properties';\nimport python from 'highlight.js/lib/languages/python';\nimport ruby from 'highlight.js/lib/languages/ruby';\nimport rust from 'highlight.js/lib/languages/rust';\nimport scala from 'highlight.js/lib/languages/scala';\nimport shell from 'highlight.js/lib/languages/shell';\nimport sql from 'highlight.js/lib/languages/sql';\nimport swift from 'highlight.js/lib/languages/swift';\nimport typescript from 'highlight.js/lib/languages/typescript';\nimport xml from 'highlight.js/lib/languages/xml';\nimport yaml from 'highlight.js/lib/languages/yaml';\n\nexport const languageParsers = {\n  javascript,\n  typescript,\n  c,\n  cpp,\n  csharp,\n  go,\n  http,\n  ini,\n  java,\n  perl,\n  php,\n  properties,\n  python,\n  ruby,\n  rust,\n  scala,\n  swift,\n  kotlin,\n  objectivec,\n  dart,\n  bash,\n  shell,\n  sql,\n  yaml,\n  json,\n  diff,\n  xml,\n} as const;\n\nexport const SupportedLanguages = {\n  JavaScript: 'javascript',\n  JS: 'js', // Javascript alias\n  TypeScript: 'typescript',\n  TS: 'ts', // Typescript alias\n  C: 'c',\n  Cpp: 'cpp',\n  Csharp: 'csharp',\n  Cs: 'cs', // C# alias\n  Go: 'go',\n  Html: 'xml', // HTML alias\n  Http: 'http',\n  Ini: 'ini',\n  Java: 'java',\n  Perl: 'perl',\n  Php: 'php',\n  Properties: 'properties',\n  Python: 'python',\n  Ruby: 'ruby',\n  Rust: 'rust',\n  Scala: 'scala',\n  Swift: 'swift',\n  Kotlin: 'kotlin',\n  ObjectiveC: 'objectivec',\n  Dart: 'dart',\n  Bash: 'bash',\n  Shell: 'shell',\n  Sql: 'sql',\n  Yaml: 'yaml',\n  Json: 'json',\n  Graphql: 'graphql',\n  Diff: 'diff',\n  Xml: 'xml',\n} as const;\n\nexport type SupportedLanguages =\n  (typeof SupportedLanguages)[keyof typeof SupportedLanguages];\n","import React from 'react';\nimport flatMap from 'lodash/flatMap';\n\nimport { css, cx } from '@leafygreen-ui/emotion';\nimport { palette } from '@leafygreen-ui/palette';\nimport { spacing } from '@leafygreen-ui/tokens';\n\nimport {\n  LeafyGreenHighlightResult,\n  LeafyGreenHLJSPlugin,\n  TokenObject,\n} from '../highlight';\nimport { useSyntaxContext } from '../Syntax/SyntaxContext';\n\ninterface TokenProps {\n  kind?: string;\n  children: React.ReactNode;\n}\n\nexport function generateKindClassName(...kinds: Array<any>): string {\n  const prefix = 'lg-highlight-';\n  return kinds\n    .filter((str): str is string => isString(str) && str.length > 0)\n    .map(kind => {\n      // Sometimes, a kind will have run through this function before.\n      // This ensures we don't duplicate prefixes.\n      if (kind.startsWith(prefix)) {\n        return kind;\n      }\n\n      const classes = kind\n        .split('.')\n        .map(k => `${prefix}${k}`)\n        .join(' ');\n\n      return classes;\n    })\n    .join(' ');\n}\n\nfunction childrenAsKeywords(...children: Array<string>) {\n  const keywords = ['function', 'class'];\n  return children.filter(child => keywords.includes(child));\n}\n\nfunction Token({ kind, children }: TokenProps) {\n  return <span className={kind}>{children}</span>;\n}\n\ntype TreeItem =\n  | null\n  | undefined\n  | string\n  | Array<string | TokenObject>\n  | TokenObject;\n\nfunction isArray(item: any): item is Array<any> {\n  return item != null && item instanceof Array;\n}\n\nfunction isObject(item: any): item is object {\n  return item != null && typeof item === 'object' && !(item instanceof Array);\n}\n\nfunction isString(item: any): item is string {\n  return item != null && typeof item === 'string';\n}\n\nfunction isNumber(item: any): item is number {\n  return item != null && typeof item === 'number';\n}\n\nfunction isTokenObject(item: any): item is TokenObject {\n  if (item == null || typeof item !== 'object') {\n    return false;\n  }\n\n  return typeof item.kind === 'string' && item.children instanceof Array;\n}\n\nexport function processToken(token: TreeItem, key?: number): React.ReactNode {\n  if (token == null) {\n    return null;\n  }\n\n  if (isString(token)) {\n    return token;\n  }\n\n  if (isArray(token)) {\n    return token.map(processToken);\n  }\n\n  if (isObject(token)) {\n    return (\n      <Token key={key} kind={token.kind}>\n        {processToken(token.children)}\n      </Token>\n    );\n  }\n\n  return token;\n}\n\nconst cellStyle = css`\n  border-spacing: 0;\n  vertical-align: top;\n  padding: 0 ${spacing[3]}px;\n`;\n\nfunction getHighlightedRowStyle(darkMode: boolean) {\n  let backgroundColor: string, backgroundImage: string, borderColor: string;\n\n  if (darkMode) {\n    backgroundColor = 'transparent';\n    backgroundImage = `linear-gradient(90deg, ${palette.gray.dark3}, ${palette.black})`;\n    borderColor = palette.gray.dark3;\n  } else {\n    backgroundColor = palette.yellow.light3;\n    backgroundImage = 'none';\n    borderColor = palette.yellow.light2;\n  }\n\n  return css`\n    background-color: ${backgroundColor};\n    background-image: ${backgroundImage};\n    // Fixes an issue in Safari where the gradient applied to the table row would be applied\n    // to each cell in the row instead of being continuous across cells.\n    background-attachment: fixed;\n\n    // Selects all children of a highlighted row, and adds a border top\n    & > td {\n      border-top: 1px solid ${borderColor};\n    }\n\n    // Selects following rows after a highlighted row, and adds a border top\n    // We don't add border bottoms here to support consecutive highlighted rows.\n    & + tr > td {\n      border-top: 1px solid ${borderColor};\n    }\n\n    // Remove borders between consecutive highlighted rows\n    & + & > td {\n      border-top: 0;\n    }\n\n    // If the highlighted row is the last child, then we add a border bottom\n    &:last-child > td {\n      border-bottom: 1px solid ${borderColor};\n    }\n  `;\n}\n\ninterface LineTableRowProps {\n  lineNumber?: number;\n  children: React.ReactNode;\n  highlighted?: boolean;\n  darkMode: boolean;\n}\n\nexport function LineTableRow({\n  lineNumber,\n  highlighted,\n  darkMode,\n  children,\n}: LineTableRowProps) {\n  const numberColor = darkMode ? palette.gray.light1 : palette.gray.dark1;\n  const highlightedNumberColor = darkMode\n    ? palette.gray.light3\n    : palette.yellow.dark2;\n\n  return (\n    <tr className={cx({ [getHighlightedRowStyle(darkMode)]: highlighted })}>\n      {lineNumber && (\n        <td\n          className={cx(\n            cellStyle,\n            css`\n              user-select: none;\n              text-align: right;\n              padding-left: ${spacing[3] - 1}px;\n              padding-right: 0;\n              color: ${highlighted ? highlightedNumberColor : numberColor};\n            `,\n          )}\n        >\n          {lineNumber}\n        </td>\n      )}\n\n      <td className={cellStyle}>{children}</td>\n    </tr>\n  );\n}\n\ninterface FlatTokenObject {\n  kind: string;\n  children: Array<string>;\n}\n\n// Check if object is a TokenObject which has an array with a single string element within it.\nfunction isFlattenedTokenObject(obj: TokenObject): obj is FlatTokenObject {\n  // default to an empty object in the off-chance \"obj\" is null or undefined.\n  const { children } = obj ?? {};\n\n  if (isArray(children) && children.length === 1 && isString(children[0])) {\n    return true;\n  }\n\n  return false;\n}\n\n// If an array of tokens contains an object with more than one children, this function will flatten that tree recursively.\nexport function flattenNestedTree(\n  children: TokenObject['children'] | TokenObject,\n  kind?: string,\n): Array<string | FlatTokenObject> {\n  if (typeof children === 'string') {\n    return children;\n  }\n\n  if (isTokenObject(children)) {\n    return flattenNestedTree(children.children, kind);\n  }\n\n  // Generate a flat map function with a closure around parent's kind\n  function flatMapTreeWithKinds(...parentKinds: Array<string | undefined>) {\n    parentKinds = parentKinds.filter(\n      (str): str is string => isString(str) && str.length > 0,\n    );\n    return function (\n      entity: string | TokenObject,\n    ): string | FlatTokenObject | Array<string | FlatTokenObject> {\n      if (isString(entity)) {\n        return parentKinds.length > 0\n          ? {\n              kind: generateKindClassName(\n                kind,\n                ...parentKinds,\n                ...childrenAsKeywords(entity),\n              ),\n              children: [entity],\n            }\n          : entity; // entity is basic text\n      }\n\n      // If this is a nested entity, then flat map it's children\n      if ((entity?.children?.length ?? 0) >= 1) {\n        // Generate a new flat map function with this entity's kind\n        return flatMap(\n          entity.children,\n          flatMapTreeWithKinds(kind, entity.kind, ...parentKinds),\n        );\n      }\n\n      if (isFlattenedTokenObject(entity)) {\n        return {\n          kind: generateKindClassName(\n            kind,\n            entity.kind,\n            ...parentKinds,\n            ...childrenAsKeywords(...entity.children),\n          ),\n          children: entity.children,\n        };\n      }\n\n      return entity as FlatTokenObject;\n    };\n  }\n\n  return flatMap(children, flatMapTreeWithKinds(kind));\n}\n\nfunction containsLineBreak(token: TreeItem): boolean {\n  if (isArray(token)) {\n    return token.some(containsLineBreak);\n  }\n\n  if (isString(token)) {\n    return token.includes('\\n');\n  }\n\n  if (isObject(token)) {\n    return (\n      token.children?.includes('\\n') ||\n      (isString(token.children?.[0]) && token.children[0].includes('\\n'))\n    );\n  }\n\n  return false;\n}\n\ntype LineDefinition = Array<Array<string | FlatTokenObject>>;\n\nexport function treeToLines(\n  children: Array<string | TokenObject>,\n): LineDefinition {\n  const lines: LineDefinition = [];\n  let currentLineIndex = 0;\n\n  // Create a new line, if no lines exist yet\n  if (lines[currentLineIndex] == null) {\n    lines[currentLineIndex] = [];\n  }\n\n  const createNewLine = () => {\n    currentLineIndex++;\n    lines[currentLineIndex] = [];\n  };\n\n  flattenNestedTree(children).forEach(child => {\n    // If the current element includes a line break, we need to handle it differently\n    if (containsLineBreak(child)) {\n      if (isString(child)) {\n        child.split('\\n').forEach((fragment, i) => {\n          if (i > 0) {\n            createNewLine();\n          }\n\n          // Empty new lines should be represented as an empty array\n          if (fragment) {\n            lines[currentLineIndex].push(fragment);\n          }\n        });\n      } else {\n        const tokenString = child.children[0];\n\n        tokenString.split('\\n').forEach((fragment, i) => {\n          if (i > 0) {\n            createNewLine();\n          }\n\n          lines[currentLineIndex].push({\n            kind: child.kind,\n            children: [fragment],\n          });\n        });\n      }\n    } else if (child && (isString(child) || isFlattenedTokenObject(child))) {\n      lines[currentLineIndex].push(child);\n    }\n  });\n\n  return lines;\n}\n\ninterface TableContentProps {\n  lines: LineDefinition;\n}\n\nexport function TableContent({ lines }: TableContentProps) {\n  const { highlightLines, showLineNumbers, darkMode, lineNumberStart } =\n    useSyntaxContext();\n  const trimmedLines = [...lines];\n\n  // Strip empty lines from the beginning of code blocks\n  while (trimmedLines[0]?.length === 0) {\n    trimmedLines.shift();\n  }\n\n  // Strip empty lines from the end of code blocks\n  while (trimmedLines[trimmedLines.length - 1]?.length === 0) {\n    trimmedLines.pop();\n  }\n\n  const lineShouldHighlight = (line: number) => {\n    return highlightLines.some(def => {\n      if (isNumber(def)) {\n        return line === def;\n      }\n\n      if (isArray(def)) {\n        const sortedArr = [...def].sort((a, b) => a - b);\n\n        return line >= sortedArr[0] && line <= sortedArr[1];\n      }\n\n      return false;\n    });\n  };\n\n  return (\n    <>\n      {trimmedLines.map((line, index) => {\n        const currentLineNumber = index + (lineNumberStart ?? 1);\n        const highlightLine = lineShouldHighlight(currentLineNumber);\n\n        let displayLineNumber;\n\n        if (showLineNumbers) {\n          displayLineNumber = currentLineNumber;\n        }\n\n        const processedLine = line?.length ? (\n          line.map(processToken)\n        ) : (\n          // We create placeholder content when a line break appears to preserve the line break's height\n          // It needs to be inline-block for the table row to not collapse.\n          <div\n            className={css`\n              display: inline-block;\n            `}\n          />\n        );\n\n        return (\n          <LineTableRow\n            key={currentLineNumber}\n            lineNumber={displayLineNumber}\n            darkMode={darkMode}\n            highlighted={highlightLine}\n          >\n            {processedLine}\n          </LineTableRow>\n        );\n      })}\n    </>\n  );\n}\n\nconst plugin: LeafyGreenHLJSPlugin = {\n  'after:highlight': function (result: LeafyGreenHighlightResult) {\n    const { rootNode } = result._emitter;\n    // console.log(JSON.stringify(rootNode.children, null, 2));\n    result.react = <TableContent lines={treeToLines(rootNode.children)} />;\n  },\n};\n\nexport default plugin;\n","import { createContext, useContext } from 'react';\n\nimport { LineHighlightingDefinition } from '../types';\n\ninterface SyntaxContext {\n  highlightLines: LineHighlightingDefinition;\n  showLineNumbers?: boolean;\n  darkMode: boolean;\n  lineNumberStart?: number;\n}\n\nexport const SyntaxContext = createContext<SyntaxContext>({\n  highlightLines: [],\n  darkMode: false,\n});\n\nexport function useSyntaxContext() {\n  return useContext(SyntaxContext);\n}\n","import React, { useMemo } from 'react';\nimport { HLJSOptions, HLJSPlugin } from 'highlight.js';\nimport hljs from 'highlight.js/lib/core'; // Skip highlight's auto-registering\nimport hljsDefineGraphQL from 'highlightjs-graphql';\nimport PropTypes from 'prop-types';\n\nimport { css, cx } from '@leafygreen-ui/emotion';\nimport {\n  useBaseFontSize,\n  useDarkMode,\n} from '@leafygreen-ui/leafygreen-provider';\nimport { fontFamilies, typeScales } from '@leafygreen-ui/tokens';\n\nimport { injectGlobalStyles } from '../globalStyles';\nimport { LeafyGreenHighlightResult } from '../highlight';\nimport { languageParsers, SupportedLanguages } from '../languages';\nimport renderingPlugin, {\n  TableContent,\n} from '../renderingPlugin/renderingPlugin';\nimport { SyntaxContext } from '../Syntax/SyntaxContext';\nimport { Language, SyntaxProps } from '../types';\n\ntype FilteredSupportedLanguagesEnum = Omit<\n  typeof SupportedLanguages,\n  // Aliases for languages\n  'Cs' | 'JS' | 'TS'\n>;\ntype FilteredSupportedLanguages =\n  FilteredSupportedLanguagesEnum[keyof FilteredSupportedLanguagesEnum];\n\nfunction filterSupportedLanguages(\n  language: SupportedLanguages,\n): language is FilteredSupportedLanguages {\n  return language !== 'cs' && language !== 'js' && language !== 'ts';\n}\n\nlet syntaxHighlightingInitialized = false;\n\nfunction initializeSyntaxHighlighting() {\n  syntaxHighlightingInitialized = true;\n\n  injectGlobalStyles();\n\n  // We filter out 'cs' here because it's redundant with 'csharp' and 'js' because it's redundant with 'javascript'\n  const SupportedLanguagesList = Object.values(SupportedLanguages).filter(\n    filterSupportedLanguages,\n  );\n\n  SupportedLanguagesList.forEach(language => {\n    if (language === 'graphql') {\n      hljsDefineGraphQL(hljs);\n    } else {\n      hljs.registerLanguage(language, languageParsers[language]);\n    }\n  });\n\n  hljs.configure({\n    languages: SupportedLanguagesList,\n    tabReplace: '  ',\n  } as Partial<HLJSOptions>);\n\n  hljs.addPlugin(renderingPlugin as HLJSPlugin);\n}\n\nconst codeStyles = css`\n  color: inherit;\n  font-family: ${fontFamilies.code};\n`;\n\n/**\n * @internal\n */\nfunction Syntax({\n  children,\n  language,\n  showLineNumbers = false,\n  lineNumberStart,\n  highlightLines = [],\n  className,\n  ...rest\n}: SyntaxProps) {\n  if (!syntaxHighlightingInitialized) {\n    initializeSyntaxHighlighting();\n  }\n\n  const highlightedContent: LeafyGreenHighlightResult | null = useMemo(() => {\n    if (language === Language.None) {\n      return null;\n    }\n\n    return hljs.highlight(children, {\n      language,\n      ignoreIllegals: true,\n    }) as LeafyGreenHighlightResult;\n  }, [language, children]);\n\n  const content =\n    highlightedContent === null ? (\n      // We create a similar data structure to the rendering plugin so that we can generate\n      // a table that's identical when the plugin isn't being used.\n      <TableContent\n        lines={children.split('\\n').map(item => (item ? [item] : []))}\n      />\n    ) : (\n      highlightedContent.react\n    );\n\n  const { theme, darkMode } = useDarkMode();\n\n  const baseFontSize = useBaseFontSize();\n  // TODO: remove 14 check when useBaseFontSize is updated\n  const typeScale = baseFontSize === 14 ? typeScales.code1 : typeScales.code2;\n  const codeFontStyles = css`\n    font-size: ${typeScale.fontSize}px;\n    line-height: ${typeScale.lineHeight}px;\n  `;\n\n  return (\n    <SyntaxContext.Provider\n      value={{\n        highlightLines,\n        showLineNumbers,\n        lineNumberStart,\n        darkMode,\n      }}\n    >\n      <code\n        {...rest}\n        className={cx(\n          `lg-highlight-hljs-${theme}`,\n          codeStyles,\n          codeFontStyles,\n          language,\n          className,\n        )}\n      >\n        <table\n          className={css`\n            border-spacing: 0;\n          `}\n        >\n          <tbody>{content}</tbody>\n        </table>\n      </code>\n    </SyntaxContext.Provider>\n  );\n}\n\nSyntax.displayName = 'Syntax';\n\nSyntax.propTypes = {\n  children: PropTypes.string.isRequired,\n  language: PropTypes.oneOf(Object.values(Language)),\n  className: PropTypes.string,\n  darkMode: PropTypes.bool,\n  showLineNumbers: PropTypes.bool,\n  lineNumberStart: PropTypes.number,\n  highlightLines: PropTypes.arrayOf(\n    PropTypes.oneOfType([\n      PropTypes.arrayOf(PropTypes.number),\n      PropTypes.number,\n    ]),\n  ),\n};\n\nexport default Syntax;\n","import { HTMLElementProps } from '@leafygreen-ui/lib';\n\nimport { SupportedLanguages } from './languages';\n\nexport const Mode = {\n  Light: 'light',\n  Dark: 'dark',\n} as const;\n\nexport type Mode = (typeof Mode)[keyof typeof Mode];\n\nexport const Language = {\n  ...SupportedLanguages,\n  None: 'none',\n} as const;\n\nexport type Language = (typeof Language)[keyof typeof Language];\n\nexport type LineHighlightingDefinition = ReadonlyArray<\n  number | readonly [number, number]\n>;\n\nexport interface SyntaxProps extends HTMLElementProps<'code'> {\n  /**\n   * The children to render inside Code. This is usually going to be a formatted code block or line.\n   * @required\n   */\n  children: string;\n\n  /**\n   * The language to highlight the syntax of.\n   */\n  language: Language;\n\n  /**\n   * Shows line numbers. This is specifically used for the Code component implementation.\n   *\n   * default: `false`\n   */\n  showLineNumbers?: boolean;\n\n  /**\n   * Specifies the number by which to start line numbering.\n   *\n   * default: `1`\n   */\n  lineNumberStart?: number;\n\n  /**\n   * An array of lines to highlight. The array can only contain numbers corresponding to the line numbers to highlight, and / or tuples representing a range (e.g. `[6, 10]`);\n   */\n  highlightLines?: LineHighlightingDefinition;\n}\n\nexport interface PopoverProps {\n  /**\n   * Specifies that the popover content should be rendered at the end of the DOM,\n   * rather than in the DOM tree.\n   *\n   * default: `true`\n   */\n  usePortal?: boolean;\n\n  /**\n   * When usePortal is `true`, specifies a class name to apply to the root element of the portal.\n   */\n  portalClassName?: string;\n\n  /**\n   * When usePortal is `true`, specifies an element to portal within. The default behavior is to generate a div at the end of the document to render within.\n   */\n  portalContainer?: HTMLElement | null;\n\n  /**\n   * When usePortal is `true`, specifies the scrollable element to position relative to.\n   */\n  scrollContainer?: HTMLElement | null;\n\n  /**\n   * Number that controls the z-index of the popover element directly.\n   */\n  popoverZIndex?: number;\n}\n\nexport type CodeProps = Omit<\n  SyntaxProps,\n  'onCopy' | 'language' | 'onChange'\n> & {\n  /**\n   * Shows window chrome for code block;\n   *\n   * default: `false`\n   */\n  showWindowChrome?: boolean;\n\n  /**\n   * Renders a file name or other descriptor for a block of code\n   */\n  chromeTitle?: string;\n\n  /**\n   * When true, allows the code block to be copied to the user's clipboard by clicking the rendered copy button.\n   *\n   * default: `true`\n   */\n  copyable?: boolean;\n\n  /**\n   * Callback fired when Code is copied via the copy button.\n   *\n   */\n  onCopy?: Function;\n\n  /**\n   * Custom action buttons. Should be an array of `IconButton`.\n   *\n   * @type <IconButton />[]\n   */\n  customActionButtons?: Array<React.ReactElement>;\n\n  /**\n   * When true, custom action buttons will be shown.\n   *\n   */\n  showCustomActionButtons?: boolean;\n\n  /**\n   * Determines whether or not the syntax will be rendered in dark mode.\n   *\n   * @default `false`\n   */\n  darkMode?: boolean;\n} & (\n    | {\n        /**\n         * The language to format the code. See {@link https://github.com/mongodb/leafygreen-ui/blob/main/packages/code/src/languages.ts | SupportedLanguages}.\n         */\n        language: Language;\n        languageOptions?: undefined;\n        onChange?: undefined;\n      }\n    | {\n        /**\n         * The `displayName` of the selected `languageOption`\n         */\n        language: LanguageOption['displayName'];\n        /**\n         * An array of `LanguageOptions` to select from. Enables the Language switcher.\n         */\n        languageOptions: Array<LanguageOption>;\n        /**\n         * Callback fired when the language option changes.\n         */\n        onChange: (arg0: LanguageOption) => void;\n      }\n  ) &\n  PopoverProps;\n\nexport interface LanguageOption {\n  displayName: string;\n  language: Language;\n  image?: React.ReactElement;\n}\n\nexport interface LanguageSwitcher extends PopoverProps {\n  onChange: (arg0: LanguageOption) => void;\n  language: LanguageOption['displayName'];\n  languageOptions: Array<LanguageOption>;\n}\n","import { css } from '@leafygreen-ui/emotion';\nimport { Theme } from '@leafygreen-ui/lib';\nimport { palette } from '@leafygreen-ui/palette';\nimport { fontFamilies, typeScales } from '@leafygreen-ui/tokens';\n\nimport { variantColors } from '../globalStyles';\n\nexport const windowChromeHeight = 28;\nconst controlSize = 12;\nconst controlSpacing = 8;\nconst borderRadius = 4;\n\nexport const windowChromeStyle = css`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: ${windowChromeHeight}px;\n  padding-left: ${controlSize}px;\n  padding-right: ${controlSize}px;\n  border-radius: ${borderRadius}px ${borderRadius}px 0 0;\n  font-family: ${fontFamilies.default};\n`;\n\nexport const windowChromeThemeStyles: Record<Theme, string> = {\n  [Theme.Light]: css`\n    color: ${palette.gray.dark2};\n    background-color: ${variantColors.light[1]};\n  `,\n  [Theme.Dark]: css`\n    color: ${palette.gray.light1};\n    background-color: ${variantColors.dark[1]};\n  `,\n};\n\nexport const textStyle = css`\n  padding-left: ${controlSpacing}px;\n  padding-right: ${controlSpacing}px;\n  font-size: ${typeScales.body1.fontSize}px;\n`;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { cx } from '@leafygreen-ui/emotion';\nimport { useDarkMode } from '@leafygreen-ui/leafygreen-provider';\n\nimport {\n  textStyle,\n  windowChromeStyle,\n  windowChromeThemeStyles,\n} from './WindowChrome.styles';\n\ninterface WindowChromeProps {\n  chromeTitle?: string;\n}\n\nfunction WindowChrome({ chromeTitle = '' }: WindowChromeProps) {\n  const { theme } = useDarkMode();\n\n  return (\n    <div className={cx(windowChromeStyle, windowChromeThemeStyles[theme])}>\n      <div className={textStyle}>{chromeTitle}</div>\n    </div>\n  );\n}\n\nWindowChrome.displayName = 'WindowChrome';\n\nWindowChrome.propTypes = {\n  darkMode: PropTypes.bool,\n  chromeTitle: PropTypes.string,\n};\n\nexport default WindowChrome;\n","export const ScrollState = {\n  None: 'none',\n  Left: 'left',\n  Right: 'right',\n  Both: 'both',\n} as const;\n\nexport type ScrollState = (typeof ScrollState)[keyof typeof ScrollState];\n\nexport type DetailedElementProps<T> = React.DetailedHTMLProps<\n  React.HTMLAttributes<T>,\n  T\n>;\n","import facepaint from 'facepaint';\nimport { transparentize } from 'polished';\n\nimport { css } from '@leafygreen-ui/emotion';\nimport { Theme } from '@leafygreen-ui/lib';\nimport { palette } from '@leafygreen-ui/palette';\nimport { spacing, transitionDuration } from '@leafygreen-ui/tokens';\n\nimport { variantColors } from '../globalStyles';\n\nimport { ScrollState } from './Code.types';\n\n// We use max-device-width to select specifically for iOS devices\nconst mq = facepaint([\n  `@media only screen and (max-device-width: 812px) and (-webkit-min-device-pixel-ratio: 2)`,\n  `@media only screen and (min-device-width: 813px) and (-webkit-min-device-pixel-ratio: 2)`,\n]);\n\nconst singleLineComponentHeight = 36;\nconst lineHeight = 24;\n\nexport const wrapperStyle: Record<Theme, string> = {\n  [Theme.Light]: css`\n    border: 1px solid ${variantColors[Theme.Light][1]};\n    border-radius: 12px;\n    overflow: hidden;\n  `,\n  [Theme.Dark]: css`\n    border: 1px solid ${variantColors[Theme.Dark][1]};\n    border-radius: 12px;\n    overflow: hidden;\n  `,\n};\n\nexport const contentWrapperStyles = css`\n  position: relative;\n  display: grid;\n  grid-template-areas: 'code panel';\n  grid-template-columns: auto 38px;\n  border-radius: inherit;\n  z-index: 0; // new stacking context\n`;\n\nexport const contentWrapperStylesNoPanel = css`\n  // No panel, all code\n  grid-template-areas: 'code code';\n`;\n\nexport const contentWrapperStyleWithPicker = css`\n  grid-template-areas: 'panel' 'code';\n  grid-template-columns: unset;\n`;\n\nexport const codeWrapperStyle = css`\n  grid-area: code;\n  overflow-x: auto;\n  // Many applications have global styles that are adding a border and border radius to this element.\n  border-radius: inherit;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border: 0;\n  // We apply left / right padding in Syntax to support line highlighting\n  padding-top: ${spacing[2]}px;\n  padding-bottom: ${spacing[2]}px;\n  margin: 0;\n  position: relative;\n  transition: box-shadow ${transitionDuration.faster}ms ease-in-out;\n\n  ${mq({\n    // Fixes annoying issue where font size is overridden in mobile Safari to be 20px.\n    // Ideally, we wouldn't need to set the text to wrap, but from what I can tell, this is the one possible solution to the problem.\n    whiteSpace: ['pre', 'pre-wrap', 'pre'],\n  })}\n\n  &:focus-visible {\n    outline: none;\n    box-shadow: 0 0 0 2px ${palette.blue.light1} inset;\n  }\n`;\n\nexport const codeWrapperStyleNoPanel = css`\n  border-left: 0;\n  border-radius: inherit;\n  border-top-right-radius: 0;\n  border-top-left-radius: 0;\n`;\nexport const codeWrapperStyleWithLanguagePicker = css`\n  border-left: 0;\n  border-radius: inherit;\n  border-top-right-radius: 0;\n  border-top-left-radius: 0;\n`;\n\nexport const singleLineCodeWrapperStyle = css`\n  display: flex;\n  align-items: center;\n  padding-top: ${(singleLineComponentHeight - lineHeight) / 2}px;\n  padding-bottom: ${(singleLineComponentHeight - lineHeight) / 2}px;\n`;\n\nexport const panelStyles = css`\n  z-index: 2; // Above the shadows\n  grid-area: panel;\n`;\n\nexport function getCodeWrapperVariantStyle(theme: Theme): string {\n  const colors = variantColors[theme];\n\n  return css`\n    background-color: ${colors[0]};\n    color: ${colors[3]};\n  `;\n}\n\nexport const baseScrollShadowStyles = css`\n  &:before,\n  &:after {\n    content: '';\n    display: block;\n    position: absolute;\n    z-index: 1; // above the code\n    top: 0;\n    height: 100%;\n    width: 40px;\n    border-radius: 40%;\n    box-shadow: unset;\n    transition: box-shadow ${transitionDuration.faster}ms ease-in-out;\n  }\n  &:before {\n    grid-column: 1;\n    left: -40px;\n  }\n  &:after {\n    grid-column: 2; // Placed either under Panel, or on the right edge\n  }\n`;\n\nexport const scrollShadowStylesNoPanel = css`\n  &:after {\n    grid-column: -1; // Placed on the right edge\n  }\n`;\n\nexport const scrollShadowStylesWithPicker = css`\n  &:before,\n  &:after {\n    grid-row: 2; // Placed on the top under the Picker Panel\n  }\n`;\n\nexport function getScrollShadow(\n  scrollState: ScrollState,\n  theme: Theme,\n): string {\n  const dropShadowBefore =\n    theme === Theme.Light\n      ? `1px 0 10px 0 ${transparentize(0.75, 'black')}`\n      : `15px 0px 15px 0 ${transparentize(0.7, 'black')}`;\n\n  const dropShadowAfter =\n    theme === Theme.Light\n      ? `-1px 0px 10px ${transparentize(0.75, 'black')}`\n      : `-15px 0px 15px 0 ${transparentize(0.7, 'black')}`;\n\n  return css`\n    &:before {\n      ${(scrollState === ScrollState.Both ||\n        scrollState === ScrollState.Left) &&\n      css`\n        box-shadow: ${dropShadowBefore};\n      `};\n    }\n    &:after {\n      ${(scrollState === ScrollState.Both ||\n        scrollState === ScrollState.Right) &&\n      `\n        box-shadow: ${dropShadowAfter};\n      `};\n    }\n  `;\n}\n","import React, { useEffect, useMemo, useRef, useState } from 'react';\nimport ClipboardJS from 'clipboard';\nimport debounce from 'lodash/debounce';\nimport PropTypes from 'prop-types';\n\nimport { cx } from '@leafygreen-ui/emotion';\nimport { useIsomorphicLayoutEffect } from '@leafygreen-ui/hooks';\nimport LeafyGreenProvider, {\n  useDarkMode,\n} from '@leafygreen-ui/leafygreen-provider';\nimport { isComponentType } from '@leafygreen-ui/lib';\n\nimport { Panel } from '../Panel';\nimport { Syntax } from '../Syntax';\nimport { CodeProps, Language } from '../types';\nimport { WindowChrome } from '../WindowChrome';\n\nimport {\n  baseScrollShadowStyles,\n  codeWrapperStyle,\n  codeWrapperStyleNoPanel,\n  codeWrapperStyleWithLanguagePicker,\n  contentWrapperStyles,\n  contentWrapperStylesNoPanel,\n  contentWrapperStyleWithPicker,\n  getCodeWrapperVariantStyle,\n  getScrollShadow,\n  panelStyles,\n  scrollShadowStylesNoPanel,\n  scrollShadowStylesWithPicker,\n  singleLineCodeWrapperStyle,\n  wrapperStyle,\n} from './Code.styles';\nimport { DetailedElementProps, ScrollState } from './Code.types';\n\nexport function hasMultipleLines(string: string): boolean {\n  return string.trim().includes('\\n');\n}\n\n/**\n *\n * React Component that outputs single-line and multi-line code blocks.\n *\n * @param props.children The string to be formatted.\n * @param props.className An additional CSS class added to the root element of Code.\n * @param props.language The language used for syntax highlighting.\n * @param props.darkMode Determines if the code block will be rendered in dark mode. Default: `false`\n * @param props.showLineNumbers When true, shows line numbers in preformatted code blocks. Default: `false`\n * @param props.lineNumberStart Specifies the numbering of the first line in the block. Default: 1\n * @param props.copyable When true, allows the code block to be copied to the user's clipboard. Default: `true`\n * @param props.onCopy Callback fired when Code is copied\n */\nfunction Code({\n  children = '',\n  className,\n  language: languageProp,\n  darkMode: darkModeProp,\n  showLineNumbers = false,\n  lineNumberStart = 1,\n  showWindowChrome = false,\n  chromeTitle = '',\n  copyable = true,\n  onCopy,\n  highlightLines = [],\n  languageOptions,\n  onChange,\n  customActionButtons = [],\n  showCustomActionButtons = false,\n  usePortal = true,\n  portalClassName,\n  portalContainer,\n  scrollContainer,\n  popoverZIndex,\n  ...rest\n}: CodeProps) {\n  const scrollableElementRef = useRef<HTMLPreElement>(null);\n  const [scrollState, setScrollState] = useState<ScrollState>(ScrollState.None);\n  const [showCopyBar, setShowCopyBar] = useState(false);\n  const isMultiline = useMemo(() => hasMultipleLines(children), [children]);\n  const { theme, darkMode } = useDarkMode(darkModeProp);\n\n  const filteredCustomActionIconButtons = customActionButtons.filter(\n    (item: React.ReactElement) => isComponentType(item, 'IconButton') === true,\n  );\n\n  const showCustomActionsInPanel =\n    showCustomActionButtons && !!filteredCustomActionIconButtons.length;\n\n  const currentLanguage = languageOptions?.find(\n    option => option.displayName === languageProp,\n  );\n\n  const showPanel =\n    !showWindowChrome &&\n    (copyable || !!currentLanguage || showCustomActionsInPanel);\n\n  const highlightLanguage = currentLanguage\n    ? currentLanguage.language\n    : languageProp;\n\n  const showLanguagePicker = !!currentLanguage;\n\n  useEffect(() => {\n    setShowCopyBar(copyable && ClipboardJS.isSupported());\n  }, [copyable, showWindowChrome]);\n\n  useIsomorphicLayoutEffect(() => {\n    const scrollableElement = scrollableElementRef.current;\n\n    if (\n      scrollableElement != null &&\n      scrollableElement.scrollWidth > scrollableElement.clientWidth\n    ) {\n      setScrollState(ScrollState.Right);\n    }\n  }, []);\n\n  const renderedSyntaxComponent = (\n    <Syntax\n      showLineNumbers={showLineNumbers}\n      lineNumberStart={lineNumberStart}\n      language={highlightLanguage as Language}\n      highlightLines={highlightLines}\n    >\n      {children}\n    </Syntax>\n  );\n\n  function handleScroll(e: React.UIEvent) {\n    const { scrollWidth, clientWidth: elementWidth } = e.target as HTMLElement;\n    const isScrollable = scrollWidth > elementWidth;\n\n    if (isScrollable) {\n      const scrollPosition = (e.target as HTMLElement).scrollLeft;\n      const maxPosition = scrollWidth - elementWidth;\n\n      if (scrollPosition > 0 && scrollPosition < maxPosition) {\n        setScrollState(ScrollState.Both);\n      } else if (scrollPosition > 0) {\n        setScrollState(ScrollState.Left);\n      } else if (scrollPosition < maxPosition) {\n        setScrollState(ScrollState.Right);\n      }\n    }\n  }\n\n  const debounceScroll = debounce(handleScroll, 50, { leading: true });\n\n  const onScroll: React.UIEventHandler<HTMLDivElement | HTMLPreElement> = e => {\n    e.persist();\n    debounceScroll(e);\n  };\n\n  const popoverProps = {\n    popoverZIndex,\n    ...(usePortal\n      ? {\n          usePortal,\n          portalClassName,\n          portalContainer,\n          scrollContainer,\n        }\n      : { usePortal }),\n  } as const;\n\n  return (\n    <LeafyGreenProvider darkMode={darkMode}>\n      <div className={wrapperStyle[theme]}>\n        {showWindowChrome && <WindowChrome chromeTitle={chromeTitle} />}\n\n        <div\n          className={cx(\n            contentWrapperStyles,\n            baseScrollShadowStyles,\n            getScrollShadow(scrollState, theme),\n            {\n              [contentWrapperStyleWithPicker]: showLanguagePicker,\n              [scrollShadowStylesWithPicker]: showLanguagePicker,\n              [contentWrapperStylesNoPanel]: !showPanel,\n              [scrollShadowStylesNoPanel]: !showPanel,\n            },\n          )}\n        >\n          <pre\n            {...(rest as DetailedElementProps<HTMLPreElement>)}\n            className={cx(\n              codeWrapperStyle,\n              getCodeWrapperVariantStyle(theme),\n              {\n                [codeWrapperStyleWithLanguagePicker]: showLanguagePicker,\n                [codeWrapperStyleNoPanel]: !showPanel,\n                [singleLineCodeWrapperStyle]: !isMultiline,\n              },\n              className,\n            )}\n            onScroll={onScroll}\n            ref={scrollableElementRef}\n            // Adds to Tab order when content is scrollable, otherwise overflowing content is inaccessible via keyboard navigation\n            // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n            tabIndex={scrollState !== ScrollState.None ? 0 : -1}\n          >\n            {renderedSyntaxComponent}\n          </pre>\n\n          {/* Can make this a more robust check in the future */}\n          {/* Right now the panel will only be rendered with copyable or a language switcher */}\n          {showPanel && (\n            <Panel\n              className={cx(panelStyles)}\n              language={currentLanguage}\n              languageOptions={languageOptions}\n              onChange={onChange}\n              contents={children}\n              onCopy={onCopy}\n              showCopyButton={showCopyBar}\n              isMultiline={isMultiline}\n              customActionButtons={filteredCustomActionIconButtons}\n              showCustomActionButtons={showCustomActionsInPanel}\n              {...popoverProps}\n            />\n          )}\n        </div>\n      </div>\n    </LeafyGreenProvider>\n  );\n}\n\nCode.displayName = 'Code';\n\nCode.propTypes = {\n  children: PropTypes.string.isRequired,\n  language: PropTypes.oneOfType([\n    PropTypes.oneOf(Object.values(Language)),\n    PropTypes.string,\n  ]),\n  darkMode: PropTypes.bool,\n  className: PropTypes.string,\n  showLineNumbers: PropTypes.bool,\n  lineNumberStart: PropTypes.number,\n  showWindowChrome: PropTypes.bool,\n  chromeTitle: PropTypes.string,\n  highlightLines: PropTypes.arrayOf(\n    PropTypes.oneOfType([\n      PropTypes.arrayOf(PropTypes.number),\n      PropTypes.number,\n    ]),\n  ),\n};\n\nexport default Code;\n"],"names":["_templateObject","_templateObject2","_templateObject3","_templateObject4","COPIED_SUCCESS_DURATION","COPIED_TEXT","COPY_TEXT","copiedThemeStyle","_defineProperty","Theme","Light","css","_taggedTemplateLiteral","palette","white","green","dark1","Dark","gray","dark3","base","copyButtonThemeStyles","light1","CopyButton","_ref","onCopy","contents","_useState2","_slicedToArray","useState","copied","setCopied","_useState4","open","setOpen","buttonRef","useRef","theme","useDarkMode","portalContainer","usePopoverPortalContainer","closeTooltip","useBackdropClick","useEffect","current","clipboard","ClipboardJS","text","container","timeoutId","setTimeout","clearTimeout","destroy","React","createElement","Tooltip","align","Align","Top","justify","Justify","Middle","trigger","IconButton","ref","className","cx","onClick","e","preventDefault","onKeyDown","key","keyMap","Escape","Tab","Enter","Space","_buttonRef$current","_buttonRef$current2","click","focus","onMouseEnter","onMouseLeave","CheckmarkIcon","CopyIcon","VisuallyHidden","role","shouldClose","displayName","_templateObject5","_templateObject6","_excluded","CustomSelectMenuButton","forwardRef","children","props","_objectWithoutProperties","Button","_extends","_templateObject7","_templateObject8","_templateObject9","containerStyle","menuButtonStyle","buttonModeStyle","light2","blue","dark2","selectStyle","iconMargin","spacing","LanguageSwitcher","element","language","languageOptions","onChange","usePortal","portalClassName","scrollContainer","popoverZIndex","_useDarkMode","darkMode","previousLanguage","usePrevious","iconStyle","renderedLogo","FileIcon","image","isComponentGlyph","isComponentType","cloneElement","popoverProps","Select","val","undefined","selectedOption","find","option","value","allowDeselect","__INTERNAL__menuButtonSlot__","__INTERNAL__menuButtonSlotProps__","leftGlyph","map","Option","basePanelStyle","basePanelThemeStyle","sidePanelStyle","sidePanelThemeStyles","languageSwitcherPanelStyle","languageSwitcherPanelThemeStyles","Panel","showCopyButton","customActionButtons","showCustomActionButtons","withLanguageSwitcher","Fragment","action","variantColors","light3","black","getStyles","concat","fontWeights","bold","languageParsers","javascript","typescript","c","cpp","csharp","go","http","ini","java","perl","php","properties","python","ruby","rust","scala","swift","kotlin","objectivec","dart","bash","shell","sql","yaml","json","diff","xml","SupportedLanguages","JavaScript","JS","TypeScript","TS","C","Cpp","Csharp","Cs","Go","Html","Http","Ini","Java","Perl","Php","Properties","Python","Ruby","Rust","Scala","Swift","Kotlin","ObjectiveC","Dart","Bash","Shell","Sql","Yaml","Json","Graphql","Diff","Xml","SyntaxContext","createContext","highlightLines","generateKindClassName","prefix","_len","arguments","length","kinds","Array","_key","filter","str","isString","kind","startsWith","split","k","join","childrenAsKeywords","keywords","_len2","_key2","child","includes","Token","isArray","item","isObject","_typeof","processToken","token","cellStyle","getHighlightedRowStyle","backgroundColor","backgroundImage","borderColor","yellow","LineTableRow","_ref2","lineNumber","highlighted","numberColor","highlightedNumberColor","isFlattenedTokenObject","obj","flattenNestedTree","flatMap","flatMapTreeWithKinds","_len3","parentKinds","_key3","entity","_entity$children$leng","_entity$children","apply","_toConsumableArray","containsLineBreak","some","_token$children","_token$children2","treeToLines","lines","currentLineIndex","createNewLine","forEach","fragment","i","push","TableContent","_ref4","_useSyntaxContext","useContext","showLineNumbers","lineNumberStart","trimmedLines","_trimmedLines$","shift","_trimmedLines","pop","line","index","displayLineNumber","currentLineNumber","highlightLine","def","sortedArr","sort","a","b","lineShouldHighlight","processedLine","plugin","result","rootNode","_emitter","react","Mode","Language","_objectSpread","None","filterSupportedLanguages","syntaxHighlightingInitialized","initializeSyntaxHighlighting","Object","values","injectGlobal","SupportedLanguagesList","hljsDefineGraphQL","hljs","registerLanguage","configure","languages","tabReplace","addPlugin","renderingPlugin","codeStyles","fontFamilies","code","Syntax","_ref$showLineNumbers","_ref$highlightLines","rest","highlightedContent","useMemo","highlight","ignoreIllegals","content","typeScale","useBaseFontSize","typeScales","code1","code2","codeFontStyles","fontSize","lineHeight","Provider","propTypes","PropTypes","string","isRequired","oneOf","bool","number","arrayOf","oneOfType","windowChromeStyle","default","windowChromeThemeStyles","light","dark","textStyle","body1","WindowChrome","_ref$chromeTitle","chromeTitle","_templateObject10","_templateObject11","_templateObject12","_templateObject13","_templateObject14","_templateObject15","_templateObject16","ScrollState","Left","Right","Both","mq","facepaint","wrapperStyle","contentWrapperStyles","contentWrapperStylesNoPanel","contentWrapperStyleWithPicker","codeWrapperStyle","transitionDuration","faster","whiteSpace","codeWrapperStyleNoPanel","codeWrapperStyleWithLanguagePicker","singleLineCodeWrapperStyle","panelStyles","getCodeWrapperVariantStyle","colors","baseScrollShadowStyles","scrollShadowStylesNoPanel","scrollShadowStylesWithPicker","getScrollShadow","scrollState","dropShadowBefore","transparentize","dropShadowAfter","Code","_ref$children","languageProp","darkModeProp","_ref$lineNumberStart","_ref$showWindowChrome","showWindowChrome","_ref$copyable","copyable","_ref$customActionButt","_ref$showCustomAction","_ref$usePortal","scrollableElementRef","setScrollState","showCopyBar","setShowCopyBar","isMultiline","trim","filteredCustomActionIconButtons","showCustomActionsInPanel","currentLanguage","showPanel","highlightLanguage","showLanguagePicker","isSupported","useIsomorphicLayoutEffect","scrollableElement","scrollWidth","clientWidth","renderedSyntaxComponent","debounceScroll","debounce","target","elementWidth","scrollPosition","scrollLeft","maxPosition","leading","LeafyGreenProvider","onScroll","persist","tabIndex"],"mappings":"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"}