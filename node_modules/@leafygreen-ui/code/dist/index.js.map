{"version":3,"file":"index.js","sources":["../src/CopyButton/constants.ts","../src/CopyButton/CopyButton.styles.ts","../src/CopyButton/CopyButton.tsx","../src/CustomSelectMenuButton/CustomSelectMenuButton.tsx","../src/LanguageSwitcher/LanguageSwitcher.styles.ts","../src/LanguageSwitcher/LanguageSwitcher.tsx","../src/Panel/Panel.styles.ts","../src/Panel/Panel.tsx","../src/globalStyles.tsx","../src/languages.ts","../src/renderingPlugin/renderingPlugin.tsx","../src/Syntax/SyntaxContext.tsx","../src/Syntax/Syntax.tsx","../src/types.ts","../src/WindowChrome/WindowChrome.styles.ts","../src/WindowChrome/WindowChrome.tsx","../src/Code/Code.types.ts","../src/Code/Code.styles.ts","../src/Code/Code.tsx"],"sourcesContent":["export const COPIED_SUCCESS_DURATION = 1500;\nexport const COPIED_TEXT = 'Copied!';\nexport const COPY_TEXT = 'Copy';\n","import { css } from '@leafygreen-ui/emotion';\nimport { Theme } from '@leafygreen-ui/lib';\nimport { palette } from '@leafygreen-ui/palette';\n\nexport const copiedThemeStyle: Record<Theme, string> = {\n  [Theme.Light]: css`\n    color: ${palette.white};\n    background-color: ${palette.green.dark1};\n\n    &:focus,\n    &:hover {\n      color: ${palette.white};\n\n      &:before {\n        background-color: ${palette.green.dark1};\n      }\n    }\n  `,\n  [Theme.Dark]: css`\n    color: ${palette.gray.dark3};\n    background-color: ${palette.green.base};\n\n    &:focus,\n    &:hover {\n      color: ${palette.gray.dark3};\n\n      &:before {\n        background-color: ${palette.green.base};\n      }\n    }\n  `,\n};\n\nexport const copyButtonThemeStyles: Record<Theme, string> = {\n  [Theme.Light]: css`\n    align-self: center;\n    color: ${palette.gray.base};\n  `,\n  [Theme.Dark]: css`\n    align-self: center;\n    color: ${palette.gray.light1};\n  `,\n};\n","import React, { useEffect, useRef, useState } from 'react';\nimport ClipboardJS from 'clipboard';\n\nimport { VisuallyHidden } from '@leafygreen-ui/a11y';\nimport { cx } from '@leafygreen-ui/emotion';\nimport { useBackdropClick } from '@leafygreen-ui/hooks';\nimport CheckmarkIcon from '@leafygreen-ui/icon/dist/Checkmark';\nimport CopyIcon from '@leafygreen-ui/icon/dist/Copy';\nimport IconButton from '@leafygreen-ui/icon-button';\nimport {\n  useDarkMode,\n  usePopoverPortalContainer,\n} from '@leafygreen-ui/leafygreen-provider';\nimport { keyMap } from '@leafygreen-ui/lib';\nimport Tooltip, { Align, Justify } from '@leafygreen-ui/tooltip';\n\nimport { COPIED_SUCCESS_DURATION, COPIED_TEXT, COPY_TEXT } from './constants';\nimport { copiedThemeStyle, copyButtonThemeStyles } from './CopyButton.styles';\nimport { CopyProps } from './CopyButton.types';\n\nfunction CopyButton({ onCopy, contents }: CopyProps) {\n  const [copied, setCopied] = useState(false);\n  /**\n   * `CopyButton` controls `open` state of tooltip because when `copied` state\n   * changes, it causes the tooltip to re-render\n   */\n  const [open, setOpen] = useState(false);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n  const { theme } = useDarkMode();\n  const { portalContainer } = usePopoverPortalContainer();\n\n  /**\n   * toggles `open` state of tooltip\n   */\n  const closeTooltip = () => setOpen(false);\n  const openTooltip = () => setOpen(true);\n\n  /**\n   * forcibly closes tooltip if user tabs focus on tooltip and clicks\n   * outside of the trigger\n   */\n  useBackdropClick(closeTooltip, buttonRef, open);\n\n  useEffect(() => {\n    if (!buttonRef.current) {\n      return;\n    }\n\n    const clipboard = new ClipboardJS(buttonRef.current, {\n      text: () => contents,\n      container: portalContainer,\n    });\n\n    if (copied) {\n      const timeoutId = setTimeout(() => {\n        setCopied(false);\n      }, COPIED_SUCCESS_DURATION);\n\n      return () => clearTimeout(timeoutId);\n    }\n\n    return () => clipboard.destroy();\n  }, [buttonRef, contents, copied, portalContainer]);\n\n  const handleClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    onCopy?.();\n    setCopied(true);\n  };\n\n  /**\n   * `handleKeyDown` listener used to maintain UX parity with mouse events\n   */\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    switch (e.key) {\n      case keyMap.Escape:\n      case keyMap.Tab: {\n        closeTooltip();\n        break;\n      }\n\n      case keyMap.Enter:\n      case keyMap.Space: {\n        e.preventDefault();\n        buttonRef.current?.click();\n        buttonRef.current?.focus();\n        break;\n      }\n    }\n  };\n\n  /**\n   * `handleMouseEnter` and `handleMouseLeave` are used to control `open`\n   * state when mouse hovers over tooltip trigger\n   */\n  const handleMouseEnter = () => {\n    openTooltip();\n  };\n\n  const handleMouseLeave = () => {\n    closeTooltip();\n  };\n\n  /**\n   * `shouldClose` indicates to `Tooltip` component that tooltip should\n   * remain open even if trigger re-renders\n   */\n  const shouldClose = () => !open;\n\n  return (\n    <Tooltip\n      data-testid=\"code_copy-button_tooltip\"\n      open={open}\n      setOpen={setOpen}\n      align={Align.Top}\n      justify={Justify.Middle}\n      trigger={\n        <IconButton\n          data-testid=\"code_copy-button\"\n          ref={buttonRef}\n          aria-label={COPY_TEXT}\n          className={cx(copyButtonThemeStyles[theme], {\n            [copiedThemeStyle[theme]]: copied,\n          })}\n          onClick={handleClick}\n          onKeyDown={handleKeyDown}\n          onMouseEnter={handleMouseEnter}\n          onMouseLeave={handleMouseLeave}\n        >\n          {copied ? <CheckmarkIcon /> : <CopyIcon />}\n          {copied && (\n            <VisuallyHidden role=\"alert\">{COPIED_TEXT}</VisuallyHidden>\n          )}\n        </IconButton>\n      }\n      shouldClose={shouldClose}\n    >\n      {copied ? COPIED_TEXT : COPY_TEXT}\n    </Tooltip>\n  );\n}\n\nCopyButton.displayName = 'CopyButton';\n\nexport default CopyButton;\n","import React from 'react';\n\nimport Button, { ButtonProps } from '@leafygreen-ui/button';\n\n/**\n * Custom language switcher button.\n *\n * Passing down just the function which will be instantiated inside `Select`\n * @internal\n */\nexport const CustomSelectMenuButton = React.forwardRef(\n  ({ children, ...props }: ButtonProps, ref) => (\n    <Button {...props} ref={ref}>\n      {children}\n    </Button>\n  ),\n);\n\nCustomSelectMenuButton.displayName = 'CustomSelectMenuButton';\n","import { css } from '@leafygreen-ui/emotion';\nimport { Theme } from '@leafygreen-ui/lib';\nimport { palette } from '@leafygreen-ui/palette';\nimport { spacing } from '@leafygreen-ui/tokens';\n\nexport const containerStyle = css`\n  display: flex;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n`;\n\nexport const menuButtonStyle = css`\n  // Override default menuButton styles\n  margin-top: 0;\n  width: 100%;\n  height: 100%;\n  border-radius: 0px;\n  border: 0;\n  font-size: 12px;\n\n  &:hover[aria-disabled='false'],\n  &:focus,\n  &:active {\n    box-shadow: 0 0 0 0;\n    border: 0;\n  }\n\n  // Override button defaults\n  > *:last-child {\n    grid-template-columns: 16px 1fr 16px;\n    padding: 0 12px;\n    > svg {\n      width: 16px;\n      height: 16px;\n    }\n  }\n`;\n\nexport const buttonModeStyle: Record<Theme, string> = {\n  [Theme.Light]: css`\n    background-color: ${palette.white};\n    border-right: 1px solid ${palette.gray.light2};\n    box-shadow: 0 0 0 0;\n\n    &:hover[aria-disabled='false'],\n    &:active,\n    &:focus {\n      border-right: 1px solid ${palette.gray.light2};\n    }\n\n    &:hover[aria-disabled='false'] {\n      background-color: ${palette.gray.light2};\n    }\n\n    &:focus-visible {\n      background-color: ${palette.blue.light2};\n    }\n  `,\n  [Theme.Dark]: css`\n    background-color: ${palette.gray.dark2};\n    border-right: 1px solid ${palette.gray.dark1};\n    color: ${palette.gray.light2};\n\n    &:hover[aria-disabled='false'],\n    &:focus,\n    &:active {\n      border-right: 1px solid ${palette.gray.dark1};\n    }\n\n    &:hover[aria-disabled='false'],\n    &:active {\n      background-color: ${palette.gray.dark1};\n    }\n\n    &:focus-visible {\n      background-color: ${palette.blue.light1};\n    }\n  `,\n};\n\nexport const selectStyle = css`\n  min-width: 144px;\n  height: 100%;\n`;\n\nexport const iconMargin = css`\n  margin-right: ${spacing[3]}px;\n`;\n","import React from 'react';\n\nimport { css, cx } from '@leafygreen-ui/emotion';\nimport { usePrevious } from '@leafygreen-ui/hooks';\nimport { isComponentGlyph } from '@leafygreen-ui/icon';\nimport FileIcon from '@leafygreen-ui/icon/dist/File';\nimport { useDarkMode } from '@leafygreen-ui/leafygreen-provider';\nimport { isComponentType } from '@leafygreen-ui/lib';\nimport { palette } from '@leafygreen-ui/palette';\nimport { Option, Select } from '@leafygreen-ui/select';\n\nimport { CustomSelectMenuButton } from '../CustomSelectMenuButton';\nimport { LanguageOption, PopoverProps } from '../types';\n\nimport {\n  buttonModeStyle,\n  containerStyle,\n  iconMargin,\n  menuButtonStyle,\n  selectStyle,\n} from './LanguageSwitcher.styles';\n\nfunction isLeafyGreenIcon(element: React.ReactNode) {\n  if (isComponentGlyph(element) || isComponentType(element, 'Icon')) {\n    return true;\n  }\n\n  return false;\n}\n\ninterface Props extends PopoverProps {\n  language: LanguageOption;\n  languageOptions: Array<LanguageOption>;\n  onChange: (arg0: LanguageOption) => void;\n}\n\nfunction LanguageSwitcher({\n  language,\n  languageOptions,\n  onChange,\n  usePortal,\n  portalClassName,\n  portalContainer,\n  scrollContainer,\n  popoverZIndex,\n}: Props) {\n  const { theme, darkMode } = useDarkMode();\n  const previousLanguage = usePrevious(language);\n\n  const handleChange = (val: string) => {\n    if (val === '' && previousLanguage !== undefined) {\n      return onChange(previousLanguage);\n    }\n\n    const selectedOption = languageOptions.find(\n      option => option.displayName === val,\n    );\n\n    if (selectedOption !== undefined) {\n      onChange(selectedOption);\n    }\n  };\n\n  const iconStyle = cx(\n    iconMargin,\n    css`\n      color: ${darkMode ? palette.gray.light1 : palette.gray.base};\n    `,\n  );\n\n  // Placeholder for file icon\n  let renderedLogo = <FileIcon className={iconStyle} />;\n\n  if (language.image != null) {\n    if (isLeafyGreenIcon(language.image)) {\n      renderedLogo = React.cloneElement(language.image, {\n        className: iconStyle,\n      });\n    } else {\n      renderedLogo = React.cloneElement(language.image, {\n        className: iconMargin,\n      });\n    }\n  }\n\n  const popoverProps = {\n    popoverZIndex,\n    usePortal,\n    portalClassName,\n    portalContainer,\n    scrollContainer,\n  } as const;\n\n  return (\n    <div className={containerStyle}>\n      <Select\n        darkMode={darkMode}\n        onChange={handleChange}\n        aria-labelledby=\"Language Picker\"\n        value={language?.displayName}\n        className={selectStyle}\n        allowDeselect={false}\n        {...popoverProps}\n        __INTERNAL__menuButtonSlot__={CustomSelectMenuButton}\n        __INTERNAL__menuButtonSlotProps__={{\n          className: cx(menuButtonStyle, buttonModeStyle[theme]),\n          leftGlyph: renderedLogo,\n        }}\n      >\n        {languageOptions?.map(option => (\n          <Option key={option?.displayName} value={option?.displayName}>\n            {option?.displayName}\n          </Option>\n        ))}\n      </Select>\n    </div>\n  );\n}\n\nLanguageSwitcher.displayName = 'LanguageSwitcher';\n\nexport default LanguageSwitcher;\n","import { css, cx } from '@leafygreen-ui/emotion';\nimport { Theme } from '@leafygreen-ui/lib';\nimport { palette } from '@leafygreen-ui/palette';\nimport { spacing } from '@leafygreen-ui/tokens';\n\nexport const basePanelStyle = css`\n  display: flex;\n  align-items: center;\n  flex-shrink: 0;\n  gap: ${spacing[1]}px;\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n`;\n\nexport const basePanelThemeStyle: Record<Theme, string> = {\n  [Theme.Light]: css`\n    background-color: ${palette.white};\n  `,\n  [Theme.Dark]: css`\n    background-color: ${palette.gray.dark2};\n  `,\n};\n\nexport const sidePanelStyle = css`\n  flex-direction: column;\n  padding: 6px;\n  border-left: solid 1px;\n`;\n\nexport const sidePanelThemeStyles: Record<Theme, string> = {\n  [Theme.Light]: cx(\n    sidePanelStyle,\n    css`\n      border-color: ${palette.gray.light2};\n    `,\n  ),\n  [Theme.Dark]: cx(\n    sidePanelStyle,\n    css`\n      border-color: ${palette.gray.dark2};\n    `,\n  ),\n};\n\nexport const languageSwitcherPanelStyle = css`\n  flex-direction: row;\n  border-bottom: 1px solid;\n  justify-content: space-between;\n  padding: 0;\n  padding-right: 8px;\n  height: 40px; // 28px (icon) + 2 x 6px (focus shadow). Can't use padding b/c switcher\n`;\n\nexport const languageSwitcherPanelThemeStyles: Record<Theme, string> = {\n  [Theme.Light]: cx(\n    languageSwitcherPanelStyle,\n    css`\n      border-color: ${palette.gray.light2};\n    `,\n  ),\n  [Theme.Dark]: cx(\n    languageSwitcherPanelStyle,\n    css`\n      border-color: ${palette.gray.dark1};\n    `,\n  ),\n};\n","import React from 'react';\n\nimport { cx } from '@leafygreen-ui/emotion';\nimport { useDarkMode } from '@leafygreen-ui/leafygreen-provider';\n\nimport CopyButton from '../CopyButton/CopyButton';\nimport LanguageSwitcher from '../LanguageSwitcher/LanguageSwitcher';\nimport {\n  LanguageOption,\n  LanguageSwitcher as LanguageSwitcherProps,\n  PopoverProps,\n} from '../types';\n\nimport {\n  basePanelStyle,\n  basePanelThemeStyle,\n  languageSwitcherPanelThemeStyles,\n  sidePanelThemeStyles,\n} from './Panel.styles';\n\ntype PanelProps = Partial<Omit<LanguageSwitcherProps, 'language'>> & {\n  onCopy?: Function;\n  contents: string;\n  showCopyButton?: boolean;\n  language?: LanguageOption;\n  isMultiline?: boolean;\n  customActionButtons?: Array<React.ReactElement>;\n  showCustomActionButtons?: boolean;\n  className?: string;\n} & PopoverProps;\n\nfunction Panel({\n  language,\n  languageOptions,\n  contents,\n  onChange,\n  onCopy,\n  showCopyButton,\n  customActionButtons,\n  showCustomActionButtons,\n  usePortal,\n  portalClassName,\n  portalContainer,\n  scrollContainer,\n  popoverZIndex,\n  className,\n}: PanelProps) {\n  const { theme } = useDarkMode();\n\n  const popoverProps = {\n    popoverZIndex,\n    usePortal,\n    portalClassName,\n    portalContainer,\n    scrollContainer,\n  } as const;\n\n  return (\n    <div\n      className={cx(\n        basePanelStyle,\n        basePanelThemeStyle[theme],\n        {\n          [sidePanelThemeStyles[theme]]: !language,\n          [languageSwitcherPanelThemeStyles[theme]]: !!language,\n        },\n        className,\n      )}\n      data-testid=\"leafygreen-code-panel\"\n    >\n      {language !== undefined &&\n        languageOptions !== undefined &&\n        onChange !== undefined && (\n          <LanguageSwitcher\n            onChange={onChange}\n            language={language}\n            languageOptions={languageOptions}\n            {...popoverProps}\n          />\n        )}\n\n      {showCopyButton && (\n        <CopyButton\n          onCopy={onCopy}\n          contents={contents}\n          withLanguageSwitcher={!!language}\n        />\n      )}\n      {showCustomActionButtons && (\n        <>{customActionButtons?.map((action: React.ReactNode) => action)}</>\n      )}\n    </div>\n  );\n}\n\nPanel.displayName = 'Panel';\n\nexport default Panel;\n","import { injectGlobal } from '@leafygreen-ui/emotion';\nimport { Theme } from '@leafygreen-ui/lib';\nimport { palette } from '@leafygreen-ui/palette';\nimport { fontWeights } from '@leafygreen-ui/tokens';\n\ninterface Base16Palette {\n  0: string; // Background\n  1: string; // Borders / non-text graphical accents\n  2: string; // Comments, Doctags, Formulas\n  3: string; // Default Text\n  4: string; // Highlights\n  5: string; // Variables, XML Tags, Markup Link Text, Markup Lists, Diff Deleted\n  6: string; // Classes, Markup Bold, Search Text Background\n  7: string; // Strings, Inherited Class, Markup Code, Diff Inserted\n  8: string; // Support, Regular Expressions, Escape Characters, Markup Quotes\n  9: string; // Functions, Methods, Classes, Names, Sections, Literals\n  10: string; // Keywords, Storage, Selector, Markup Italic, Diff Changed\n}\n\nexport const variantColors: { readonly [K in Theme]: Base16Palette } = {\n  [Theme.Light]: {\n    0: palette.gray.light3,\n    1: palette.gray.light2,\n    2: palette.gray.dark2,\n    3: palette.black,\n    4: palette.white,\n    5: '#D83713',\n    6: '#956d00',\n    7: '#12824D',\n    8: '#007ab8',\n    9: '#016ee9',\n    10: '#CC3887',\n  },\n\n  [Theme.Dark]: {\n    0: palette.black,\n    1: palette.gray.dark2,\n    2: palette.gray.light1,\n    3: palette.gray.light3,\n    4: palette.gray.dark2,\n    5: '#FF6F44',\n    6: '#EDB210',\n    7: '#35DE7B',\n    8: '#a5e3ff',\n    9: '#2dc4ff',\n    10: '#FF7DC3',\n  },\n};\n\nconst getStyles = (theme: Theme): string => `\n  .lg-highlight-hljs-${theme} {\n    \n    .lg-highlight-keyword,\n    .lg-highlight-keyword.lg-highlight-function,\n    .lg-highlight-keyword.lg-highlight-class,\n    .lg-highlight-selector-tag,\n    .lg-highlight-selector-attr,\n    .lg-highlight-selector-pseudo,\n    .lg-highlight-selector-id,\n    .lg-highlight-selector-class {\n      color: ${variantColors[theme][10]};\n    }\n\n    .lg-highlight-regexp,\n    .lg-highlight-number,\n    .lg-highlight-literal,\n    .lg-highlight-function.lg-highlight-title {\n      color: ${variantColors[theme][9]};\n    }\n\n    .lg-highlight-quote,\n    .lg-highlight-section,\n    .lg-highlight-name {\n      color: ${variantColors[theme][8]};\n    }\n\n    .lg-highlight-string,\n    .lg-highlight-addition {\n      color: ${variantColors[theme][7]};\n    }\n\n    .lg-highlight-meta,\n    .lg-highlight-meta-string {\n      color: ${variantColors[theme][6]};\n    }\n\n    .lg-highlight-variable,\n    .lg-highlight-deletion,\n    .lg-highlight-symbol,\n    .lg-highlight-bullet,\n    .lg-highlight-meta,\n    .lg-highlight-link,\n    .lg-highlight-attr,\n    .lg-highlight-attribute,\n    .lg-highlight-language,\n    .lg-highlight-template-variable,\n    .lg-highlight-built_in,\n    .lg-highlight-type,\n    .lg-highlight-params {\n      color: ${variantColors[theme][5]}\n    }\n\n    .lg-highlight-title,\n    .lg-highlight-class.lg-highlight-title {\n      color: ${variantColors[theme][3]};\n    }\n\n    .lg-highlight-doctag,\n    .lg-highlight-formula {\n      color: ${variantColors[theme][3]};\n    }\n  \n    .lg-highlight-comment {\n      color: ${variantColors[theme][2]};\n      font-style: italic;\n    }\n  \n    .lg-highlight-string {\n      font-weight: 600;\n    }\n    \n    .lg-highlight-emphasis {\n      font-style: italic;\n    }\n  \n    .lg-highlight-strong {\n      font-weight: ${fontWeights.bold};\n    }\n  }\n`;\n\nexport function injectGlobalStyles() {\n  Object.values(Theme).forEach(theme => injectGlobal(getStyles(theme)));\n}\n","import bash from 'highlight.js/lib/languages/bash';\nimport c from 'highlight.js/lib/languages/c';\nimport cpp from 'highlight.js/lib/languages/cpp';\nimport csharp from 'highlight.js/lib/languages/csharp';\nimport dart from 'highlight.js/lib/languages/dart';\nimport diff from 'highlight.js/lib/languages/diff';\nimport go from 'highlight.js/lib/languages/go';\nimport http from 'highlight.js/lib/languages/http';\nimport ini from 'highlight.js/lib/languages/ini';\nimport java from 'highlight.js/lib/languages/java';\nimport javascript from 'highlight.js/lib/languages/javascript';\nimport json from 'highlight.js/lib/languages/json';\nimport kotlin from 'highlight.js/lib/languages/kotlin';\nimport objectivec from 'highlight.js/lib/languages/objectivec';\nimport perl from 'highlight.js/lib/languages/perl';\nimport php from 'highlight.js/lib/languages/php';\nimport properties from 'highlight.js/lib/languages/properties';\nimport python from 'highlight.js/lib/languages/python';\nimport ruby from 'highlight.js/lib/languages/ruby';\nimport rust from 'highlight.js/lib/languages/rust';\nimport scala from 'highlight.js/lib/languages/scala';\nimport shell from 'highlight.js/lib/languages/shell';\nimport sql from 'highlight.js/lib/languages/sql';\nimport swift from 'highlight.js/lib/languages/swift';\nimport typescript from 'highlight.js/lib/languages/typescript';\nimport xml from 'highlight.js/lib/languages/xml';\nimport yaml from 'highlight.js/lib/languages/yaml';\n\nexport const languageParsers = {\n  javascript,\n  typescript,\n  c,\n  cpp,\n  csharp,\n  go,\n  http,\n  ini,\n  java,\n  perl,\n  php,\n  properties,\n  python,\n  ruby,\n  rust,\n  scala,\n  swift,\n  kotlin,\n  objectivec,\n  dart,\n  bash,\n  shell,\n  sql,\n  yaml,\n  json,\n  diff,\n  xml,\n} as const;\n\nexport const SupportedLanguages = {\n  JavaScript: 'javascript',\n  JS: 'js', // Javascript alias\n  TypeScript: 'typescript',\n  TS: 'ts', // Typescript alias\n  C: 'c',\n  Cpp: 'cpp',\n  Csharp: 'csharp',\n  Cs: 'cs', // C# alias\n  Go: 'go',\n  Html: 'xml', // HTML alias\n  Http: 'http',\n  Ini: 'ini',\n  Java: 'java',\n  Perl: 'perl',\n  Php: 'php',\n  Properties: 'properties',\n  Python: 'python',\n  Ruby: 'ruby',\n  Rust: 'rust',\n  Scala: 'scala',\n  Swift: 'swift',\n  Kotlin: 'kotlin',\n  ObjectiveC: 'objectivec',\n  Dart: 'dart',\n  Bash: 'bash',\n  Shell: 'shell',\n  Sql: 'sql',\n  Yaml: 'yaml',\n  Json: 'json',\n  Graphql: 'graphql',\n  Diff: 'diff',\n  Xml: 'xml',\n} as const;\n\nexport type SupportedLanguages =\n  (typeof SupportedLanguages)[keyof typeof SupportedLanguages];\n","import React from 'react';\nimport flatMap from 'lodash/flatMap';\n\nimport { css, cx } from '@leafygreen-ui/emotion';\nimport { palette } from '@leafygreen-ui/palette';\nimport { spacing } from '@leafygreen-ui/tokens';\n\nimport {\n  LeafyGreenHighlightResult,\n  LeafyGreenHLJSPlugin,\n  TokenObject,\n} from '../highlight';\nimport { useSyntaxContext } from '../Syntax/SyntaxContext';\n\ninterface TokenProps {\n  kind?: string;\n  children: React.ReactNode;\n}\n\nexport function generateKindClassName(...kinds: Array<any>): string {\n  const prefix = 'lg-highlight-';\n  return kinds\n    .filter((str): str is string => isString(str) && str.length > 0)\n    .map(kind => {\n      // Sometimes, a kind will have run through this function before.\n      // This ensures we don't duplicate prefixes.\n      if (kind.startsWith(prefix)) {\n        return kind;\n      }\n\n      const classes = kind\n        .split('.')\n        .map(k => `${prefix}${k}`)\n        .join(' ');\n\n      return classes;\n    })\n    .join(' ');\n}\n\nfunction childrenAsKeywords(...children: Array<string>) {\n  const keywords = ['function', 'class'];\n  return children.filter(child => keywords.includes(child));\n}\n\nfunction Token({ kind, children }: TokenProps) {\n  return <span className={kind}>{children}</span>;\n}\n\ntype TreeItem =\n  | null\n  | undefined\n  | string\n  | Array<string | TokenObject>\n  | TokenObject;\n\nfunction isArray(item: any): item is Array<any> {\n  return item != null && item instanceof Array;\n}\n\nfunction isObject(item: any): item is object {\n  return item != null && typeof item === 'object' && !(item instanceof Array);\n}\n\nfunction isString(item: any): item is string {\n  return item != null && typeof item === 'string';\n}\n\nfunction isNumber(item: any): item is number {\n  return item != null && typeof item === 'number';\n}\n\nfunction isTokenObject(item: any): item is TokenObject {\n  if (item == null || typeof item !== 'object') {\n    return false;\n  }\n\n  return typeof item.kind === 'string' && item.children instanceof Array;\n}\n\nexport function processToken(token: TreeItem, key?: number): React.ReactNode {\n  if (token == null) {\n    return null;\n  }\n\n  if (isString(token)) {\n    return token;\n  }\n\n  if (isArray(token)) {\n    return token.map(processToken);\n  }\n\n  if (isObject(token)) {\n    return (\n      <Token key={key} kind={token.kind}>\n        {processToken(token.children)}\n      </Token>\n    );\n  }\n\n  return token;\n}\n\nconst cellStyle = css`\n  border-spacing: 0;\n  vertical-align: top;\n  padding: 0 ${spacing[3]}px;\n`;\n\nfunction getHighlightedRowStyle(darkMode: boolean) {\n  let backgroundColor: string, backgroundImage: string, borderColor: string;\n\n  if (darkMode) {\n    backgroundColor = 'transparent';\n    backgroundImage = `linear-gradient(90deg, ${palette.gray.dark3}, ${palette.black})`;\n    borderColor = palette.gray.dark3;\n  } else {\n    backgroundColor = palette.yellow.light3;\n    backgroundImage = 'none';\n    borderColor = palette.yellow.light2;\n  }\n\n  return css`\n    background-color: ${backgroundColor};\n    background-image: ${backgroundImage};\n    // Fixes an issue in Safari where the gradient applied to the table row would be applied\n    // to each cell in the row instead of being continuous across cells.\n    background-attachment: fixed;\n\n    // Selects all children of a highlighted row, and adds a border top\n    & > td {\n      border-top: 1px solid ${borderColor};\n    }\n\n    // Selects following rows after a highlighted row, and adds a border top\n    // We don't add border bottoms here to support consecutive highlighted rows.\n    & + tr > td {\n      border-top: 1px solid ${borderColor};\n    }\n\n    // Remove borders between consecutive highlighted rows\n    & + & > td {\n      border-top: 0;\n    }\n\n    // If the highlighted row is the last child, then we add a border bottom\n    &:last-child > td {\n      border-bottom: 1px solid ${borderColor};\n    }\n  `;\n}\n\ninterface LineTableRowProps {\n  lineNumber?: number;\n  children: React.ReactNode;\n  highlighted?: boolean;\n  darkMode: boolean;\n}\n\nexport function LineTableRow({\n  lineNumber,\n  highlighted,\n  darkMode,\n  children,\n}: LineTableRowProps) {\n  const numberColor = darkMode ? palette.gray.light1 : palette.gray.dark1;\n  const highlightedNumberColor = darkMode\n    ? palette.gray.light3\n    : palette.yellow.dark2;\n\n  return (\n    <tr className={cx({ [getHighlightedRowStyle(darkMode)]: highlighted })}>\n      {lineNumber && (\n        <td\n          className={cx(\n            cellStyle,\n            css`\n              user-select: none;\n              text-align: right;\n              padding-left: ${spacing[3] - 1}px;\n              padding-right: 0;\n              color: ${highlighted ? highlightedNumberColor : numberColor};\n            `,\n          )}\n        >\n          {lineNumber}\n        </td>\n      )}\n\n      <td className={cellStyle}>{children}</td>\n    </tr>\n  );\n}\n\ninterface FlatTokenObject {\n  kind: string;\n  children: Array<string>;\n}\n\n// Check if object is a TokenObject which has an array with a single string element within it.\nfunction isFlattenedTokenObject(obj: TokenObject): obj is FlatTokenObject {\n  // default to an empty object in the off-chance \"obj\" is null or undefined.\n  const { children } = obj ?? {};\n\n  if (isArray(children) && children.length === 1 && isString(children[0])) {\n    return true;\n  }\n\n  return false;\n}\n\n// If an array of tokens contains an object with more than one children, this function will flatten that tree recursively.\nexport function flattenNestedTree(\n  children: TokenObject['children'] | TokenObject,\n  kind?: string,\n): Array<string | FlatTokenObject> {\n  if (typeof children === 'string') {\n    return children;\n  }\n\n  if (isTokenObject(children)) {\n    return flattenNestedTree(children.children, kind);\n  }\n\n  // Generate a flat map function with a closure around parent's kind\n  function flatMapTreeWithKinds(...parentKinds: Array<string | undefined>) {\n    parentKinds = parentKinds.filter(\n      (str): str is string => isString(str) && str.length > 0,\n    );\n    return function (\n      entity: string | TokenObject,\n    ): string | FlatTokenObject | Array<string | FlatTokenObject> {\n      if (isString(entity)) {\n        return parentKinds.length > 0\n          ? {\n              kind: generateKindClassName(\n                kind,\n                ...parentKinds,\n                ...childrenAsKeywords(entity),\n              ),\n              children: [entity],\n            }\n          : entity; // entity is basic text\n      }\n\n      // If this is a nested entity, then flat map it's children\n      if ((entity?.children?.length ?? 0) >= 1) {\n        // Generate a new flat map function with this entity's kind\n        return flatMap(\n          entity.children,\n          flatMapTreeWithKinds(kind, entity.kind, ...parentKinds),\n        );\n      }\n\n      if (isFlattenedTokenObject(entity)) {\n        return {\n          kind: generateKindClassName(\n            kind,\n            entity.kind,\n            ...parentKinds,\n            ...childrenAsKeywords(...entity.children),\n          ),\n          children: entity.children,\n        };\n      }\n\n      return entity as FlatTokenObject;\n    };\n  }\n\n  return flatMap(children, flatMapTreeWithKinds(kind));\n}\n\nfunction containsLineBreak(token: TreeItem): boolean {\n  if (isArray(token)) {\n    return token.some(containsLineBreak);\n  }\n\n  if (isString(token)) {\n    return token.includes('\\n');\n  }\n\n  if (isObject(token)) {\n    return (\n      token.children?.includes('\\n') ||\n      (isString(token.children?.[0]) && token.children[0].includes('\\n'))\n    );\n  }\n\n  return false;\n}\n\ntype LineDefinition = Array<Array<string | FlatTokenObject>>;\n\nexport function treeToLines(\n  children: Array<string | TokenObject>,\n): LineDefinition {\n  const lines: LineDefinition = [];\n  let currentLineIndex = 0;\n\n  // Create a new line, if no lines exist yet\n  if (lines[currentLineIndex] == null) {\n    lines[currentLineIndex] = [];\n  }\n\n  const createNewLine = () => {\n    currentLineIndex++;\n    lines[currentLineIndex] = [];\n  };\n\n  flattenNestedTree(children).forEach(child => {\n    // If the current element includes a line break, we need to handle it differently\n    if (containsLineBreak(child)) {\n      if (isString(child)) {\n        child.split('\\n').forEach((fragment, i) => {\n          if (i > 0) {\n            createNewLine();\n          }\n\n          // Empty new lines should be represented as an empty array\n          if (fragment) {\n            lines[currentLineIndex].push(fragment);\n          }\n        });\n      } else {\n        const tokenString = child.children[0];\n\n        tokenString.split('\\n').forEach((fragment, i) => {\n          if (i > 0) {\n            createNewLine();\n          }\n\n          lines[currentLineIndex].push({\n            kind: child.kind,\n            children: [fragment],\n          });\n        });\n      }\n    } else if (child && (isString(child) || isFlattenedTokenObject(child))) {\n      lines[currentLineIndex].push(child);\n    }\n  });\n\n  return lines;\n}\n\ninterface TableContentProps {\n  lines: LineDefinition;\n}\n\nexport function TableContent({ lines }: TableContentProps) {\n  const { highlightLines, showLineNumbers, darkMode, lineNumberStart } =\n    useSyntaxContext();\n  const trimmedLines = [...lines];\n\n  // Strip empty lines from the beginning of code blocks\n  while (trimmedLines[0]?.length === 0) {\n    trimmedLines.shift();\n  }\n\n  // Strip empty lines from the end of code blocks\n  while (trimmedLines[trimmedLines.length - 1]?.length === 0) {\n    trimmedLines.pop();\n  }\n\n  const lineShouldHighlight = (line: number) => {\n    return highlightLines.some(def => {\n      if (isNumber(def)) {\n        return line === def;\n      }\n\n      if (isArray(def)) {\n        const sortedArr = [...def].sort((a, b) => a - b);\n\n        return line >= sortedArr[0] && line <= sortedArr[1];\n      }\n\n      return false;\n    });\n  };\n\n  return (\n    <>\n      {trimmedLines.map((line, index) => {\n        const currentLineNumber = index + (lineNumberStart ?? 1);\n        const highlightLine = lineShouldHighlight(currentLineNumber);\n\n        let displayLineNumber;\n\n        if (showLineNumbers) {\n          displayLineNumber = currentLineNumber;\n        }\n\n        const processedLine = line?.length ? (\n          line.map(processToken)\n        ) : (\n          // We create placeholder content when a line break appears to preserve the line break's height\n          // It needs to be inline-block for the table row to not collapse.\n          <div\n            className={css`\n              display: inline-block;\n            `}\n          />\n        );\n\n        return (\n          <LineTableRow\n            key={currentLineNumber}\n            lineNumber={displayLineNumber}\n            darkMode={darkMode}\n            highlighted={highlightLine}\n          >\n            {processedLine}\n          </LineTableRow>\n        );\n      })}\n    </>\n  );\n}\n\nconst plugin: LeafyGreenHLJSPlugin = {\n  'after:highlight': function (result: LeafyGreenHighlightResult) {\n    const { rootNode } = result._emitter;\n    // console.log(JSON.stringify(rootNode.children, null, 2));\n    result.react = <TableContent lines={treeToLines(rootNode.children)} />;\n  },\n};\n\nexport default plugin;\n","import { createContext, useContext } from 'react';\n\nimport { LineHighlightingDefinition } from '../types';\n\ninterface SyntaxContext {\n  highlightLines: LineHighlightingDefinition;\n  showLineNumbers?: boolean;\n  darkMode: boolean;\n  lineNumberStart?: number;\n}\n\nexport const SyntaxContext = createContext<SyntaxContext>({\n  highlightLines: [],\n  darkMode: false,\n});\n\nexport function useSyntaxContext() {\n  return useContext(SyntaxContext);\n}\n","import React, { useMemo } from 'react';\nimport { HLJSOptions, HLJSPlugin } from 'highlight.js';\nimport hljs from 'highlight.js/lib/core'; // Skip highlight's auto-registering\nimport hljsDefineGraphQL from 'highlightjs-graphql';\nimport PropTypes from 'prop-types';\n\nimport { css, cx } from '@leafygreen-ui/emotion';\nimport {\n  useBaseFontSize,\n  useDarkMode,\n} from '@leafygreen-ui/leafygreen-provider';\nimport { fontFamilies, typeScales } from '@leafygreen-ui/tokens';\n\nimport { injectGlobalStyles } from '../globalStyles';\nimport { LeafyGreenHighlightResult } from '../highlight';\nimport { languageParsers, SupportedLanguages } from '../languages';\nimport renderingPlugin, {\n  TableContent,\n} from '../renderingPlugin/renderingPlugin';\nimport { SyntaxContext } from '../Syntax/SyntaxContext';\nimport { Language, SyntaxProps } from '../types';\n\ntype FilteredSupportedLanguagesEnum = Omit<\n  typeof SupportedLanguages,\n  // Aliases for languages\n  'Cs' | 'JS' | 'TS'\n>;\ntype FilteredSupportedLanguages =\n  FilteredSupportedLanguagesEnum[keyof FilteredSupportedLanguagesEnum];\n\nfunction filterSupportedLanguages(\n  language: SupportedLanguages,\n): language is FilteredSupportedLanguages {\n  return language !== 'cs' && language !== 'js' && language !== 'ts';\n}\n\nlet syntaxHighlightingInitialized = false;\n\nfunction initializeSyntaxHighlighting() {\n  syntaxHighlightingInitialized = true;\n\n  injectGlobalStyles();\n\n  // We filter out 'cs' here because it's redundant with 'csharp' and 'js' because it's redundant with 'javascript'\n  const SupportedLanguagesList = Object.values(SupportedLanguages).filter(\n    filterSupportedLanguages,\n  );\n\n  SupportedLanguagesList.forEach(language => {\n    if (language === 'graphql') {\n      hljsDefineGraphQL(hljs);\n    } else {\n      hljs.registerLanguage(language, languageParsers[language]);\n    }\n  });\n\n  hljs.configure({\n    languages: SupportedLanguagesList,\n    tabReplace: '  ',\n  } as Partial<HLJSOptions>);\n\n  hljs.addPlugin(renderingPlugin as HLJSPlugin);\n}\n\nconst codeStyles = css`\n  color: inherit;\n  font-family: ${fontFamilies.code};\n`;\n\n/**\n * @internal\n */\nfunction Syntax({\n  children,\n  language,\n  showLineNumbers = false,\n  lineNumberStart,\n  highlightLines = [],\n  className,\n  ...rest\n}: SyntaxProps) {\n  if (!syntaxHighlightingInitialized) {\n    initializeSyntaxHighlighting();\n  }\n\n  const highlightedContent: LeafyGreenHighlightResult | null = useMemo(() => {\n    if (language === Language.None) {\n      return null;\n    }\n\n    return hljs.highlight(children, {\n      language,\n      ignoreIllegals: true,\n    }) as LeafyGreenHighlightResult;\n  }, [language, children]);\n\n  const content =\n    highlightedContent === null ? (\n      // We create a similar data structure to the rendering plugin so that we can generate\n      // a table that's identical when the plugin isn't being used.\n      <TableContent\n        lines={children.split('\\n').map(item => (item ? [item] : []))}\n      />\n    ) : (\n      highlightedContent.react\n    );\n\n  const { theme, darkMode } = useDarkMode();\n\n  const baseFontSize = useBaseFontSize();\n  // TODO: remove 14 check when useBaseFontSize is updated\n  const typeScale = baseFontSize === 14 ? typeScales.code1 : typeScales.code2;\n  const codeFontStyles = css`\n    font-size: ${typeScale.fontSize}px;\n    line-height: ${typeScale.lineHeight}px;\n  `;\n\n  return (\n    <SyntaxContext.Provider\n      value={{\n        highlightLines,\n        showLineNumbers,\n        lineNumberStart,\n        darkMode,\n      }}\n    >\n      <code\n        {...rest}\n        className={cx(\n          `lg-highlight-hljs-${theme}`,\n          codeStyles,\n          codeFontStyles,\n          language,\n          className,\n        )}\n      >\n        <table\n          className={css`\n            border-spacing: 0;\n          `}\n        >\n          <tbody>{content}</tbody>\n        </table>\n      </code>\n    </SyntaxContext.Provider>\n  );\n}\n\nSyntax.displayName = 'Syntax';\n\nSyntax.propTypes = {\n  children: PropTypes.string.isRequired,\n  language: PropTypes.oneOf(Object.values(Language)),\n  className: PropTypes.string,\n  darkMode: PropTypes.bool,\n  showLineNumbers: PropTypes.bool,\n  lineNumberStart: PropTypes.number,\n  highlightLines: PropTypes.arrayOf(\n    PropTypes.oneOfType([\n      PropTypes.arrayOf(PropTypes.number),\n      PropTypes.number,\n    ]),\n  ),\n};\n\nexport default Syntax;\n","import { HTMLElementProps } from '@leafygreen-ui/lib';\n\nimport { SupportedLanguages } from './languages';\n\nexport const Mode = {\n  Light: 'light',\n  Dark: 'dark',\n} as const;\n\nexport type Mode = (typeof Mode)[keyof typeof Mode];\n\nexport const Language = {\n  ...SupportedLanguages,\n  None: 'none',\n} as const;\n\nexport type Language = (typeof Language)[keyof typeof Language];\n\nexport type LineHighlightingDefinition = ReadonlyArray<\n  number | readonly [number, number]\n>;\n\nexport interface SyntaxProps extends HTMLElementProps<'code'> {\n  /**\n   * The children to render inside Code. This is usually going to be a formatted code block or line.\n   * @required\n   */\n  children: string;\n\n  /**\n   * The language to highlight the syntax of.\n   */\n  language: Language;\n\n  /**\n   * Shows line numbers. This is specifically used for the Code component implementation.\n   *\n   * default: `false`\n   */\n  showLineNumbers?: boolean;\n\n  /**\n   * Specifies the number by which to start line numbering.\n   *\n   * default: `1`\n   */\n  lineNumberStart?: number;\n\n  /**\n   * An array of lines to highlight. The array can only contain numbers corresponding to the line numbers to highlight, and / or tuples representing a range (e.g. `[6, 10]`);\n   */\n  highlightLines?: LineHighlightingDefinition;\n}\n\nexport interface PopoverProps {\n  /**\n   * Specifies that the popover content should be rendered at the end of the DOM,\n   * rather than in the DOM tree.\n   *\n   * default: `true`\n   */\n  usePortal?: boolean;\n\n  /**\n   * When usePortal is `true`, specifies a class name to apply to the root element of the portal.\n   */\n  portalClassName?: string;\n\n  /**\n   * When usePortal is `true`, specifies an element to portal within. The default behavior is to generate a div at the end of the document to render within.\n   */\n  portalContainer?: HTMLElement | null;\n\n  /**\n   * When usePortal is `true`, specifies the scrollable element to position relative to.\n   */\n  scrollContainer?: HTMLElement | null;\n\n  /**\n   * Number that controls the z-index of the popover element directly.\n   */\n  popoverZIndex?: number;\n}\n\nexport type CodeProps = Omit<\n  SyntaxProps,\n  'onCopy' | 'language' | 'onChange'\n> & {\n  /**\n   * Shows window chrome for code block;\n   *\n   * default: `false`\n   */\n  showWindowChrome?: boolean;\n\n  /**\n   * Renders a file name or other descriptor for a block of code\n   */\n  chromeTitle?: string;\n\n  /**\n   * When true, allows the code block to be copied to the user's clipboard by clicking the rendered copy button.\n   *\n   * default: `true`\n   */\n  copyable?: boolean;\n\n  /**\n   * Callback fired when Code is copied via the copy button.\n   *\n   */\n  onCopy?: Function;\n\n  /**\n   * Custom action buttons. Should be an array of `IconButton`.\n   *\n   * @type <IconButton />[]\n   */\n  customActionButtons?: Array<React.ReactElement>;\n\n  /**\n   * When true, custom action buttons will be shown.\n   *\n   */\n  showCustomActionButtons?: boolean;\n\n  /**\n   * Determines whether or not the syntax will be rendered in dark mode.\n   *\n   * @default `false`\n   */\n  darkMode?: boolean;\n} & (\n    | {\n        /**\n         * The language to format the code. See {@link https://github.com/mongodb/leafygreen-ui/blob/main/packages/code/src/languages.ts | SupportedLanguages}.\n         */\n        language: Language;\n        languageOptions?: undefined;\n        onChange?: undefined;\n      }\n    | {\n        /**\n         * The `displayName` of the selected `languageOption`\n         */\n        language: LanguageOption['displayName'];\n        /**\n         * An array of `LanguageOptions` to select from. Enables the Language switcher.\n         */\n        languageOptions: Array<LanguageOption>;\n        /**\n         * Callback fired when the language option changes.\n         */\n        onChange: (arg0: LanguageOption) => void;\n      }\n  ) &\n  PopoverProps;\n\nexport interface LanguageOption {\n  displayName: string;\n  language: Language;\n  image?: React.ReactElement;\n}\n\nexport interface LanguageSwitcher extends PopoverProps {\n  onChange: (arg0: LanguageOption) => void;\n  language: LanguageOption['displayName'];\n  languageOptions: Array<LanguageOption>;\n}\n","import { css } from '@leafygreen-ui/emotion';\nimport { Theme } from '@leafygreen-ui/lib';\nimport { palette } from '@leafygreen-ui/palette';\nimport { fontFamilies, typeScales } from '@leafygreen-ui/tokens';\n\nimport { variantColors } from '../globalStyles';\n\nexport const windowChromeHeight = 28;\nconst controlSize = 12;\nconst controlSpacing = 8;\nconst borderRadius = 4;\n\nexport const windowChromeStyle = css`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: ${windowChromeHeight}px;\n  padding-left: ${controlSize}px;\n  padding-right: ${controlSize}px;\n  border-radius: ${borderRadius}px ${borderRadius}px 0 0;\n  font-family: ${fontFamilies.default};\n`;\n\nexport const windowChromeThemeStyles: Record<Theme, string> = {\n  [Theme.Light]: css`\n    color: ${palette.gray.dark2};\n    background-color: ${variantColors.light[1]};\n  `,\n  [Theme.Dark]: css`\n    color: ${palette.gray.light1};\n    background-color: ${variantColors.dark[1]};\n  `,\n};\n\nexport const textStyle = css`\n  padding-left: ${controlSpacing}px;\n  padding-right: ${controlSpacing}px;\n  font-size: ${typeScales.body1.fontSize}px;\n`;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { cx } from '@leafygreen-ui/emotion';\nimport { useDarkMode } from '@leafygreen-ui/leafygreen-provider';\n\nimport {\n  textStyle,\n  windowChromeStyle,\n  windowChromeThemeStyles,\n} from './WindowChrome.styles';\n\ninterface WindowChromeProps {\n  chromeTitle?: string;\n}\n\nfunction WindowChrome({ chromeTitle = '' }: WindowChromeProps) {\n  const { theme } = useDarkMode();\n\n  return (\n    <div className={cx(windowChromeStyle, windowChromeThemeStyles[theme])}>\n      <div className={textStyle}>{chromeTitle}</div>\n    </div>\n  );\n}\n\nWindowChrome.displayName = 'WindowChrome';\n\nWindowChrome.propTypes = {\n  darkMode: PropTypes.bool,\n  chromeTitle: PropTypes.string,\n};\n\nexport default WindowChrome;\n","export const ScrollState = {\n  None: 'none',\n  Left: 'left',\n  Right: 'right',\n  Both: 'both',\n} as const;\n\nexport type ScrollState = (typeof ScrollState)[keyof typeof ScrollState];\n\nexport type DetailedElementProps<T> = React.DetailedHTMLProps<\n  React.HTMLAttributes<T>,\n  T\n>;\n","import facepaint from 'facepaint';\nimport { transparentize } from 'polished';\n\nimport { css } from '@leafygreen-ui/emotion';\nimport { Theme } from '@leafygreen-ui/lib';\nimport { palette } from '@leafygreen-ui/palette';\nimport { spacing, transitionDuration } from '@leafygreen-ui/tokens';\n\nimport { variantColors } from '../globalStyles';\n\nimport { ScrollState } from './Code.types';\n\n// We use max-device-width to select specifically for iOS devices\nconst mq = facepaint([\n  `@media only screen and (max-device-width: 812px) and (-webkit-min-device-pixel-ratio: 2)`,\n  `@media only screen and (min-device-width: 813px) and (-webkit-min-device-pixel-ratio: 2)`,\n]);\n\nconst singleLineComponentHeight = 36;\nconst lineHeight = 24;\n\nexport const wrapperStyle: Record<Theme, string> = {\n  [Theme.Light]: css`\n    border: 1px solid ${variantColors[Theme.Light][1]};\n    border-radius: 12px;\n    overflow: hidden;\n  `,\n  [Theme.Dark]: css`\n    border: 1px solid ${variantColors[Theme.Dark][1]};\n    border-radius: 12px;\n    overflow: hidden;\n  `,\n};\n\nexport const contentWrapperStyles = css`\n  position: relative;\n  display: grid;\n  grid-template-areas: 'code panel';\n  grid-template-columns: auto 38px;\n  border-radius: inherit;\n  z-index: 0; // new stacking context\n`;\n\nexport const contentWrapperStylesNoPanel = css`\n  // No panel, all code\n  grid-template-areas: 'code code';\n`;\n\nexport const contentWrapperStyleWithPicker = css`\n  grid-template-areas: 'panel' 'code';\n  grid-template-columns: unset;\n`;\n\nexport const codeWrapperStyle = css`\n  grid-area: code;\n  overflow-x: auto;\n  // Many applications have global styles that are adding a border and border radius to this element.\n  border-radius: inherit;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border: 0;\n  // We apply left / right padding in Syntax to support line highlighting\n  padding-top: ${spacing[2]}px;\n  padding-bottom: ${spacing[2]}px;\n  margin: 0;\n  position: relative;\n  transition: box-shadow ${transitionDuration.faster}ms ease-in-out;\n\n  ${mq({\n    // Fixes annoying issue where font size is overridden in mobile Safari to be 20px.\n    // Ideally, we wouldn't need to set the text to wrap, but from what I can tell, this is the one possible solution to the problem.\n    whiteSpace: ['pre', 'pre-wrap', 'pre'],\n  })}\n\n  &:focus-visible {\n    outline: none;\n    box-shadow: 0 0 0 2px ${palette.blue.light1} inset;\n  }\n`;\n\nexport const codeWrapperStyleNoPanel = css`\n  border-left: 0;\n  border-radius: inherit;\n  border-top-right-radius: 0;\n  border-top-left-radius: 0;\n`;\nexport const codeWrapperStyleWithLanguagePicker = css`\n  border-left: 0;\n  border-radius: inherit;\n  border-top-right-radius: 0;\n  border-top-left-radius: 0;\n`;\n\nexport const singleLineCodeWrapperStyle = css`\n  display: flex;\n  align-items: center;\n  padding-top: ${(singleLineComponentHeight - lineHeight) / 2}px;\n  padding-bottom: ${(singleLineComponentHeight - lineHeight) / 2}px;\n`;\n\nexport const panelStyles = css`\n  z-index: 2; // Above the shadows\n  grid-area: panel;\n`;\n\nexport function getCodeWrapperVariantStyle(theme: Theme): string {\n  const colors = variantColors[theme];\n\n  return css`\n    background-color: ${colors[0]};\n    color: ${colors[3]};\n  `;\n}\n\nexport const baseScrollShadowStyles = css`\n  &:before,\n  &:after {\n    content: '';\n    display: block;\n    position: absolute;\n    z-index: 1; // above the code\n    top: 0;\n    height: 100%;\n    width: 40px;\n    border-radius: 40%;\n    box-shadow: unset;\n    transition: box-shadow ${transitionDuration.faster}ms ease-in-out;\n  }\n  &:before {\n    grid-column: 1;\n    left: -40px;\n  }\n  &:after {\n    grid-column: 2; // Placed either under Panel, or on the right edge\n  }\n`;\n\nexport const scrollShadowStylesNoPanel = css`\n  &:after {\n    grid-column: -1; // Placed on the right edge\n  }\n`;\n\nexport const scrollShadowStylesWithPicker = css`\n  &:before,\n  &:after {\n    grid-row: 2; // Placed on the top under the Picker Panel\n  }\n`;\n\nexport function getScrollShadow(\n  scrollState: ScrollState,\n  theme: Theme,\n): string {\n  const dropShadowBefore =\n    theme === Theme.Light\n      ? `1px 0 10px 0 ${transparentize(0.75, 'black')}`\n      : `15px 0px 15px 0 ${transparentize(0.7, 'black')}`;\n\n  const dropShadowAfter =\n    theme === Theme.Light\n      ? `-1px 0px 10px ${transparentize(0.75, 'black')}`\n      : `-15px 0px 15px 0 ${transparentize(0.7, 'black')}`;\n\n  return css`\n    &:before {\n      ${(scrollState === ScrollState.Both ||\n        scrollState === ScrollState.Left) &&\n      css`\n        box-shadow: ${dropShadowBefore};\n      `};\n    }\n    &:after {\n      ${(scrollState === ScrollState.Both ||\n        scrollState === ScrollState.Right) &&\n      `\n        box-shadow: ${dropShadowAfter};\n      `};\n    }\n  `;\n}\n","import React, { useEffect, useMemo, useRef, useState } from 'react';\nimport ClipboardJS from 'clipboard';\nimport debounce from 'lodash/debounce';\nimport PropTypes from 'prop-types';\n\nimport { cx } from '@leafygreen-ui/emotion';\nimport { useIsomorphicLayoutEffect } from '@leafygreen-ui/hooks';\nimport LeafyGreenProvider, {\n  useDarkMode,\n} from '@leafygreen-ui/leafygreen-provider';\nimport { isComponentType } from '@leafygreen-ui/lib';\n\nimport { Panel } from '../Panel';\nimport { Syntax } from '../Syntax';\nimport { CodeProps, Language } from '../types';\nimport { WindowChrome } from '../WindowChrome';\n\nimport {\n  baseScrollShadowStyles,\n  codeWrapperStyle,\n  codeWrapperStyleNoPanel,\n  codeWrapperStyleWithLanguagePicker,\n  contentWrapperStyles,\n  contentWrapperStylesNoPanel,\n  contentWrapperStyleWithPicker,\n  getCodeWrapperVariantStyle,\n  getScrollShadow,\n  panelStyles,\n  scrollShadowStylesNoPanel,\n  scrollShadowStylesWithPicker,\n  singleLineCodeWrapperStyle,\n  wrapperStyle,\n} from './Code.styles';\nimport { DetailedElementProps, ScrollState } from './Code.types';\n\nexport function hasMultipleLines(string: string): boolean {\n  return string.trim().includes('\\n');\n}\n\n/**\n *\n * React Component that outputs single-line and multi-line code blocks.\n *\n * @param props.children The string to be formatted.\n * @param props.className An additional CSS class added to the root element of Code.\n * @param props.language The language used for syntax highlighting.\n * @param props.darkMode Determines if the code block will be rendered in dark mode. Default: `false`\n * @param props.showLineNumbers When true, shows line numbers in preformatted code blocks. Default: `false`\n * @param props.lineNumberStart Specifies the numbering of the first line in the block. Default: 1\n * @param props.copyable When true, allows the code block to be copied to the user's clipboard. Default: `true`\n * @param props.onCopy Callback fired when Code is copied\n */\nfunction Code({\n  children = '',\n  className,\n  language: languageProp,\n  darkMode: darkModeProp,\n  showLineNumbers = false,\n  lineNumberStart = 1,\n  showWindowChrome = false,\n  chromeTitle = '',\n  copyable = true,\n  onCopy,\n  highlightLines = [],\n  languageOptions,\n  onChange,\n  customActionButtons = [],\n  showCustomActionButtons = false,\n  usePortal = true,\n  portalClassName,\n  portalContainer,\n  scrollContainer,\n  popoverZIndex,\n  ...rest\n}: CodeProps) {\n  const scrollableElementRef = useRef<HTMLPreElement>(null);\n  const [scrollState, setScrollState] = useState<ScrollState>(ScrollState.None);\n  const [showCopyBar, setShowCopyBar] = useState(false);\n  const isMultiline = useMemo(() => hasMultipleLines(children), [children]);\n  const { theme, darkMode } = useDarkMode(darkModeProp);\n\n  const filteredCustomActionIconButtons = customActionButtons.filter(\n    (item: React.ReactElement) => isComponentType(item, 'IconButton') === true,\n  );\n\n  const showCustomActionsInPanel =\n    showCustomActionButtons && !!filteredCustomActionIconButtons.length;\n\n  const currentLanguage = languageOptions?.find(\n    option => option.displayName === languageProp,\n  );\n\n  const showPanel =\n    !showWindowChrome &&\n    (copyable || !!currentLanguage || showCustomActionsInPanel);\n\n  const highlightLanguage = currentLanguage\n    ? currentLanguage.language\n    : languageProp;\n\n  const showLanguagePicker = !!currentLanguage;\n\n  useEffect(() => {\n    setShowCopyBar(copyable && ClipboardJS.isSupported());\n  }, [copyable, showWindowChrome]);\n\n  useIsomorphicLayoutEffect(() => {\n    const scrollableElement = scrollableElementRef.current;\n\n    if (\n      scrollableElement != null &&\n      scrollableElement.scrollWidth > scrollableElement.clientWidth\n    ) {\n      setScrollState(ScrollState.Right);\n    }\n  }, []);\n\n  const renderedSyntaxComponent = (\n    <Syntax\n      showLineNumbers={showLineNumbers}\n      lineNumberStart={lineNumberStart}\n      language={highlightLanguage as Language}\n      highlightLines={highlightLines}\n    >\n      {children}\n    </Syntax>\n  );\n\n  function handleScroll(e: React.UIEvent) {\n    const { scrollWidth, clientWidth: elementWidth } = e.target as HTMLElement;\n    const isScrollable = scrollWidth > elementWidth;\n\n    if (isScrollable) {\n      const scrollPosition = (e.target as HTMLElement).scrollLeft;\n      const maxPosition = scrollWidth - elementWidth;\n\n      if (scrollPosition > 0 && scrollPosition < maxPosition) {\n        setScrollState(ScrollState.Both);\n      } else if (scrollPosition > 0) {\n        setScrollState(ScrollState.Left);\n      } else if (scrollPosition < maxPosition) {\n        setScrollState(ScrollState.Right);\n      }\n    }\n  }\n\n  const debounceScroll = debounce(handleScroll, 50, { leading: true });\n\n  const onScroll: React.UIEventHandler<HTMLDivElement | HTMLPreElement> = e => {\n    e.persist();\n    debounceScroll(e);\n  };\n\n  const popoverProps = {\n    popoverZIndex,\n    ...(usePortal\n      ? {\n          usePortal,\n          portalClassName,\n          portalContainer,\n          scrollContainer,\n        }\n      : { usePortal }),\n  } as const;\n\n  return (\n    <LeafyGreenProvider darkMode={darkMode}>\n      <div className={wrapperStyle[theme]}>\n        {showWindowChrome && <WindowChrome chromeTitle={chromeTitle} />}\n\n        <div\n          className={cx(\n            contentWrapperStyles,\n            baseScrollShadowStyles,\n            getScrollShadow(scrollState, theme),\n            {\n              [contentWrapperStyleWithPicker]: showLanguagePicker,\n              [scrollShadowStylesWithPicker]: showLanguagePicker,\n              [contentWrapperStylesNoPanel]: !showPanel,\n              [scrollShadowStylesNoPanel]: !showPanel,\n            },\n          )}\n        >\n          <pre\n            {...(rest as DetailedElementProps<HTMLPreElement>)}\n            className={cx(\n              codeWrapperStyle,\n              getCodeWrapperVariantStyle(theme),\n              {\n                [codeWrapperStyleWithLanguagePicker]: showLanguagePicker,\n                [codeWrapperStyleNoPanel]: !showPanel,\n                [singleLineCodeWrapperStyle]: !isMultiline,\n              },\n              className,\n            )}\n            onScroll={onScroll}\n            ref={scrollableElementRef}\n            // Adds to Tab order when content is scrollable, otherwise overflowing content is inaccessible via keyboard navigation\n            // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n            tabIndex={scrollState !== ScrollState.None ? 0 : -1}\n          >\n            {renderedSyntaxComponent}\n          </pre>\n\n          {/* Can make this a more robust check in the future */}\n          {/* Right now the panel will only be rendered with copyable or a language switcher */}\n          {showPanel && (\n            <Panel\n              className={cx(panelStyles)}\n              language={currentLanguage}\n              languageOptions={languageOptions}\n              onChange={onChange}\n              contents={children}\n              onCopy={onCopy}\n              showCopyButton={showCopyBar}\n              isMultiline={isMultiline}\n              customActionButtons={filteredCustomActionIconButtons}\n              showCustomActionButtons={showCustomActionsInPanel}\n              {...popoverProps}\n            />\n          )}\n        </div>\n      </div>\n    </LeafyGreenProvider>\n  );\n}\n\nCode.displayName = 'Code';\n\nCode.propTypes = {\n  children: PropTypes.string.isRequired,\n  language: PropTypes.oneOfType([\n    PropTypes.oneOf(Object.values(Language)),\n    PropTypes.string,\n  ]),\n  darkMode: PropTypes.bool,\n  className: PropTypes.string,\n  showLineNumbers: PropTypes.bool,\n  lineNumberStart: PropTypes.number,\n  showWindowChrome: PropTypes.bool,\n  chromeTitle: PropTypes.string,\n  highlightLines: PropTypes.arrayOf(\n    PropTypes.oneOfType([\n      PropTypes.arrayOf(PropTypes.number),\n      PropTypes.number,\n    ]),\n  ),\n};\n\nexport default Code;\n"],"names":["_templateObject","_templateObject2","_templateObject3","_templateObject4","COPIED_SUCCESS_DURATION","COPIED_TEXT","COPY_TEXT","copiedThemeStyle","_defineProperty","Theme","Light","css","_taggedTemplateLiteral","palette","white","green","dark1","Dark","gray","dark3","base","copyButtonThemeStyles","light1","CopyButton","_ref","onCopy","contents","_useState2","_slicedToArray","useState","copied","setCopied","_useState4","open","setOpen","buttonRef","useRef","theme","useDarkMode","portalContainer","usePopoverPortalContainer","closeTooltip","useBackdropClick","useEffect","current","clipboard","ClipboardJS","text","container","timeoutId","setTimeout","clearTimeout","destroy","React","default","createElement","Tooltip","align","Align","Top","justify","Justify","Middle","trigger","IconButton","ref","className","cx","onClick","e","preventDefault","onKeyDown","key","keyMap","Escape","Tab","Enter","Space","_buttonRef$current","_buttonRef$current2","click","focus","onMouseEnter","onMouseLeave","CheckmarkIcon","CopyIcon","VisuallyHidden","role","shouldClose","displayName","_templateObject5","_templateObject6","_excluded","CustomSelectMenuButton","forwardRef","children","props","_objectWithoutProperties","Button","_extends","_templateObject7","_templateObject8","_templateObject9","containerStyle","menuButtonStyle","buttonModeStyle","light2","blue","dark2","selectStyle","iconMargin","spacing","LanguageSwitcher","element","language","languageOptions","onChange","usePortal","portalClassName","scrollContainer","popoverZIndex","_useDarkMode","darkMode","previousLanguage","usePrevious","iconStyle","renderedLogo","FileIcon","image","isComponentGlyph","isComponentType","cloneElement","popoverProps","Select","val","undefined","selectedOption","find","option","value","allowDeselect","__INTERNAL__menuButtonSlot__","__INTERNAL__menuButtonSlotProps__","leftGlyph","map","Option","basePanelStyle","basePanelThemeStyle","sidePanelStyle","sidePanelThemeStyles","languageSwitcherPanelStyle","languageSwitcherPanelThemeStyles","Panel","showCopyButton","customActionButtons","showCustomActionButtons","withLanguageSwitcher","Fragment","action","variantColors","light3","black","getStyles","concat","fontWeights","bold","languageParsers","javascript","typescript","c","cpp","csharp","go","http","ini","java","perl","php","properties","python","ruby","rust","scala","swift","kotlin","objectivec","dart","bash","shell","sql","yaml","json","diff","xml","SupportedLanguages","JavaScript","JS","TypeScript","TS","C","Cpp","Csharp","Cs","Go","Html","Http","Ini","Java","Perl","Php","Properties","Python","Ruby","Rust","Scala","Swift","Kotlin","ObjectiveC","Dart","Bash","Shell","Sql","Yaml","Json","Graphql","Diff","Xml","SyntaxContext","createContext","highlightLines","generateKindClassName","prefix","_len","arguments","length","kinds","Array","_key","filter","str","isString","kind","startsWith","split","k","join","childrenAsKeywords","keywords","_len2","_key2","child","includes","Token","isArray","item","isObject","_typeof","processToken","token","cellStyle","getHighlightedRowStyle","backgroundColor","backgroundImage","borderColor","yellow","LineTableRow","_ref2","lineNumber","highlighted","numberColor","highlightedNumberColor","isFlattenedTokenObject","obj","flattenNestedTree","flatMap","flatMapTreeWithKinds","_len3","parentKinds","_key3","entity","_entity$children$leng","_entity$children","apply","_toConsumableArray","containsLineBreak","some","_token$children","_token$children2","treeToLines","lines","currentLineIndex","createNewLine","forEach","fragment","i","push","TableContent","_ref4","_useSyntaxContext","useContext","showLineNumbers","lineNumberStart","trimmedLines","_trimmedLines$","shift","_trimmedLines","pop","line","index","displayLineNumber","currentLineNumber","highlightLine","def","sortedArr","sort","a","b","lineShouldHighlight","processedLine","plugin","result","rootNode","_emitter","react","Language","_objectSpread","None","filterSupportedLanguages","syntaxHighlightingInitialized","initializeSyntaxHighlighting","Object","values","injectGlobal","SupportedLanguagesList","hljsDefineGraphQL","hljs","registerLanguage","configure","languages","tabReplace","addPlugin","renderingPlugin","codeStyles","fontFamilies","code","Syntax","_ref$showLineNumbers","_ref$highlightLines","rest","highlightedContent","useMemo","highlight","ignoreIllegals","content","typeScale","useBaseFontSize","typeScales","code1","code2","codeFontStyles","fontSize","lineHeight","Provider","propTypes","PropTypes","string","isRequired","oneOf","bool","number","arrayOf","oneOfType","windowChromeStyle","windowChromeThemeStyles","light","dark","textStyle","body1","WindowChrome","_ref$chromeTitle","chromeTitle","_templateObject10","_templateObject11","_templateObject12","_templateObject13","_templateObject14","_templateObject15","_templateObject16","ScrollState","Left","Right","Both","mq","facepaint","wrapperStyle","contentWrapperStyles","contentWrapperStylesNoPanel","contentWrapperStyleWithPicker","codeWrapperStyle","transitionDuration","faster","whiteSpace","codeWrapperStyleNoPanel","codeWrapperStyleWithLanguagePicker","singleLineCodeWrapperStyle","panelStyles","getCodeWrapperVariantStyle","colors","baseScrollShadowStyles","scrollShadowStylesNoPanel","scrollShadowStylesWithPicker","getScrollShadow","scrollState","dropShadowBefore","transparentize","dropShadowAfter","Code","_ref$children","languageProp","darkModeProp","_ref$lineNumberStart","_ref$showWindowChrome","showWindowChrome","_ref$copyable","copyable","_ref$customActionButt","_ref$showCustomAction","_ref$usePortal","scrollableElementRef","setScrollState","showCopyBar","setShowCopyBar","isMultiline","trim","filteredCustomActionIconButtons","showCustomActionsInPanel","currentLanguage","showPanel","highlightLanguage","showLanguagePicker","isSupported","useIsomorphicLayoutEffect","scrollableElement","scrollWidth","clientWidth","renderedSyntaxComponent","debounceScroll","debounce","target","elementWidth","scrollPosition","scrollLeft","maxPosition","leading","LeafyGreenProvider","onScroll","persist","tabIndex"],"mappings":"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"}