import e,{createContext as n,useRef as r,useCallback as t,useEffect as o,useState as a,useMemo as l,useContext as i,forwardRef as s}from"react";import{storybookArgTypes as c,storybookExcludedControlParams as d}from"@lg-tools/storybook-utils";import{cx as u,css as p}from"@leafygreen-ui/emotion";import f from"@leafygreen-ui/icon/dist/Beaker";import m,{useDarkMode as g}from"@leafygreen-ui/leafygreen-provider";import h from"lodash/isUndefined";import{usePrevious as b,useIdAllocator as v,useAvailableSpace as y,useForwardedRef as x,useEventListener as E,useViewportSize as w}from"@leafygreen-ui/hooks";import k,{Align as O,Justify as N}from"@leafygreen-ui/popover";import{FormFieldState as S,DEFAULT_MESSAGES as C,FormFieldFeedback as _}from"@leafygreen-ui/form-field";import{transparentize as j}from"polished";import{Theme as I,createUniqueClassName as P,isComponentType as D,consoleOnce as z,keyMap as M}from"@leafygreen-ui/lib";import{palette as A}from"@leafygreen-ui/palette";import{isFragment as T}from"react-is";import{fontWeights as L,spacing as R,breakpoints as B,color as F,typeScales as G,Size as V,focusRing as H,hoverRing as W,BaseFontSize as Z}from"@leafygreen-ui/tokens";import K from"prop-types";import{isComponentGlyph as X}from"@leafygreen-ui/icon";import q from"@leafygreen-ui/icon/dist/Checkmark";import{InputOption as U,InputOptionContent as Y}from"@leafygreen-ui/input-option";import $,{Size as J,Variant as Q}from"@leafygreen-ui/button";import ee from"@leafygreen-ui/icon/dist/CaretDown";import{Label as ne,Description as re}from"@leafygreen-ui/typography";import"@lg-tools/test-harnesses";function te(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function oe(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?te(Object(r),!0).forEach((function(n){le(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function ae(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,n);if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof n?n:n+""}function le(e,n,r){return(n=ae(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},ie.apply(this,arguments)}function se(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function ce(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function de(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,a,l,i=[],s=!0,c=!1;try{if(a=(r=r.call(e)).next,0===n);else for(;!(s=(t=a.call(r)).done)&&(i.push(t.value),i.length!==n);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return i}}(e,n)||pe(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,n){if(e){if("string"==typeof e)return fe(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fe(e,n):void 0}}function fe(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}var me,ge,he,be,ve,ye="lg-select",xe={root:ye,errorMessage:"".concat(ye,"-error_message"),popover:"".concat(ye,"-popover"),buttonText:"".concat(ye,"-button_text")},Ee={XSmall:"xsmall",Small:"small",Default:"default",Large:"large"},we=S,ke={Trigger:"trigger",Option:"option"},Oe=n({size:Ee.Default,open:!1,disabled:!1}),Ne=le(le({},I.Light,{menu:{border:A.gray.light2,shadow:j(.75,A.black)},option:{group:{label:A.gray.dark1},background:{base:A.white,hovered:A.gray.light2,focused:A.blue.light3},text:{base:A.gray.dark3,selected:A.blue.base,disabled:A.gray.base,focused:A.blue.dark2},icon:{base:A.gray.dark1,selected:A.blue.base,disabled:A.gray.base},indicator:{focused:A.blue.base}}}),I.Dark,{menu:{border:A.gray.dark2,shadow:j(.85,"#000000")},option:{group:{label:A.gray.base},background:{base:A.gray.dark3,hovered:A.gray.dark4,focused:A.blue.dark3},text:{base:A.gray.light2,selected:A.gray.light2,disabled:A.gray.base,focused:A.blue.light3},icon:{base:A.gray.base,selected:A.blue.light1,disabled:A.gray.base},indicator:{focused:A.blue.light1}}}),Se=le(le(le(le({},Ee.XSmall,{height:22,text:13,option:{text:13},warningIcon:16}),Ee.Small,{height:28,text:13,option:{text:13},warningIcon:16}),Ee.Default,{height:36,text:13,option:{text:13},warningIcon:16}),Ee.Large,{height:48,text:18,option:{text:16},warningIcon:16}),Ce=36,_e=16,je={text:16,lineHeight:19},Ie={text:16,lineHeight:22},Pe={text:16},De=P("option"),ze=["children","className","glyph","selected","focused","disabled","onClick","onFocus","triggerScrollIntoView","hasGlyphs","description"];function Me(n){var a=n.children,l=n.className,i=n.glyph,s=n.selected,c=n.focused,d=n.disabled,f=n.onClick,m=n.onFocus,h=n.triggerScrollIntoView,v=n.hasGlyphs,y=n.description,x=se(n,ze),E=g().theme,w=Ne[E].option,k=r(null),O=t((function(){if(null==k.current)return null;var e=k.current,n=null==e?void 0:e.offsetParent;if(!n)return null;n.scrollTop=e.offsetTop+(e.clientHeight-n.clientHeight)/2}),[k]),N=b(h),S=h&&!N;o((function(){S&&O()}),[O,S]);var C=b(c),_=c&&!C;o((function(){_&&k.current.focus()}),[_]),i&&(X(i)||console.error("`Option` instance did not render icon because it is not a known glyph element."));var j=i&&X(i)?i:void 0,I=s?e.createElement(q,{key:"checkmark",className:u(p(me||(me=ce(["\n          color: ",";\n        "])),w.icon.selected),le({},p(ge||(ge=ce(["\n            color: ",";\n          "])),w.icon.disabled),d))}):void 0,P=v?j:I,D=v?I:void 0;return e.createElement(U,ie({"aria-label":"string"==typeof a?a:"option"},x,{disabled:d,role:"option",tabIndex:-1,ref:k,className:u(De,l),onClick:f,onFocus:m,onKeyDown:void 0,checked:s,highlighted:c}),e.createElement(Y,{leftGlyph:P,rightGlyph:D,description:y},e.createElement("span",{className:u(le({},p(he||(he=ce(["\n              font-weight: ",";\n            "])),L.bold),s))},a)))}function Ae(e){throw Error("`Option` must be a child of a `Select` instance")}Me.displayName="Option",Ae.displayName="Option",Ae.propTypes={children:K.node.isRequired,className:K.string,glyph:K.element,value:K.string,disabled:K.bool,description:K.string};var Te,Le=p(be||(be=ce(["\n  padding: ","px 0;\n"])),R[2]),Re=p(ve||(ve=ce(["\n  cursor: default;\n  width: 100%;\n  padding: 0 12px 2px;\n  outline: none;\n  overflow-wrap: anywhere;\n  font-size: 12px;\n  line-height: 16px;\n  font-weight: ",";\n  text-transform: uppercase;\n  letter-spacing: 0.4px;\n"])),L.bold),Be=["className","label","children"];function Fe(n){var r=n.className,t=n.label,o=n.children,a=se(n,Be),l=g().theme,i=Ne[l].option,s=v({prefix:"select-option-group"});return e.createElement("div",ie({className:u(Le,r)},a),e.createElement("div",{id:s,className:u(Re,p(Te||(Te=ce(["\n            color: ",";\n          "])),i.group.label))},t),e.createElement("div",{role:"group","aria-labelledby":s},o))}function Ge(e){throw Error("`OptionGroup` must be a child of a `Select` instance")}Fe.displayName="OptionGroup",Ge.displayName="OptionGroup",Ge.propTypes={children:K.oneOfType([K.element,K.arrayOf(K.oneOfType([K.oneOf([!1,null,void 0,""]),K.element]))]).isRequired,className:K.string,label:K.string.isRequired,disabled:K.bool};var Ve=["children"],He="@media only screen and (max-width: ".concat(B.Tablet,"px) and (hover: none)"),We="".concat(He," and (pointer: coarse), ").concat(He," and (pointer: none)");function Ze(e){return null==e||!1===e||""===e}function Ke(n,r){e.Children.forEach(n,(function(e){D(e,"Option")?r(e):D(e,"OptionGroup")?Ke(e.props.children,(function(n){return r(n,e)})):T(e)&&Ke(e.props.children,r)}))}function Xe(n,r,t){return e.Children.toArray(n).every((function(e){return D(e,"Option")}))||e.Children.toArray(n).every((function(e){return D(e,"OptionGroup")}))||z.warn("LeafyGreen Select: Combining grouped and ungrouped Select Options can cause styling issues"),e.Children.map(n,(function(n){if(D(n,"Option"))return e.createElement(Me,r(n));if(D(n,"OptionGroup")){var o=n.props,a=o.children,l=se(o,Ve);return e.createElement(Fe,ie({className:void 0},l),Xe(a,(function(e){return r(e,n)}),t))}return T(n)?Xe(n.props.children,r,t):(Ze(n)||null==t||t(n),null)}))}function qe(e){return null===e?"":void 0!==e.props.value?e.props.value:Array.isArray(e.props.children)?e.props.children.filter((function(e){return!Ze(e)})).join(""):e.props.children?e.props.children.toString():""}function Ue(e,n){var r,t,o;return null!==(r=e.props.disabled)&&void 0!==r&&r||null!==(t=null==n||null===(o=n.props)||void 0===o?void 0:o.disabled)&&void 0!==t&&t}function Ye(e,n,r){return qe(e)===r&&!Ue(e,n)}function $e(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.initialValue,o=n.deps,a=void 0===o?[]:o,i=r(t);return l((function(){return{get current(){return i.current},set current(n){i.current=n,e(n)}}}),[e,i].concat(ue(a)))}function Je(e,n){var r=t((function(e,n){Array.isArray(e)?e.forEach(r):"function"==typeof e?e(n):e&&(e.current=n)}),[]);return $e(t((function(n){return r(e,n)}),[e,r]),{initialValue:n})}var Qe,en,nn,rn,tn,on,an,ln,sn,cn,dn,un,pn,fn,mn,gn,hn,bn,vn,yn,xn,En=function(e){var n=de(a(e),2),r=n[0];return $e(n[1],{initialValue:e,deps:[r]})},wn=P("select-popover"),kn=R[2],On=p(Qe||(Qe=ce(["\n  position: relative;\n  text-align: left;\n  width: 100%;\n  border-radius: 3px;\n  line-height: 16px;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  overflow: auto;\n"]))),Nn=p(en||(en=ce(["\n  width: max-content;\n"]))),Sn=function(e,n){var r=Se[n],t=Ne[e];return u(p(nn||(nn=ce(["\n      min-height: ","px;\n      border-radius: 12px;\n      box-shadow: 0 4px 7px 0 ",";\n      padding: ","px 0;\n      background-color: ",";\n      border: 1px solid ",";\n    "])),r.height,t.menu.shadow,R[200],F[e].background.primary.default,F[e].border.secondary.default))},Cn=e.forwardRef((function(n,r){var o=n.children,a=n.id,l=n.referenceElement,s=n.className,c=n.labelId,d=n.dropdownWidthBasis,f=n.usePortal,m=void 0===f||f,b=n.portalContainer,v=n.portalRef,x=n.scrollContainer,E=n.portalClassName,w=n.popoverZIndex,S=n.onEntering,C=n.onEnter,_=n.onEntered,j=n.onExiting,I=n.onExit,P=n.onExited,D=g().theme,z=i(Oe),M=z.size,A=z.disabled,T=z.open,L=Je(r,null),R=y(l,kn),B=h(R)?"unset":"".concat(Math.min(R,274),"px"),F=t((function(e){L.current&&L.current.focus(),e.stopPropagation()}),[L]),G=oe({popoverZIndex:w,onEntering:S,onEnter:C,onEntered:_,onExiting:j,onExit:I,onExited:P},m?{usePortal:m,portalClassName:E,portalContainer:b,portalRef:v,scrollContainer:x}:{usePortal:m});return e.createElement(k,ie({active:T&&!A,spacing:6,align:O.Bottom,justify:N.Start,adjustOnMutation:!0,className:u(wn,s,le({},Nn,d===ke.Option)),refEl:l},G),e.createElement("ul",{"data-lgid":xe.popover,"aria-labelledby":c,role:"listbox",ref:L,tabIndex:-1,onClick:F,className:u(On,Sn(D,M),p(rn||(rn=ce(["\n              max-height: ",";\n              "," {\n                font-size: ","px;\n              }\n            "])),B,We,Pe.text)),id:a},o))}));Cn.displayName="ListMenu";var _n,jn,In,Pn,Dn,zn,Mn=P("select-menu"),An=p(tn||(tn=ce(["\n  // Override button defaults\n  font-weight: ",";\n  > *:last-child {\n    grid-template-columns: 1fr 16px;\n    justify-content: flex-start;\n\n    > svg {\n      justify-self: right;\n      width: 16px;\n      height: 16px;\n    }\n  }\n"])),L.regular),Tn=le(le(le(le({},V.Default,p(on||(on=ce(["\n    > *:last-child {\n      padding: 0 ","px 0 ","px;\n    }\n  "])),R[200],R[300])),V.Large,p(an||(an=ce(["\n    > *:last-child {\n      padding: 0 ","px 0 ","px;\n    }\n  "])),R[200],R[300])),V.Small,p(ln||(ln=ce(["\n    > *:last-child {\n      padding: 0 ","px 0 ","px;\n    }\n  "])),R[100],R[200])),V.XSmall,p(sn||(sn=ce(["\n    text-transform: none;\n    font-size: ","px;\n    line-height: ","px;\n    > *:last-child {\n      padding: 0 ","px 0 ","px;\n    }\n  "])),G.body1.fontSize,G.body1.lineHeight,R[100],R[200])),Ln=le(le({},I.Light,p(cn||(cn=ce(["\n    background-color: ",";\n    // Override button default color\n    > *:last-child {\n      > svg {\n        color: ",";\n      }\n    }\n  "])),F.light.background.primary.default,F.light.icon.primary.default)),I.Dark,p(dn||(dn=ce(["\n    border-color: ",";\n    background-color: ",";\n    color: ",";\n\n    // Override button default color\n    > *:last-child {\n      > svg {\n        color: ",";\n      }\n    }\n\n    &:hover,\n    &:active,\n    &:focus {\n      background-color: ",";\n      color: ",";\n    }\n  "])),F.dark.border.primary.default,A.gray.dark4,F.dark.text.primary.default,F.dark.icon.primary.default,A.gray.dark4,F.dark.text.primary.hover)),Rn=le(le({},I.Light,p(un||(un=ce(["\n    &:focus-visible {\n      box-shadow: ",";\n      border-color: rgba(255, 255, 255, 0);\n    }\n  "])),H.light.input)),I.Dark,p(pn||(pn=ce(["\n    &:focus-visible {\n      background-color: ",";\n      box-shadow: ",";\n      border-color: rgba(255, 255, 255, 0);\n    }\n  "])),A.gray.dark4,H.dark.input)),Bn=le(le({},I.Light,p(fn||(fn=ce(["\n    color: ",";\n  "])),A.gray.base)),I.Dark,p(mn||(mn=ce(["\n    color: ",";\n\n    &:hover,\n    &:active,\n    &:focus {\n      color: ",";\n    }\n  "])),A.gray.dark1,A.gray.light1)),Fn=p(hn||(hn=ce(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-grow: 1;\n  gap: ","px;\n  overflow: hidden;\n"])),R[100]),Gn=p(bn||(bn=ce(["\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 100%;\n"]))),Vn=["children","value","text","name","deselected","readOnly","onClose","onOpen","state","baseFontSize","__INTERNAL__menuButtonSlot__","__INTERNAL__menuButtonSlotProps__"],Hn=e.forwardRef((function(n,r){var o,a=n.children,l=n.value,s=n.text,c=n.name,d=n.deselected;n.readOnly;var f=n.onClose,m=n.onOpen,h=n.state,b=n.baseFontSize,v=n.__INTERNAL__menuButtonSlot__,y=n.__INTERNAL__menuButtonSlotProps__,x=se(n,Vn),E=g().theme,w=i(Oe),k=w.open,O=w.size,N=w.disabled,S=Je(r,null),C=t((function(){k?f():m(),S.current.focus()}),[f,m,k,S]),_=v||$,j=v?"":u(An,Ln[E],Tn[O],Rn[E],le(le(le(le({},function(e){return le(le(le({},we.Error,p(vn||(vn=ce(["\n    border-color: ",";\n\n    &:hover,\n    &:active {\n      border-color: ",";\n      box-shadow: ",";\n    }\n  "])),F[e].border.error.default,F[e].border.error.hover,W[e].red)),we.None,p(yn||(yn=ce([""])))),we.Valid,p(xn||(xn=ce(["\n    border-color: ",";\n\n    &:hover,\n    &:active {\n      border-color: ",";\n      box-shadow: ",";\n    }\n  "])),F[e].border.success.default,F[e].border.success.hover,W[e].green))}(E)[h||we.None],!!h),Bn[E],d),function(e){return p(gn||(gn=ce(["\n  cursor: not-allowed;\n  pointer-events: unset;\n  box-shadow: unset;\n\n  &:active {\n    pointer-events: none;\n  }\n\n  &[aria-disabled='true'] {\n    background-color: ",";\n    border-color: ",";\n    color: ",";\n\n    &:hover,\n    &:active {\n      box-shadow: inherit;\n    }\n\n    > *:last-child {\n      > svg {\n        color: ",";\n      }\n    }\n  }\n"])),F[e].background.disabled.default,F[e].border.disabled.default,F[e].text.disabled.default,F[e].icon.disabled.default)}(E),N),p(_n||(_n=ce(["\n              letter-spacing: initial;\n            "]))),O===J.XSmall),p(jn||(jn=ce(["\n            width: 100%;\n            "," {\n              height: ","px;\n              font-size: ","px;\n            }\n          "])),We,Ce,_e)),P=null!==(o=x["data-testid"])&&void 0!==o?o:"leafygreen-ui-select-menubutton";return e.createElement(_,ie({},x,y,{ref:S,name:c,value:l,disabled:N,onClick:C,variant:Q.Default,darkMode:E===I.Dark,rightGlyph:e.createElement(ee,null),size:O,"data-testid":P,className:u(j,le({},p(In||(In=ce(["\n              font-size: ","px;\n            "])),b),O===J.Default),null==y?void 0:y.className)}),e.createElement("div",{className:Fn},e.createElement("div",{"data-lgid":xe.buttonText,className:u(Mn,Gn)},s)),a)}));Hn.displayName="MenuButton";var Wn,Zn,Kn,Xn,qn,Un,Yn=p(Pn||(Pn=ce(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: ","px;\n"])),R[1]),$n=p(Dn||(Dn=ce(["\n  display: flex;\n  flex-direction: column;\n"]))),Jn=p(zn||(zn=ce(["\n  font-size: ","px;\n  line-height: ","px;\n"])),G.large.fontSize,G.large.lineHeight),Qn=["children","darkMode","size","disabled","allowDeselect","usePortal","placeholder","errorMessage","successMessage","state","dropdownWidthBasis","baseFontSize","data-lgid","id","aria-labelledby","aria-label","className","label","description","name","defaultValue","value","onChange","readOnly","portalContainer","portalRef","scrollContainer","portalClassName","popoverZIndex","onEntering","onEnter","onEntered","onExiting","onExit","onExited","__INTERNAL__menuButtonSlot__"],er=s((function(n,r){var i,s=n.children,c=n.darkMode,d=n.size,f=void 0===d?Ee.Default:d,h=n.disabled,b=void 0!==h&&h,y=n.allowDeselect,k=void 0===y||y,O=n.usePortal,N=void 0===O||O,S=n.placeholder,j=void 0===S?"Select":S,I=n.errorMessage,P=void 0===I?C.error:I,D=n.successMessage,z=void 0===D?C.success:D,A=n.state,T=void 0===A?we.None:A,L=n.dropdownWidthBasis,R=void 0===L?ke.Trigger:L,B=n.baseFontSize,F=void 0===B?Z.Body1:B,G=n["data-lgid"],V=void 0===G?xe.root:G,H=n.id,W=n["aria-labelledby"],K=n["aria-label"],X=n.className,q=n.label,U=n.description,Y=n.name,$=n.defaultValue,J=n.value,Q=n.onChange,ee=n.readOnly,te=n.portalContainer,ae=n.portalRef,ue=n.scrollContainer,pe=n.portalClassName,fe=n.popoverZIndex,me=n.onEntering,ge=n.onEnter,he=n.onEntered,be=n.onExiting,ve=n.onExit,ye=n.onExited,Ne=n.__INTERNAL__menuButtonSlot__,Se=se(n,Qn),Ce=v({prefix:"select",id:H}),_e=l((function(){return K&&!q?void 0:null!=W?W:"".concat(Ce,"-label")}),[W,K,q,Ce]);q||W||K||console.error("For screen-reader accessibility, label, aria-label, or aria-labelledby must be provided to Select.");var Pe=g(c).darkMode,De="".concat(Ce,"-description"),ze="".concat(Ce,"-menu"),Ae=de(a(!1),2),Te=Ae[0],Le=Ae[1],Re=x(r,null),Be=En(null),Fe=v({prefix:"select"}),Ge=En(null),Ve=l((function(){return{size:f,open:Te,disabled:b}}),[f,Te,b]);o((function(){void 0!==J&&void 0===Q&&!0!==ee&&console.warn("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")}),[Q,ee,J]);var He=t((function(){Le(!0)}),[]),Ze=t((function(){Le(!1),Be.current.focus()}),[Be]);o((function(){if(Te){var e=function(e){var n=Be.current.contains(e.target)||Ge.current.contains(e.target);Le(n)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}}),[Ge,Be,Te]);var $e=l((function(){var e=null;return void 0===J&&void 0!==$&&Ke(s,(function(n,r){Ye(n,r,$)&&(e=n)})),e}),[s,$,J]),Je=de(a($e),2),Qe=Je[0],en=Je[1];o((function(){var e;null!==Qe&&en(null!==(e=function(e,n){var r,t,o,a,l,i,s,c;return Ke(e,(function(e){if(e===n)l=n;else if(e.props.children===n.props.children&&e.props.value===n.props.value){var r;null!==(r=i)&&void 0!==r||(i=e)}else if(void 0!==e.props.value&&e.props.value===n.props.value){var t;null!==(t=s)&&void 0!==t||(s=e)}else if(qe(e)===qe(n)){var o;null!==(o=c)&&void 0!==o||(c=e)}})),null!==(r=null!==(t=null!==(o=null!==(a=l)&&void 0!==a?a:i)&&void 0!==o?o:s)&&void 0!==t?t:c)&&void 0!==r?r:null}(s,Qe))&&void 0!==e?e:$e)}),[s,$e,Qe]);var nn=l((function(){if(void 0!==J){var e=null;return Ke(s,(function(n,r){Ye(n,r,J)&&(e=n)})),e}return Qe}),[s,Qe,J]),rn=t((function(e,n){n.preventDefault(),n.stopPropagation(),void 0===J&&en(e),null==Q||Q(qe(e),n),ln(void 0),Ze()}),[Q,Ze,J]),tn=t((function(e,n){return function(r){r.preventDefault(),r.stopPropagation(),b||n||(rn(e,r),Ze())}}),[b,Ze,rn]),on=de(a(),2),an=on[0],ln=on[1],sn=l((function(){var e=[];return k&&e.push(null),Ke(s,(function(n,r){Ue(n,r)||e.push(n)})),e}),[s,k]),cn=t((function(e){void 0!==an&&rn(an,e)}),[an,rn]),dn=t((function(){ln(sn[0])}),[sn]),un=t((function(){ln(sn[sn.length-1])}),[sn]),pn=t((function(){if(void 0===an||0===sn.indexOf(an))un();else{var e=sn.indexOf(an)-1;ln(sn[e])}}),[sn,an,un]),fn=t((function(){if(void 0===an||sn.indexOf(an)===sn.length-1)dn();else{var e=sn.indexOf(an)+1;ln(sn[e])}}),[sn,an,dn]),mn=t((function(e,n){return function(r){r.preventDefault(),r.stopPropagation(),b||n||ln(e)}}),[b]),gn=t((function(e){var n,r;if(!(e.ctrlKey||e.shiftKey||e.altKey)){var t=null===(n=Ge.current)||void 0===n?void 0:n.contains(document.activeElement),o=null===(r=Be.current)||void 0===r?void 0:r.contains(document.activeElement);if(o||t)switch(e.key){case M.Tab:case M.Escape:Ze(),ln(void 0);break;case M.Enter:case M.Space:Te&&!o&&e.preventDefault(),cn(e);break;case M.ArrowUp:!Te&&o&&He(),e.preventDefault(),pn();break;case M.ArrowDown:!Te&&o&&He(),e.preventDefault(),fn()}}}),[Ge,Be,Ze,Te,cn,pn,fn,He]);E("keydown",gn);var hn=w(),bn=l((function(){var e=!1;return Ke(s,(function(n){e||(e=void 0!==n.props.glyph)})),e}),[s]),vn=l((function(){return null!==hn&&null!==Ge.current&&void 0===an&&Te}),[an,Ge,Te,hn]),yn=l((function(){var n=null===nn;return e.createElement(Me,{className:void 0,glyph:void 0,selected:n,focused:null===an,disabled:!1,onClick:tn(null,!1),onFocus:mn(null,!1),hasGlyphs:!1,triggerScrollIntoView:n&&vn},j)}),[vn,an,tn,mn,j,nn]),xn=l((function(){return Xe(s,(function(e,n){var r=e===nn,t=Ue(e,n);return oe(oe({},e.props),{},{className:e.props.className,glyph:e.props.glyph,selected:r,focused:e===an,disabled:t,children:e.props.children,hasGlyphs:bn,onClick:tn(e,t),onFocus:mn(e,t),triggerScrollIntoView:r&&vn})}),(function(){console.error("`Select` instance received child that is not `Option` or `OptionGroup`.")}))}),[vn,s,an,tn,mn,bn,nn]),wn=oe({popoverZIndex:fe,onEntering:me,onEnter:ge,onEntered:he,onExiting:be,onExit:ve,onExited:ye},N?{usePortal:N,portalClassName:pe,portalContainer:te,portalRef:ae,scrollContainer:ue}:{usePortal:N});return e.createElement(m,{darkMode:Pe},e.createElement("div",{ref:Re,className:u($n,X),"data-lgid":V},(q||U)&&e.createElement("div",{className:Yn},q&&e.createElement(ne,{htmlFor:Fe,id:_e,darkMode:Pe,disabled:b,className:u(le(le({},Jn,f===Ee.Large),p(Wn||(Wn=ce(["\n                        font-size: ","px;\n                        line-height: 20px;\n                      "])),F),f===Ee.Default),p(Zn||(Zn=ce(["\n                      // Prevent hover state from showing when hovering label\n                      pointer-events: none;\n                    "]))),p(Kn||(Kn=ce(["\n                      "," {\n                        font-size: ","px;\n                        line-height: ","px;\n                      }\n                    "])),We,je.text,je.lineHeight))},q),U&&e.createElement(re,{id:De,darkMode:Pe,disabled:b,className:u(le(le({},Jn,f===Ee.Large),p(Xn||(Xn=ce(["\n                        font-size: ","px;\n                        line-height: 20px;\n                      "])),F),f===Ee.Default),p(qn||(qn=ce(["\n                      "," {\n                        font-size: ","px;\n                        line-height: ","px;\n                      }\n                    "])),We,Ie.text,Ie.lineHeight))},U)),e.createElement(Oe.Provider,{value:Ve},e.createElement(Hn,ie({},Se,{id:Fe,ref:Be,name:Y,readOnly:ee,value:qe(nn),text:null!==nn?nn.props.children:j,deselected:null===nn,onOpen:He,onClose:Ze,"aria-labelledby":_e,"aria-label":q||W?void 0:K,"aria-controls":ze,"aria-expanded":Te,"aria-describedby":De,"aria-invalid":T===we.Error,"aria-disabled":b,state:T,baseFontSize:F,__INTERNAL__menuButtonSlot__:Ne}),e.createElement(Cn,ie({labelId:_e,id:ze,referenceElement:Be,ref:Ge,className:u(le({},p(Un||(Un=ce(["\n                    width: ","px;\n                  "])),null===(i=Be.current)||void 0===i?void 0:i.clientWidth),R===ke.Trigger)),dropdownWidthBasis:R},wn),k&&yn,xn))),e.createElement(_,{disabled:b,errorMessage:P,hideFeedback:Te,size:f,state:T,successMessage:z})))}));er.displayName="Select",er.propTypes={label:K.string,"aria-labelledby":K.string,"aria-label":K.string,description:K.node,placeholder:K.string,className:K.string,darkMode:K.bool,size:K.oneOf(Object.values(Ee)),disabled:K.bool,id:K.string,value:K.string,defaultValue:K.string,onChange:K.func,readOnly:K.bool,errorMessage:K.node,successMessage:K.node,state:K.oneOf(Object.values(we)),allowDeselect:K.bool,baseFontSize:K.oneOf(Object.values(Z)),dropdownWidthBasis:K.oneOf(Object.values(ke)),portalRef:K.shape({current:"undefined"!=typeof window?K.instanceOf(Element):K.any})};var nr,rr,tr=["className"],or={title:"Components/Select",component:er,parameters:{default:"LiveExample",controls:{exclude:[].concat(ue(d),["children","value"])},generate:{combineArgs:{darkMode:[!1,!0],state:Object.values(we),size:Object.values(Ee),disabled:[!1,!0]},args:{className:p(nr||(nr=ce(["\n          width: 256px;\n        "])))},decorator:function(n,r){return e.createElement(m,{darkMode:null==r?void 0:r.args.darkMode},e.createElement(n,{glyph:null==r?void 0:r.args.glyph}))}}},args:{placeholder:"Select",disabled:!1,allowDeselect:!1,darkMode:!1,children:[e.createElement(Ae,{key:"long",value:"long",description:"I know a little lorem ipsum"},"Cras mattis consectetur purus sit amet fermentum. Maecenas sed diam eget risus varius blandit sit amet non magna."),e.createElement(Ge,{key:"Common",label:"Common"},e.createElement(Ae,{value:"dog"},"Dog"),e.createElement(Ae,{value:"cat"},"Cat")),e.createElement(Ge,{key:"Less common",label:"Less common"},e.createElement(Ae,{value:"hamster"},"Hamster"),e.createElement(Ae,{value:"parrot"},"Parrot")),e.createElement(Ae,{key:"iguana",value:"iguana"},"Mexican spiny-tailed iguana"),e.createElement(Ae,{key:"spider",value:"spider",description:"I'm chill, I swear"},"Spider"),e.createElement(Ae,{key:"aardvark",value:"aardvark",disabled:!0,description:"Call me Arthur"},"Aardvark")],usePortal:!0},argTypes:{placeholder:{control:"text"},disabled:{control:"boolean"},label:{control:"text"},description:{control:"text"},defaultValue:{control:"text"},readOnly:{control:"boolean"},errorMessage:{control:"text"},allowDeselect:{control:"boolean"},darkMode:c.darkMode}},ar=function(n){var r=n.className,t=se(n,tr);return e.createElement(er,ie({},t,{"data-test":"hello-world",className:u(p(rr||(rr=ce(["\n        min-width: 200px;\n        max-width: 400px;\n      "]))),r),onChange:function(e){return console.log(e)}}))};ar.parameters={chromatic:{disableSnapshot:!0}};var lr=ar.bind({});lr.args={children:[e.createElement(Ge,{key:"Common",label:"Common"},e.createElement(Ae,{glyph:e.createElement(f,null),value:"dog"},"Dog"),e.createElement(Ae,{glyph:e.createElement(f,null),value:"cat",description:"Bark bark"},"Cat")),e.createElement(Ge,{key:"Less common",label:"Less common"},e.createElement(Ae,{glyph:e.createElement(f,null),value:"hamster"},"Hamster"),e.createElement(Ae,{glyph:e.createElement(f,null),value:"parrot"},"Parrot")),e.createElement(Ae,{glyph:e.createElement(f,null),key:"iguana",value:"iguana"},"Mexican spiny-tailed iguana"),e.createElement(Ae,{glyph:e.createElement(f,null),key:"spider",value:"spider",disabled:!0,description:"I'm chill, I swear"},"Spider")]},lr.parameters={chromatic:{disableSnapshot:!0}};var ir=ar.bind({});ir.args={usePortal:!1},ir.parameters={chromatic:{disableSnapshot:!0}};var sr=function(){};export{sr as Generated,ar as LiveExample,ir as NoPortal,lr as WithIcons,or as default};
