import e,{createContext as n,useRef as r,useCallback as t,useEffect as o,useState as i,useMemo as a,useContext as l,forwardRef as d}from"react";import s from"lodash/isUndefined";import{cx as c,css as u}from"@leafygreen-ui/emotion";import{usePrevious as p,useIdAllocator as f,useAvailableSpace as g,useForwardedRef as b,useEventListener as h,useViewportSize as v}from"@leafygreen-ui/hooks";import m,{useDarkMode as y}from"@leafygreen-ui/leafygreen-provider";import x,{Align as w,Justify as E}from"@leafygreen-ui/popover";import{FormFieldState as O,DEFAULT_MESSAGES as k,FormFieldFeedback as N,LGIDS_FORM_FIELD as S}from"@leafygreen-ui/form-field";import{transparentize as _}from"polished";import{Theme as C,createUniqueClassName as j,isComponentType as I,consoleOnce as D,keyMap as P}from"@leafygreen-ui/lib";import{palette as z}from"@leafygreen-ui/palette";import{isFragment as A}from"react-is";import{fontWeights as T,spacing as M,breakpoints as L,color as R,typeScales as B,Size as F,focusRing as G,hoverRing as V,BaseFontSize as H}from"@leafygreen-ui/tokens";import W from"prop-types";import{isComponentGlyph as U}from"@leafygreen-ui/icon";import Z from"@leafygreen-ui/icon/dist/Checkmark";import{InputOption as q,InputOptionContent as K}from"@leafygreen-ui/input-option";import X,{Size as Y,Variant as $}from"@leafygreen-ui/button";import J from"@leafygreen-ui/icon/dist/CaretDown";import{Label as Q,Description as ee,LGIDS_TYPOGRAPHY as ne}from"@leafygreen-ui/typography";import{getByLgId as re,queryBySelector as te}from"@lg-tools/test-harnesses";var oe="lg-select",ie={root:oe,errorMessage:"".concat(oe,"-error_message"),popover:"".concat(oe,"-popover"),buttonText:"".concat(oe,"-button_text")};function ae(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function le(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ae(Object(r),!0).forEach((function(n){se(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function de(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,n);if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof n?n:n+""}function se(e,n,r){return(n=de(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},ce.apply(this,arguments)}function ue(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function pe(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function fe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i,a,l=[],d=!0,s=!1;try{if(i=(r=r.call(e)).next,0===n);else for(;!(d=(t=i.call(r)).done)&&(l.push(t.value),l.length!==n);d=!0);}catch(e){s=!0,o=e}finally{try{if(!d&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,n)||be(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e){return function(e){if(Array.isArray(e))return he(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||be(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,n){if(e){if("string"==typeof e)return he(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?he(e,n):void 0}}function he(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}var ve,me,ye,xe,we,Ee={XSmall:"xsmall",Small:"small",Default:"default",Large:"large"},Oe=O,ke={Trigger:"trigger",Option:"option"},Ne=n({size:Ee.Default,open:!1,disabled:!1}),Se=se(se({},C.Light,{menu:{border:z.gray.light2,shadow:_(.75,z.black)},option:{group:{label:z.gray.dark1},background:{base:z.white,hovered:z.gray.light2,focused:z.blue.light3},text:{base:z.gray.dark3,selected:z.blue.base,disabled:z.gray.base,focused:z.blue.dark2},icon:{base:z.gray.dark1,selected:z.blue.base,disabled:z.gray.base},indicator:{focused:z.blue.base}}}),C.Dark,{menu:{border:z.gray.dark2,shadow:_(.85,"#000000")},option:{group:{label:z.gray.base},background:{base:z.gray.dark3,hovered:z.gray.dark4,focused:z.blue.dark3},text:{base:z.gray.light2,selected:z.gray.light2,disabled:z.gray.base,focused:z.blue.light3},icon:{base:z.gray.base,selected:z.blue.light1,disabled:z.gray.base},indicator:{focused:z.blue.light1}}}),_e=se(se(se(se({},Ee.XSmall,{height:22,text:13,option:{text:13},warningIcon:16}),Ee.Small,{height:28,text:13,option:{text:13},warningIcon:16}),Ee.Default,{height:36,text:13,option:{text:13},warningIcon:16}),Ee.Large,{height:48,text:18,option:{text:16},warningIcon:16}),Ce=36,je=16,Ie={text:16,lineHeight:19},De={text:16,lineHeight:22},Pe={text:16},ze=j("option"),Ae=["children","className","glyph","selected","focused","disabled","onClick","onFocus","triggerScrollIntoView","hasGlyphs","description"];function Te(n){var i=n.children,a=n.className,l=n.glyph,d=n.selected,s=n.focused,f=n.disabled,g=n.onClick,b=n.onFocus,h=n.triggerScrollIntoView,v=n.hasGlyphs,m=n.description,x=ue(n,Ae),w=y().theme,E=Se[w].option,O=r(null),k=t((function(){if(null==O.current)return null;var e=O.current,n=null==e?void 0:e.offsetParent;if(!n)return null;n.scrollTop=e.offsetTop+(e.clientHeight-n.clientHeight)/2}),[O]),N=p(h),S=h&&!N;o((function(){S&&k()}),[k,S]);var _=p(s),C=s&&!_;o((function(){C&&O.current.focus()}),[C]),l&&(U(l)||console.error("`Option` instance did not render icon because it is not a known glyph element."));var j=l&&U(l)?l:void 0,I=d?e.createElement(Z,{key:"checkmark",className:c(u(ve||(ve=pe(["\n          color: ",";\n        "])),E.icon.selected),se({},u(me||(me=pe(["\n            color: ",";\n          "])),E.icon.disabled),f))}):void 0,D=v?j:I,P=v?I:void 0;return e.createElement(q,ce({"aria-label":"string"==typeof i?i:"option"},x,{disabled:f,role:"option",tabIndex:-1,ref:O,className:c(ze,a),onClick:g,onFocus:b,onKeyDown:void 0,checked:d,highlighted:s}),e.createElement(K,{leftGlyph:D,rightGlyph:P,description:m},e.createElement("span",{className:c(se({},u(ye||(ye=pe(["\n              font-weight: ",";\n            "])),T.bold),d))},i)))}function Me(e){throw Error("`Option` must be a child of a `Select` instance")}Te.displayName="Option",Me.displayName="Option",Me.propTypes={children:W.node.isRequired,className:W.string,glyph:W.element,value:W.string,disabled:W.bool,description:W.string};var Le,Re=u(xe||(xe=pe(["\n  padding: ","px 0;\n"])),M[2]),Be=u(we||(we=pe(["\n  cursor: default;\n  width: 100%;\n  padding: 0 12px 2px;\n  outline: none;\n  overflow-wrap: anywhere;\n  font-size: 12px;\n  line-height: 16px;\n  font-weight: ",";\n  text-transform: uppercase;\n  letter-spacing: 0.4px;\n"])),T.bold),Fe=["className","label","children"];function Ge(n){var r=n.className,t=n.label,o=n.children,i=ue(n,Fe),a=y().theme,l=Se[a].option,d=f({prefix:"select-option-group"});return e.createElement("div",ce({className:c(Re,r)},i),e.createElement("div",{id:d,className:c(Be,u(Le||(Le=pe(["\n            color: ",";\n          "])),l.group.label))},t),e.createElement("div",{role:"group","aria-labelledby":d},o))}function Ve(e){throw Error("`OptionGroup` must be a child of a `Select` instance")}Ge.displayName="OptionGroup",Ve.displayName="OptionGroup",Ve.propTypes={children:W.oneOfType([W.element,W.arrayOf(W.oneOfType([W.oneOf([!1,null,void 0,""]),W.element]))]).isRequired,className:W.string,label:W.string.isRequired,disabled:W.bool};var He=["children"],We="@media only screen and (max-width: ".concat(L.Tablet,"px) and (hover: none)"),Ue="".concat(We," and (pointer: coarse), ").concat(We," and (pointer: none)");function Ze(e){return null==e||!1===e||""===e}function qe(n,r){e.Children.forEach(n,(function(e){I(e,"Option")?r(e):I(e,"OptionGroup")?qe(e.props.children,(function(n){return r(n,e)})):A(e)&&qe(e.props.children,r)}))}function Ke(n,r,t){return e.Children.toArray(n).every((function(e){return I(e,"Option")}))||e.Children.toArray(n).every((function(e){return I(e,"OptionGroup")}))||D.warn("LeafyGreen Select: Combining grouped and ungrouped Select Options can cause styling issues"),e.Children.map(n,(function(n){if(I(n,"Option"))return e.createElement(Te,r(n));if(I(n,"OptionGroup")){var o=n.props,i=o.children,a=ue(o,He);return e.createElement(Ge,ce({className:void 0},a),Ke(i,(function(e){return r(e,n)}),t))}return A(n)?Ke(n.props.children,r,t):(Ze(n)||null==t||t(n),null)}))}function Xe(e){return null===e?"":void 0!==e.props.value?e.props.value:Array.isArray(e.props.children)?e.props.children.filter((function(e){return!Ze(e)})).join(""):e.props.children?e.props.children.toString():""}function Ye(e,n){var r,t,o;return null!==(r=e.props.disabled)&&void 0!==r&&r||null!==(t=null==n||null===(o=n.props)||void 0===o?void 0:o.disabled)&&void 0!==t&&t}function $e(e,n,r){return Xe(e)===r&&!Ye(e,n)}function Je(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.initialValue,o=n.deps,i=void 0===o?[]:o,l=r(t);return a((function(){return{get current(){return l.current},set current(n){l.current=n,e(n)}}}),[e,l].concat(ge(i)))}function Qe(e,n){var r=t((function(e,n){Array.isArray(e)?e.forEach(r):"function"==typeof e?e(n):e&&(e.current=n)}),[]);return Je(t((function(n){return r(e,n)}),[e,r]),{initialValue:n})}var en,nn,rn,tn,on,an,ln,dn,sn,cn,un,pn,fn,gn,bn,hn,vn,mn,yn,xn,wn,En=function(e){var n=fe(i(e),2),r=n[0];return Je(n[1],{initialValue:e,deps:[r]})},On=j("select-popover"),kn=M[2],Nn=u(en||(en=pe(["\n  position: relative;\n  text-align: left;\n  width: 100%;\n  border-radius: 3px;\n  line-height: 16px;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  overflow: auto;\n"]))),Sn=u(nn||(nn=pe(["\n  width: max-content;\n"]))),_n=function(e,n){var r=_e[n],t=Se[e];return c(u(rn||(rn=pe(["\n      min-height: ","px;\n      border-radius: 12px;\n      box-shadow: 0 4px 7px 0 ",";\n      padding: ","px 0;\n      background-color: ",";\n      border: 1px solid ",";\n    "])),r.height,t.menu.shadow,M[200],R[e].background.primary.default,R[e].border.secondary.default))},Cn=e.forwardRef((function(n,r){var o=n.children,i=n.id,a=n.referenceElement,d=n.className,p=n.labelId,f=n.dropdownWidthBasis,b=n.usePortal,h=void 0===b||b,v=n.portalContainer,m=n.portalRef,O=n.scrollContainer,k=n.portalClassName,N=n.popoverZIndex,S=n.onEntering,_=n.onEnter,C=n.onEntered,j=n.onExiting,I=n.onExit,D=n.onExited,P=y().theme,z=l(Ne),A=z.size,T=z.disabled,M=z.open,L=Qe(r,null),R=g(a,kn),B=s(R)?"unset":"".concat(Math.min(R,274),"px"),F=t((function(e){L.current&&L.current.focus(),e.stopPropagation()}),[L]),G=le({popoverZIndex:N,onEntering:S,onEnter:_,onEntered:C,onExiting:j,onExit:I,onExited:D},h?{usePortal:h,portalClassName:k,portalContainer:v,portalRef:m,scrollContainer:O}:{usePortal:h});return e.createElement(x,ce({active:M&&!T,spacing:6,align:w.Bottom,justify:E.Start,adjustOnMutation:!0,className:c(On,d,se({},Sn,f===ke.Option)),refEl:a},G),e.createElement("ul",{"data-lgid":ie.popover,"aria-labelledby":p,role:"listbox",ref:L,tabIndex:-1,onClick:F,className:c(Nn,_n(P,A),u(tn||(tn=pe(["\n              max-height: ",";\n              "," {\n                font-size: ","px;\n              }\n            "])),B,Ue,Pe.text)),id:i},o))}));Cn.displayName="ListMenu";var jn,In,Dn,Pn,zn,An,Tn=j("select-menu"),Mn=u(on||(on=pe(["\n  // Override button defaults\n  font-weight: ",";\n  > *:last-child {\n    grid-template-columns: 1fr 16px;\n    justify-content: flex-start;\n\n    > svg {\n      justify-self: right;\n      width: 16px;\n      height: 16px;\n    }\n  }\n"])),T.regular),Ln=se(se(se(se({},F.Default,u(an||(an=pe(["\n    > *:last-child {\n      padding: 0 ","px 0 ","px;\n    }\n  "])),M[200],M[300])),F.Large,u(ln||(ln=pe(["\n    > *:last-child {\n      padding: 0 ","px 0 ","px;\n    }\n  "])),M[200],M[300])),F.Small,u(dn||(dn=pe(["\n    > *:last-child {\n      padding: 0 ","px 0 ","px;\n    }\n  "])),M[100],M[200])),F.XSmall,u(sn||(sn=pe(["\n    text-transform: none;\n    font-size: ","px;\n    line-height: ","px;\n    > *:last-child {\n      padding: 0 ","px 0 ","px;\n    }\n  "])),B.body1.fontSize,B.body1.lineHeight,M[100],M[200])),Rn=se(se({},C.Light,u(cn||(cn=pe(["\n    background-color: ",";\n    // Override button default color\n    > *:last-child {\n      > svg {\n        color: ",";\n      }\n    }\n  "])),R.light.background.primary.default,R.light.icon.primary.default)),C.Dark,u(un||(un=pe(["\n    border-color: ",";\n    background-color: ",";\n    color: ",";\n\n    // Override button default color\n    > *:last-child {\n      > svg {\n        color: ",";\n      }\n    }\n\n    &:hover,\n    &:active,\n    &:focus {\n      background-color: ",";\n      color: ",";\n    }\n  "])),R.dark.border.primary.default,z.gray.dark4,R.dark.text.primary.default,R.dark.icon.primary.default,z.gray.dark4,R.dark.text.primary.hover)),Bn=se(se({},C.Light,u(pn||(pn=pe(["\n    &:focus-visible {\n      box-shadow: ",";\n      border-color: rgba(255, 255, 255, 0);\n    }\n  "])),G.light.input)),C.Dark,u(fn||(fn=pe(["\n    &:focus-visible {\n      background-color: ",";\n      box-shadow: ",";\n      border-color: rgba(255, 255, 255, 0);\n    }\n  "])),z.gray.dark4,G.dark.input)),Fn=se(se({},C.Light,u(gn||(gn=pe(["\n    color: ",";\n  "])),z.gray.base)),C.Dark,u(bn||(bn=pe(["\n    color: ",";\n\n    &:hover,\n    &:active,\n    &:focus {\n      color: ",";\n    }\n  "])),z.gray.dark1,z.gray.light1)),Gn=u(vn||(vn=pe(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-grow: 1;\n  gap: ","px;\n  overflow: hidden;\n"])),M[100]),Vn=u(mn||(mn=pe(["\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 100%;\n"]))),Hn=["children","value","text","name","deselected","readOnly","onClose","onOpen","state","baseFontSize","__INTERNAL__menuButtonSlot__","__INTERNAL__menuButtonSlotProps__"],Wn=e.forwardRef((function(n,r){var o,i=n.children,a=n.value,d=n.text,s=n.name,p=n.deselected;n.readOnly;var f=n.onClose,g=n.onOpen,b=n.state,h=n.baseFontSize,v=n.__INTERNAL__menuButtonSlot__,m=n.__INTERNAL__menuButtonSlotProps__,x=ue(n,Hn),w=y().theme,E=l(Ne),O=E.open,k=E.size,N=E.disabled,S=Qe(r,null),_=t((function(){O?f():g(),S.current.focus()}),[f,g,O,S]),j=v||X,I=v?"":c(Mn,Rn[w],Ln[k],Bn[w],se(se(se(se({},function(e){return se(se(se({},Oe.Error,u(yn||(yn=pe(["\n    border-color: ",";\n\n    &:hover,\n    &:active {\n      border-color: ",";\n      box-shadow: ",";\n    }\n  "])),R[e].border.error.default,R[e].border.error.hover,V[e].red)),Oe.None,u(xn||(xn=pe([""])))),Oe.Valid,u(wn||(wn=pe(["\n    border-color: ",";\n\n    &:hover,\n    &:active {\n      border-color: ",";\n      box-shadow: ",";\n    }\n  "])),R[e].border.success.default,R[e].border.success.hover,V[e].green))}(w)[b||Oe.None],!!b),Fn[w],p),function(e){return u(hn||(hn=pe(["\n  cursor: not-allowed;\n  pointer-events: unset;\n  box-shadow: unset;\n\n  &:active {\n    pointer-events: none;\n  }\n\n  &[aria-disabled='true'] {\n    background-color: ",";\n    border-color: ",";\n    color: ",";\n\n    &:hover,\n    &:active {\n      box-shadow: inherit;\n    }\n\n    > *:last-child {\n      > svg {\n        color: ",";\n      }\n    }\n  }\n"])),R[e].background.disabled.default,R[e].border.disabled.default,R[e].text.disabled.default,R[e].icon.disabled.default)}(w),N),u(jn||(jn=pe(["\n              letter-spacing: initial;\n            "]))),k===Y.XSmall),u(In||(In=pe(["\n            width: 100%;\n            "," {\n              height: ","px;\n              font-size: ","px;\n            }\n          "])),Ue,Ce,je)),D=null!==(o=x["data-testid"])&&void 0!==o?o:"leafygreen-ui-select-menubutton";return e.createElement(j,ce({},x,m,{ref:S,name:s,value:a,disabled:N,onClick:_,variant:$.Default,darkMode:w===C.Dark,rightGlyph:e.createElement(J,null),size:k,"data-testid":D,className:c(I,se({},u(Dn||(Dn=pe(["\n              font-size: ","px;\n            "])),h),k===Y.Default),null==m?void 0:m.className)}),e.createElement("div",{className:Gn},e.createElement("div",{"data-lgid":ie.buttonText,className:c(Tn,Vn)},d)),i)}));Wn.displayName="MenuButton";var Un,Zn,qn,Kn,Xn,Yn,$n=u(Pn||(Pn=pe(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: ","px;\n"])),M[1]),Jn=u(zn||(zn=pe(["\n  display: flex;\n  flex-direction: column;\n"]))),Qn=u(An||(An=pe(["\n  font-size: ","px;\n  line-height: ","px;\n"])),B.large.fontSize,B.large.lineHeight),er=["children","darkMode","size","disabled","allowDeselect","usePortal","placeholder","errorMessage","successMessage","state","dropdownWidthBasis","baseFontSize","data-lgid","id","aria-labelledby","aria-label","className","label","description","name","defaultValue","value","onChange","readOnly","portalContainer","portalRef","scrollContainer","portalClassName","popoverZIndex","onEntering","onEnter","onEntered","onExiting","onExit","onExited","__INTERNAL__menuButtonSlot__"],nr=d((function(n,r){var l,d=n.children,s=n.darkMode,p=n.size,g=void 0===p?Ee.Default:p,x=n.disabled,w=void 0!==x&&x,E=n.allowDeselect,O=void 0===E||E,S=n.usePortal,_=void 0===S||S,C=n.placeholder,j=void 0===C?"Select":C,I=n.errorMessage,D=void 0===I?k.error:I,z=n.successMessage,A=void 0===z?k.success:z,T=n.state,M=void 0===T?Oe.None:T,L=n.dropdownWidthBasis,R=void 0===L?ke.Trigger:L,B=n.baseFontSize,F=void 0===B?H.Body1:B,G=n["data-lgid"],V=void 0===G?ie.root:G,W=n.id,U=n["aria-labelledby"],Z=n["aria-label"],q=n.className,K=n.label,X=n.description,Y=n.name,$=n.defaultValue,J=n.value,ne=n.onChange,re=n.readOnly,te=n.portalContainer,oe=n.portalRef,ae=n.scrollContainer,de=n.portalClassName,ge=n.popoverZIndex,be=n.onEntering,he=n.onEnter,ve=n.onEntered,me=n.onExiting,ye=n.onExit,xe=n.onExited,we=n.__INTERNAL__menuButtonSlot__,Se=ue(n,er),_e=f({prefix:"select",id:W}),Ce=a((function(){return Z&&!K?void 0:null!=U?U:"".concat(_e,"-label")}),[U,Z,K,_e]);K||U||Z||console.error("For screen-reader accessibility, label, aria-label, or aria-labelledby must be provided to Select.");var je=y(s).darkMode,Pe="".concat(_e,"-description"),ze="".concat(_e,"-menu"),Ae=fe(i(!1),2),Me=Ae[0],Le=Ae[1],Re=b(r,null),Be=En(null),Fe=f({prefix:"select"}),Ge=En(null),Ve=a((function(){return{size:g,open:Me,disabled:w}}),[g,Me,w]);o((function(){void 0!==J&&void 0===ne&&!0!==re&&console.warn("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")}),[ne,re,J]);var He=t((function(){Le(!0)}),[]),We=t((function(){Le(!1),Be.current.focus()}),[Be]);o((function(){if(Me){var e=function(e){var n=Be.current.contains(e.target)||Ge.current.contains(e.target);Le(n)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}}),[Ge,Be,Me]);var Ze=a((function(){var e=null;return void 0===J&&void 0!==$&&qe(d,(function(n,r){$e(n,r,$)&&(e=n)})),e}),[d,$,J]),Je=fe(i(Ze),2),Qe=Je[0],en=Je[1];o((function(){var e;null!==Qe&&en(null!==(e=function(e,n){var r,t,o,i,a,l,d,s;return qe(e,(function(e){if(e===n)a=n;else if(e.props.children===n.props.children&&e.props.value===n.props.value){var r;null!==(r=l)&&void 0!==r||(l=e)}else if(void 0!==e.props.value&&e.props.value===n.props.value){var t;null!==(t=d)&&void 0!==t||(d=e)}else if(Xe(e)===Xe(n)){var o;null!==(o=s)&&void 0!==o||(s=e)}})),null!==(r=null!==(t=null!==(o=null!==(i=a)&&void 0!==i?i:l)&&void 0!==o?o:d)&&void 0!==t?t:s)&&void 0!==r?r:null}(d,Qe))&&void 0!==e?e:Ze)}),[d,Ze,Qe]);var nn=a((function(){if(void 0!==J){var e=null;return qe(d,(function(n,r){$e(n,r,J)&&(e=n)})),e}return Qe}),[d,Qe,J]),rn=t((function(e,n){n.preventDefault(),n.stopPropagation(),void 0===J&&en(e),null==ne||ne(Xe(e),n),ln(void 0),We()}),[ne,We,J]),tn=t((function(e,n){return function(r){r.preventDefault(),r.stopPropagation(),w||n||(rn(e,r),We())}}),[w,We,rn]),on=fe(i(),2),an=on[0],ln=on[1],dn=a((function(){var e=[];return O&&e.push(null),qe(d,(function(n,r){Ye(n,r)||e.push(n)})),e}),[d,O]),sn=t((function(e){void 0!==an&&rn(an,e)}),[an,rn]),cn=t((function(){ln(dn[0])}),[dn]),un=t((function(){ln(dn[dn.length-1])}),[dn]),pn=t((function(){if(void 0===an||0===dn.indexOf(an))un();else{var e=dn.indexOf(an)-1;ln(dn[e])}}),[dn,an,un]),fn=t((function(){if(void 0===an||dn.indexOf(an)===dn.length-1)cn();else{var e=dn.indexOf(an)+1;ln(dn[e])}}),[dn,an,cn]),gn=t((function(e,n){return function(r){r.preventDefault(),r.stopPropagation(),w||n||ln(e)}}),[w]),bn=t((function(e){var n,r;if(!(e.ctrlKey||e.shiftKey||e.altKey)){var t=null===(n=Ge.current)||void 0===n?void 0:n.contains(document.activeElement),o=null===(r=Be.current)||void 0===r?void 0:r.contains(document.activeElement);if(o||t)switch(e.key){case P.Tab:case P.Escape:We(),ln(void 0);break;case P.Enter:case P.Space:Me&&!o&&e.preventDefault(),sn(e);break;case P.ArrowUp:!Me&&o&&He(),e.preventDefault(),pn();break;case P.ArrowDown:!Me&&o&&He(),e.preventDefault(),fn()}}}),[Ge,Be,We,Me,sn,pn,fn,He]);h("keydown",bn);var hn=v(),vn=a((function(){var e=!1;return qe(d,(function(n){e||(e=void 0!==n.props.glyph)})),e}),[d]),mn=a((function(){return null!==hn&&null!==Ge.current&&void 0===an&&Me}),[an,Ge,Me,hn]),yn=a((function(){var n=null===nn;return e.createElement(Te,{className:void 0,glyph:void 0,selected:n,focused:null===an,disabled:!1,onClick:tn(null,!1),onFocus:gn(null,!1),hasGlyphs:!1,triggerScrollIntoView:n&&mn},j)}),[mn,an,tn,gn,j,nn]),xn=a((function(){return Ke(d,(function(e,n){var r=e===nn,t=Ye(e,n);return le(le({},e.props),{},{className:e.props.className,glyph:e.props.glyph,selected:r,focused:e===an,disabled:t,children:e.props.children,hasGlyphs:vn,onClick:tn(e,t),onFocus:gn(e,t),triggerScrollIntoView:r&&mn})}),(function(){console.error("`Select` instance received child that is not `Option` or `OptionGroup`.")}))}),[mn,d,an,tn,gn,vn,nn]),wn=le({popoverZIndex:ge,onEntering:be,onEnter:he,onEntered:ve,onExiting:me,onExit:ye,onExited:xe},_?{usePortal:_,portalClassName:de,portalContainer:te,portalRef:oe,scrollContainer:ae}:{usePortal:_});return e.createElement(m,{darkMode:je},e.createElement("div",{ref:Re,className:c(Jn,q),"data-lgid":V},(K||X)&&e.createElement("div",{className:$n},K&&e.createElement(Q,{htmlFor:Fe,id:Ce,darkMode:je,disabled:w,className:c(se(se({},Qn,g===Ee.Large),u(Un||(Un=pe(["\n                        font-size: ","px;\n                        line-height: 20px;\n                      "])),F),g===Ee.Default),u(Zn||(Zn=pe(["\n                      // Prevent hover state from showing when hovering label\n                      pointer-events: none;\n                    "]))),u(qn||(qn=pe(["\n                      "," {\n                        font-size: ","px;\n                        line-height: ","px;\n                      }\n                    "])),Ue,Ie.text,Ie.lineHeight))},K),X&&e.createElement(ee,{id:Pe,darkMode:je,disabled:w,className:c(se(se({},Qn,g===Ee.Large),u(Kn||(Kn=pe(["\n                        font-size: ","px;\n                        line-height: 20px;\n                      "])),F),g===Ee.Default),u(Xn||(Xn=pe(["\n                      "," {\n                        font-size: ","px;\n                        line-height: ","px;\n                      }\n                    "])),Ue,De.text,De.lineHeight))},X)),e.createElement(Ne.Provider,{value:Ve},e.createElement(Wn,ce({},Se,{id:Fe,ref:Be,name:Y,readOnly:re,value:Xe(nn),text:null!==nn?nn.props.children:j,deselected:null===nn,onOpen:He,onClose:We,"aria-labelledby":Ce,"aria-label":K||U?void 0:Z,"aria-controls":ze,"aria-expanded":Me,"aria-describedby":Pe,"aria-invalid":M===Oe.Error,"aria-disabled":w,state:M,baseFontSize:F,__INTERNAL__menuButtonSlot__:we}),e.createElement(Cn,ce({labelId:Ce,id:ze,referenceElement:Be,ref:Ge,className:c(se({},u(Yn||(Yn=pe(["\n                    width: ","px;\n                  "])),null===(l=Be.current)||void 0===l?void 0:l.clientWidth),R===ke.Trigger)),dropdownWidthBasis:R},wn),O&&yn,xn))),e.createElement(N,{disabled:w,errorMessage:D,hideFeedback:Me,size:g,state:M,successMessage:A})))}));nr.displayName="Select",nr.propTypes={label:W.string,"aria-labelledby":W.string,"aria-label":W.string,description:W.node,placeholder:W.string,className:W.string,darkMode:W.bool,size:W.oneOf(Object.values(Ee)),disabled:W.bool,id:W.string,value:W.string,defaultValue:W.string,onChange:W.func,readOnly:W.bool,errorMessage:W.node,successMessage:W.node,state:W.oneOf(Object.values(Oe)),allowDeselect:W.bool,baseFontSize:W.oneOf(Object.values(H)),dropdownWidthBasis:W.oneOf(Object.values(ke)),portalRef:W.shape({current:"undefined"!=typeof window?W.instanceOf(Element):W.any})};var rr=function(){var e=re(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie.root),n=te(e,"[data-lgid=".concat(ne.label,"]")),r=te(e,"[data-lgid=".concat(ne.description,"]")),t=te(e,"button"),o=te(e,"[data-lgid=".concat(S.errorMessage,"]")),i=function(){return te(document.body,"[data-lgid=".concat(ie.popover,"]"))},a=function(){var e=i();if(!e)throw new Error("Unable to find an element by: [data-lgid=".concat(ie.popover,"]"));var n=e.querySelectorAll('[role="option"]');if(!n.length)throw new Error("Unable to find any `Select` options.");return Array.from(n)};return{getLabel:function(){return n},getDescription:function(){return r},getInput:function(){return t},getErrorMessage:function(){return o},getOptions:function(){return a()},getOptionByValue:function(e){return function(e){if(!e)throw new Error("Value cannot be empty");var n=a().find((function(n){return n.textContent===e}));return n||null}(e)},getPopover:function(){return i()},isDisabled:function(){return!!te(e,'[aria-disabled="true"]')},isError:function(){return!!te(e,'svg[title="Error"]')},getInputValue:function(){return te(t,"[data-lgid=".concat(ie.buttonText,"]")).textContent||""}}};export{ke as DropdownWidthBasis,ie as LGIDS_SELECT,Me as Option,Ve as OptionGroup,nr as Select,Ee as Size,Oe as State,rr as getTestUtils,Tn as menuButtonTextClassName,On as popoverClassName};
//# sourceMappingURL=index.js.map
