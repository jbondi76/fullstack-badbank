{"version":3,"file":"index.js","sources":["../src/constants.ts","../src/Select/Select.types.ts","../src/Option/Option.tsx","../src/OptionGroup/OptionGroup.styles.ts","../src/SelectContext.tsx","../src/styleSets.ts","../src/Option/Options.styles.ts","../src/OptionGroup/OptionGroup.tsx","../src/utils/utils.tsx","../src/ListMenu/ListMenu.styles.ts","../src/ListMenu/ListMenu.tsx","../src/MenuButton/MenuButton.styles.ts","../src/MenuButton/MenuButton.tsx","../src/Select/Select.styles.ts","../src/Select/Select.tsx","../src/utils/getTestUtils/getTestUtils.ts"],"sourcesContent":["const LGID_ROOT = 'lg-select';\n\nexport const LGIDS_SELECT = {\n  root: LGID_ROOT,\n  errorMessage: `${LGID_ROOT}-error_message`,\n  popover: `${LGID_ROOT}-popover`,\n  buttonText: `${LGID_ROOT}-button_text`,\n} as const;\n","import React from 'react';\n\nimport { ButtonProps } from '@leafygreen-ui/button';\nimport { FormFieldState } from '@leafygreen-ui/form-field';\nimport {\n  DarkModeProps,\n  Either,\n  HTMLElementProps,\n  LgIdProps,\n} from '@leafygreen-ui/lib';\nimport { PopoverProps } from '@leafygreen-ui/popover';\nimport { BaseFontSize } from '@leafygreen-ui/tokens';\n\nexport const Size = {\n  XSmall: 'xsmall',\n  Small: 'small',\n  Default: 'default',\n  Large: 'large',\n} as const;\nexport type Size = (typeof Size)[keyof typeof Size];\n\nexport const State = FormFieldState;\nexport type State = (typeof State)[keyof typeof State];\n\nexport const DropdownWidthBasis = {\n  Trigger: 'trigger',\n  Option: 'option',\n} as const;\n\nexport type DropdownWidthBasis =\n  (typeof DropdownWidthBasis)[keyof typeof DropdownWidthBasis];\n\nexport interface BaseSelectProps\n  extends Omit<\n      HTMLElementProps<'button', HTMLButtonElement>,\n      'onChange' | 'onClick'\n    >,\n    Omit<PopoverProps, 'active' | 'spacing'>,\n    DarkModeProps,\n    LgIdProps {\n  /**\n   * Children rendered inside the component. Expected to be either `<Option>` or `<OptionGroup>`.\n   *\n   * @type `<Option />` | `<OptionGroup/>`\n   */\n  children: React.ReactNode;\n\n  /**\n   * HTML `id` property used to allow Javascript, form, or label to reference the input.\n   */\n  id?: string;\n\n  /**\n   * Determines the size in which the component will be rendered.\n   */\n  size?: Size;\n\n  /**\n   * When present, it specifies that the drop-down list should be disabled.\n   *\n   * A `disabled` drop-down list is unusable and un-clickable.\n   */\n  disabled?: boolean;\n\n  /**\n   * Secondary text rendered under the label to provide additional details about the select and its options.\n   */\n  description?: React.ReactNode;\n\n  /**\n   * Text rendered in the Select component before a value is set.\n   */\n  placeholder?: string;\n\n  /**\n   * The `name` attribute specifies the name for a drop-down list.\n   *\n   * The `name` attribute is used to reference elements in a JavaScript, or to reference form data after a form is submitted.\n   */\n  name?: string;\n\n  /**\n   * Allows the user to unselect an option.\n   */\n  allowDeselect?: boolean;\n\n  /**\n   * Error message rendered when the `state` prop is set to `error`.\n   */\n  errorMessage?: React.ReactNode;\n\n  /**\n   * Success message rendered when the `state` prop is set to `valid`.\n   */\n  successMessage?: React.ReactNode;\n\n  /**\n   * Determines whether the component should be rendered in an error state.\n   */\n  state?: State;\n\n  /**\n   *  determines the base font size if sizeVariant is set to default.\n   */\n  baseFontSize?: BaseFontSize;\n\n  /**\n   *  Determines the width of the dropdown. `trigger` will make the dropdown width the width of the menu button. `option` will make the dropdown width as wide as the widest option.\n   *\n   * @default 'trigger'\n   */\n  dropdownWidthBasis?: DropdownWidthBasis;\n\n  /**\n   * @internal\n   */\n  __INTERNAL__menuButtonSlot__?: React.ForwardRefExoticComponent<\n    React.RefAttributes<unknown>\n  >;\n\n  /**\n   * @internal\n   */\n  __INTERNAL__menuButtonSlotProps__?: Partial<ButtonProps> &\n    Record<string, any>;\n}\n\nexport interface LabelProp {\n  label: string;\n  'aria-labelledby': string;\n  'aria-label': string;\n}\n\nexport type SelectProps = BaseSelectProps &\n  Either<LabelProp, 'label' | 'aria-labelledby' | 'aria-label'> &\n  (\n    | // Uncontrolled\n    ({\n        /**\n         * `value` makes the component a controlled component and using `defaultValue` makes it uncontrolled.\n         */\n        defaultValue?: string;\n        /**\n         * `value` makes the component a controlled component and using `defaultValue` makes it uncontrolled.\n         */\n        value?: undefined;\n      } & {\n        /**\n         * A function that takes in the value of the selected option, and the event that was used to select the value (i.e. React.MouseEvent | KeyboardEvent | React.KeyboardEvent).\n         *\n         * Note: This API is different from the native HTML `<select>` element's `onChange` prop given the current technical design of this component.\n         */\n        onChange?: (\n          value: string,\n          event: React.MouseEvent | KeyboardEvent | React.KeyboardEvent,\n        ) => void;\n        /**\n         * Indicates that the component's value cannot be changed.\n         */\n        readOnly?: false;\n      })\n    // Controlled\n    | ({ value: string; defaultValue?: undefined } & (\n        | {\n            /**\n             * A function that takes in the value of the selected option, and the event that was used to select the value (i.e. React.MouseEvent | KeyboardEvent | React.KeyboardEvent).\n             *\n             * Note: This API is different from the native HTML `<select>` element's `onChange` prop given the current technical design of this component.\n             */\n            onChange: (\n              value: string,\n              event: React.MouseEvent | KeyboardEvent | React.KeyboardEvent,\n            ) => void;\n            readOnly?: false;\n          }\n        | { readOnly: true; onChange?: undefined }\n      ))\n  );\n","import React, { useCallback, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { css, cx } from '@leafygreen-ui/emotion';\nimport { usePrevious } from '@leafygreen-ui/hooks';\nimport { isComponentGlyph } from '@leafygreen-ui/icon';\nimport CheckmarkIcon from '@leafygreen-ui/icon/dist/Checkmark';\nimport { InputOption, InputOptionContent } from '@leafygreen-ui/input-option';\nimport { useDarkMode } from '@leafygreen-ui/leafygreen-provider';\nimport { fontWeights } from '@leafygreen-ui/tokens';\n\nimport { colorSets } from '../styleSets';\n\nimport { InternalProps, OptionProps } from './Option.types';\nimport { OptionClassName } from './Options.styles';\n\nexport function InternalOption({\n  children,\n  className,\n  glyph,\n  selected,\n  focused,\n  disabled,\n  onClick,\n  onFocus,\n  triggerScrollIntoView,\n  hasGlyphs,\n  description,\n  ...rest\n}: InternalProps) {\n  const { theme } = useDarkMode();\n\n  const { option: colorSet } = colorSets[theme];\n\n  const ref = useRef<HTMLLIElement>(null);\n\n  const scrollIntoView = useCallback(() => {\n    if (ref.current == null) {\n      return null;\n    }\n\n    const element = ref.current;\n    const parent = element?.offsetParent;\n\n    if (!parent) {\n      return null;\n    }\n\n    // Can't use Element.scrollIntoView because it might\n    // cause scrolling outside the immediate parent.\n    parent.scrollTop =\n      element.offsetTop + (element.clientHeight - parent.clientHeight) / 2;\n  }, [ref]);\n\n  const alreadyScrolledIntoView = usePrevious(triggerScrollIntoView);\n  const shouldScrollIntoView =\n    triggerScrollIntoView && !alreadyScrolledIntoView;\n\n  useEffect(() => {\n    if (shouldScrollIntoView) {\n      scrollIntoView();\n    }\n  }, [scrollIntoView, shouldScrollIntoView]);\n\n  const wasFocused = usePrevious(focused);\n  const shouldFocus = focused && !wasFocused;\n\n  useEffect(() => {\n    if (shouldFocus) {\n      ref.current!.focus();\n    }\n  }, [shouldFocus]);\n\n  if (glyph) {\n    if (!isComponentGlyph(glyph)) {\n      console.error(\n        '`Option` instance did not render icon because it is not a known glyph element.',\n      );\n    }\n  }\n\n  const glyphProp = glyph && isComponentGlyph(glyph) ? glyph : undefined;\n\n  const checkmark = selected ? (\n    <CheckmarkIcon\n      key=\"checkmark\"\n      className={cx(\n        css`\n          color: ${colorSet.icon.selected};\n        `,\n        {\n          [css`\n            color: ${colorSet.icon.disabled};\n          `]: disabled,\n        },\n      )}\n    />\n  ) : undefined;\n\n  const leftGlyph = hasGlyphs ? glyphProp : checkmark;\n  const rightGlyph = hasGlyphs ? checkmark : undefined;\n\n  return (\n    <InputOption\n      aria-label={typeof children === 'string' ? children : 'option'}\n      {...rest}\n      disabled={disabled}\n      role=\"option\"\n      tabIndex={-1}\n      ref={ref}\n      className={cx(OptionClassName, className)}\n      onClick={onClick}\n      onFocus={onFocus}\n      onKeyDown={undefined}\n      checked={selected}\n      highlighted={focused}\n    >\n      <InputOptionContent\n        leftGlyph={leftGlyph}\n        rightGlyph={rightGlyph}\n        description={description}\n      >\n        <span\n          className={cx({\n            [css`\n              font-weight: ${fontWeights.bold};\n            `]: selected,\n          })}\n        >\n          {children}\n        </span>\n      </InputOptionContent>\n    </InputOption>\n  );\n}\n\nInternalOption.displayName = 'Option';\n\nexport function Option(_: OptionProps): JSX.Element {\n  throw Error('`Option` must be a child of a `Select` instance');\n}\n\nOption.displayName = 'Option';\n\nOption.propTypes = {\n  children: PropTypes.node.isRequired,\n  className: PropTypes.string,\n  glyph: PropTypes.element,\n  value: PropTypes.string,\n  disabled: PropTypes.bool,\n  description: PropTypes.string,\n};\n\n// React.ReactComponentElement messes up the original\n// typing of props, so it is fixed up by overriding it.\nexport type OptionElement = Omit<\n  React.ReactComponentElement<typeof Option>,\n  'props'\n> & { props: OptionProps };\n","import { css } from '@leafygreen-ui/emotion';\nimport { fontWeights, spacing } from '@leafygreen-ui/tokens';\n\nexport const optionGroupStyle = css`\n  padding: ${spacing[2]}px 0;\n`;\n\nexport const optionGroupLabelStyle = css`\n  cursor: default;\n  width: 100%;\n  padding: 0 12px 2px;\n  outline: none;\n  overflow-wrap: anywhere;\n  font-size: 12px;\n  line-height: 16px;\n  font-weight: ${fontWeights.bold};\n  text-transform: uppercase;\n  letter-spacing: 0.4px;\n`;\n","import { createContext } from 'react';\n\nimport { Size } from './Select/Select.types';\n\ninterface SelectData {\n  size: Size;\n  open: boolean;\n  disabled: boolean;\n}\n\nexport const SelectContext = createContext<SelectData>({\n  size: Size.Default,\n  open: false,\n  disabled: false,\n});\n\nexport default SelectContext;\n","import { transparentize } from 'polished';\n\nimport { Theme } from '@leafygreen-ui/lib';\nimport { palette } from '@leafygreen-ui/palette';\n\nimport { Size } from './Select/Select.types';\n\ninterface ColorSet {\n  menu: {\n    shadow: string;\n    border?: string;\n  };\n  option: {\n    group: {\n      label: string;\n    };\n    background: {\n      base: string;\n      hovered: string;\n      focused: string;\n    };\n    text: {\n      base: string;\n      selected: string;\n      disabled: string;\n      focused: string;\n    };\n    icon: {\n      base: string;\n      selected: string;\n      disabled: string;\n    };\n    indicator: {\n      focused: string;\n    };\n  };\n}\n\nexport const colorSets: Record<Theme, ColorSet> = {\n  [Theme.Light]: {\n    menu: {\n      border: palette.gray.light2,\n      shadow: transparentize(0.75, palette.black),\n    },\n    option: {\n      group: {\n        label: palette.gray.dark1,\n      },\n      background: {\n        base: palette.white,\n        hovered: palette.gray.light2,\n        focused: palette.blue.light3,\n      },\n      text: {\n        base: palette.gray.dark3,\n        selected: palette.blue.base,\n        disabled: palette.gray.base,\n        focused: palette.blue.dark2,\n      },\n      icon: {\n        base: palette.gray.dark1,\n        selected: palette.blue.base,\n        disabled: palette.gray.base,\n      },\n      indicator: {\n        focused: palette.blue.base,\n      },\n    },\n  },\n\n  [Theme.Dark]: {\n    menu: {\n      border: palette.gray.dark2,\n      shadow: transparentize(0.85, '#000000'),\n    },\n    option: {\n      group: {\n        label: palette.gray.base,\n      },\n      background: {\n        base: palette.gray.dark3,\n        hovered: palette.gray.dark4,\n        focused: palette.blue.dark3,\n      },\n      text: {\n        base: palette.gray.light2,\n        selected: palette.gray.light2,\n        disabled: palette.gray.base,\n        focused: palette.blue.light3,\n      },\n      icon: {\n        base: palette.gray.base,\n        selected: palette.blue.light1,\n        disabled: palette.gray.base,\n      },\n      indicator: {\n        focused: palette.blue.light1,\n      },\n    },\n  },\n};\n\nexport interface SizeSet {\n  height: number;\n  text: number;\n  lineHeight?: number;\n  option: {\n    text: number;\n  };\n  warningIcon: number;\n  label?: {\n    text: number;\n    lineHeight: number;\n  };\n  description?: {\n    text: number;\n    lineHeight: number;\n  };\n}\n\nexport const sizeSets: Record<Size, SizeSet> = {\n  [Size.XSmall]: {\n    height: 22,\n    text: 13,\n    option: {\n      text: 13,\n    },\n    warningIcon: 16,\n  },\n  [Size.Small]: {\n    height: 28,\n    text: 13,\n    option: {\n      text: 13,\n    },\n    warningIcon: 16,\n  },\n  [Size.Default]: {\n    height: 36,\n    text: 13,\n    option: {\n      text: 13,\n    },\n    warningIcon: 16,\n  },\n  [Size.Large]: {\n    height: 48,\n    text: 18,\n    option: {\n      text: 16,\n    },\n    warningIcon: 16,\n  },\n};\n\ninterface MobileSizeSet {\n  height: number;\n  text: number;\n  label: {\n    text: number;\n    lineHeight: number;\n  };\n  description: {\n    text: number;\n    lineHeight: number;\n  };\n  option: {\n    text: number;\n  };\n  warningIcon: number;\n}\n\nexport const mobileSizeSet: MobileSizeSet = {\n  height: 36,\n  text: 16,\n  label: {\n    text: 16,\n    lineHeight: 19,\n  },\n  description: {\n    text: 16,\n    lineHeight: 22,\n  },\n  option: {\n    text: 16,\n  },\n  warningIcon: 14,\n};\n","import { createUniqueClassName } from '@leafygreen-ui/lib';\n\nexport const OptionClassName = createUniqueClassName('option');\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { css, cx } from '@leafygreen-ui/emotion';\nimport { useIdAllocator } from '@leafygreen-ui/hooks';\nimport { useDarkMode } from '@leafygreen-ui/leafygreen-provider';\n\nimport { colorSets } from '../styleSets';\n\nimport { optionGroupLabelStyle, optionGroupStyle } from './OptionGroup.styles';\nimport { InternalOptionProps, OptionGroupProps } from './OptionGroup.types';\n\nexport function InternalOptionGroup({\n  className,\n  label,\n  children,\n  ...rest\n}: InternalOptionProps) {\n  const { theme } = useDarkMode();\n  const colorSet = colorSets[theme].option;\n\n  const groupId = useIdAllocator({ prefix: 'select-option-group' });\n\n  return (\n    <div className={cx(optionGroupStyle, className)} {...rest}>\n      <div\n        id={groupId}\n        className={cx(\n          optionGroupLabelStyle,\n          css`\n            color: ${colorSet.group.label};\n          `,\n        )}\n      >\n        {label}\n      </div>\n      <div role=\"group\" aria-labelledby={groupId}>\n        {children}\n      </div>\n    </div>\n  );\n}\n\nInternalOptionGroup.displayName = 'OptionGroup';\n\nexport function OptionGroup(_: OptionGroupProps): JSX.Element {\n  throw Error('`OptionGroup` must be a child of a `Select` instance');\n}\n\nOptionGroup.displayName = 'OptionGroup';\n\nOptionGroup.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(\n      PropTypes.oneOfType([\n        PropTypes.oneOf([false, null, undefined, '']),\n        PropTypes.element,\n      ]),\n    ),\n  ]).isRequired,\n  className: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n};\n\nexport type OptionGroupElement = React.ReactComponentElement<\n  typeof OptionGroup\n>;\n","import React, { useCallback, useMemo, useRef, useState } from 'react';\nimport { isFragment } from 'react-is';\n\nimport { consoleOnce, isComponentType } from '@leafygreen-ui/lib';\nimport { breakpoints } from '@leafygreen-ui/tokens';\n\nimport {\n  InternalOption,\n  InternalProps as InternalOptionProps,\n  OptionElement,\n  ReactEmpty,\n} from '../Option';\nimport { InternalOptionGroup, OptionGroupElement } from '../OptionGroup';\n\n// Any screen smaller than a tablet with no pointer, or a coarse pointer and no hover capability (i.e. touch screen)\n// For more details, see: https://css-tricks.com/touch-devices-not-judged-size/\nconst _baseQuery = `@media only screen and (max-width: ${breakpoints.Tablet}px) and (hover: none)`;\nexport const MobileMediaQuery = `${_baseQuery} and (pointer: coarse), ${_baseQuery} and (pointer: none)`;\n\nfunction isReactEmpty(value: React.ReactNode): value is ReactEmpty {\n  return (\n    value === undefined || value === null || value === false || value === ''\n  );\n}\n\nexport function traverseSelectChildren(\n  children: React.ReactNode,\n  optionFn: (child: OptionElement, group?: OptionGroupElement) => void,\n): void {\n  React.Children.forEach(children, child => {\n    if (isComponentType<OptionElement>(child, 'Option')) {\n      optionFn(child);\n    } else if (isComponentType<OptionGroupElement>(child, 'OptionGroup')) {\n      traverseSelectChildren(child.props.children, option =>\n        optionFn(option, child),\n      );\n    } else if (isFragment(child)) {\n      traverseSelectChildren(child.props.children, optionFn);\n    }\n  });\n}\n\nexport function convertToInternalElements(\n  children: React.ReactNode,\n  optionFn: (\n    child: OptionElement,\n    group?: OptionGroupElement,\n  ) => InternalOptionProps,\n  fallbackFn?: (child: React.ReactNode) => void,\n): React.ReactNode {\n  if (\n    !(\n      React.Children.toArray(children).every(child =>\n        isComponentType<OptionElement>(child, 'Option'),\n      ) ||\n      React.Children.toArray(children).every(child =>\n        isComponentType<OptionGroupElement>(child, 'OptionGroup'),\n      )\n    )\n  ) {\n    consoleOnce.warn(\n      `LeafyGreen Select: Combining grouped and ungrouped Select Options can cause styling issues`,\n    );\n  }\n\n  return React.Children.map(children, child => {\n    if (isComponentType<OptionElement>(child, 'Option')) {\n      return <InternalOption {...optionFn(child)} />;\n    } else if (isComponentType<OptionGroupElement>(child, 'OptionGroup')) {\n      const { children: options, ...rest } = child.props;\n      return (\n        <InternalOptionGroup className={undefined} {...rest}>\n          {convertToInternalElements(\n            options,\n            option => optionFn(option, child),\n            fallbackFn,\n          )}\n        </InternalOptionGroup>\n      );\n    } else if (isFragment(child)) {\n      return convertToInternalElements(\n        child.props.children,\n        optionFn,\n        fallbackFn,\n      );\n    } else if (!isReactEmpty(child)) {\n      fallbackFn?.(child);\n    }\n\n    return null;\n  });\n}\n\nexport function getOptionValue(option: OptionElement | null): string {\n  if (option === null) {\n    return '';\n  }\n\n  if (option.props.value !== undefined) {\n    return option.props.value;\n  }\n\n  if (Array.isArray(option.props.children)) {\n    return option.props.children.filter(child => !isReactEmpty(child)).join('');\n  }\n\n  if (option.props.children) {\n    return option.props.children.toString();\n  }\n\n  return '';\n}\n\nexport function isOptionDisabled(\n  option: OptionElement,\n  group: OptionGroupElement | undefined,\n): boolean {\n  return (option.props.disabled ?? false) || (group?.props?.disabled ?? false);\n}\n\nexport function isOptionSelectable(\n  option: OptionElement,\n  group: OptionGroupElement | undefined,\n  value: string,\n): boolean {\n  return getOptionValue(option) === value && !isOptionDisabled(option, group);\n}\n\n/**\n * Given the selected option from a previous render, attempts to find a\n * match among the options of the next render to become the next selected\n * option, so that the state of the component doesn't need to be lost.\n */\nexport function reconcileOption(\n  children: React.ReactNode,\n  previousOption: OptionElement,\n): OptionElement | null {\n  // we disregard `key`s because they should only be compared in\n  // the context of the same parent element, which we don't know\n  // and would be complex to track. we disregard which option\n  // group the previous option was in as well for simplicity.\n  let sameInstance: OptionElement | undefined;\n  let sameChildrenAndValue: OptionElement | undefined;\n  let sameExplicitValue: OptionElement | undefined;\n  let sameValue: OptionElement | undefined;\n\n  traverseSelectChildren(children, option => {\n    if (option === previousOption) {\n      sameInstance = previousOption;\n    } else if (\n      option.props.children === previousOption.props.children &&\n      option.props.value === previousOption.props.value\n    ) {\n      sameChildrenAndValue ??= option;\n    } else if (\n      option.props.value !== undefined &&\n      option.props.value === previousOption.props.value\n    ) {\n      sameExplicitValue ??= option;\n    } else if (getOptionValue(option) === getOptionValue(previousOption)) {\n      sameValue ??= option;\n    }\n  });\n\n  return (\n    sameInstance ??\n    sameChildrenAndValue ??\n    sameExplicitValue ??\n    sameValue ??\n    null\n  );\n}\n\nexport function useObservedRef<T>(\n  callback: (value: T) => void,\n  initialValue: T,\n  options: { initialValue: T; deps?: React.DependencyList },\n): React.MutableRefObject<T>;\nexport function useObservedRef<T>(\n  callback: (value: T) => void,\n  options?: { initialValue: T | null; deps?: React.DependencyList },\n): React.RefObject<T>;\nexport function useObservedRef<T>(\n  callback: (value: T | undefined) => void,\n  options?: { deps?: React.DependencyList },\n): React.MutableRefObject<T>;\nexport function useObservedRef<T>(\n  callback: (value: T | null | undefined) => void,\n  {\n    initialValue,\n    deps = [],\n  }: { initialValue?: T | null; deps?: React.DependencyList } = {},\n) {\n  const ref = useRef(initialValue);\n\n  return useMemo(\n    () => ({\n      get current() {\n        return ref.current;\n      },\n      set current(nextValue) {\n        ref.current = nextValue;\n        callback(nextValue);\n      },\n    }),\n    [\n      callback,\n      ref,\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      ...deps,\n    ],\n  );\n}\n\ntype SettableRef<T> = React.RefCallback<T> | React.MutableRefObject<T>;\n\ntype ValueOrArray<T> = T | ReadonlyArray<T>;\n\nexport function useForwardedRef<T>(\n  forwardedRefOrRefs: ValueOrArray<SettableRef<T> | null>,\n  initialValue: T,\n): React.MutableRefObject<T>;\nexport function useForwardedRef<T>(\n  forwardedRefOrRefs: ValueOrArray<SettableRef<T | null> | null>,\n  initialValue: T | null,\n): React.RefObject<T>;\nexport function useForwardedRef<T>(\n  forwardedRefOrRefs: ValueOrArray<SettableRef<T | null | undefined> | null>,\n  initialValue?: T | null,\n): React.MutableRefObject<T | null | undefined> {\n  const forwardValueToRefs = useCallback(\n    <T,>(\n      forwardedRefOrRefs: ValueOrArray<SettableRef<T> | null>,\n      nextValue: T,\n    ) => {\n      if (Array.isArray(forwardedRefOrRefs)) {\n        forwardedRefOrRefs.forEach(forwardValueToRefs);\n      } else if (typeof forwardedRefOrRefs === 'function') {\n        forwardedRefOrRefs(nextValue);\n      } else if (forwardedRefOrRefs) {\n        // @ts-expect-error https://github.com/microsoft/TypeScript/issues/40527\n        forwardedRefOrRefs.current = nextValue;\n      }\n    },\n    [],\n  );\n\n  return useObservedRef(\n    useCallback(\n      value => forwardValueToRefs(forwardedRefOrRefs, value),\n      [forwardedRefOrRefs, forwardValueToRefs],\n    ),\n    { initialValue },\n  );\n}\n\n/**\n * TODO: Explore obsoleting `useElementNode` in favor of this\n */\nexport const useStateRef: typeof useRef = <T,>(initialValue?: T) => {\n  const [value, setValue] = useState(initialValue);\n  return useObservedRef(setValue, { initialValue, deps: [value] });\n};\n","import { css, cx } from '@leafygreen-ui/emotion';\nimport { createUniqueClassName, Theme } from '@leafygreen-ui/lib';\nimport { color, Size, spacing } from '@leafygreen-ui/tokens';\n\nimport { colorSets, sizeSets } from '../styleSets';\n\nexport const popoverClassName = createUniqueClassName('select-popover');\n\nexport const maxMenuHeight = 274;\nexport const menuMargin = spacing[2];\n\nexport const baseMenuStyle = css`\n  position: relative;\n  text-align: left;\n  width: 100%;\n  border-radius: 3px;\n  line-height: 16px;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  overflow: auto;\n`;\n\nexport const autoWidthStyles = css`\n  width: max-content;\n`;\n\nexport const getMenuStyles = (theme: Theme, size: Size) => {\n  const sizeSet = sizeSets[size];\n  const colorSet = colorSets[theme];\n\n  return cx(\n    css`\n      min-height: ${sizeSet.height}px;\n      border-radius: 12px;\n      box-shadow: 0 4px 7px 0 ${colorSet.menu.shadow};\n      padding: ${spacing[200]}px 0;\n      background-color: ${color[theme].background.primary.default};\n      border: 1px solid ${color[theme].border.secondary.default};\n    `,\n  );\n};\n","import React, { useCallback, useContext } from 'react';\nimport isUndefined from 'lodash/isUndefined';\n\nimport { css, cx } from '@leafygreen-ui/emotion';\nimport { useAvailableSpace } from '@leafygreen-ui/hooks';\nimport { useDarkMode } from '@leafygreen-ui/leafygreen-provider';\nimport Popover, { Align, Justify } from '@leafygreen-ui/popover';\n\nimport { LGIDS_SELECT } from '../constants';\nimport { DropdownWidthBasis } from '../Select/Select.types';\nimport SelectContext from '../SelectContext';\nimport { mobileSizeSet } from '../styleSets';\nimport { MobileMediaQuery, useForwardedRef } from '../utils/utils';\n\nimport {\n  autoWidthStyles,\n  baseMenuStyle,\n  getMenuStyles,\n  maxMenuHeight,\n  menuMargin,\n  popoverClassName,\n} from './ListMenu.styles';\nimport { ListMenuProps } from './ListMenu.types';\n\n/**\n * @internal\n */\nconst ListMenu = React.forwardRef<HTMLUListElement, ListMenuProps>(\n  function ListMenu(\n    {\n      children,\n      id,\n      referenceElement,\n      className,\n      labelId,\n      dropdownWidthBasis,\n      usePortal = true,\n      portalContainer,\n      portalRef,\n      scrollContainer,\n      portalClassName,\n      popoverZIndex,\n      onEntering,\n      onEnter,\n      onEntered,\n      onExiting,\n      onExit,\n      onExited,\n    }: ListMenuProps,\n    forwardedRef,\n  ) {\n    const { theme } = useDarkMode();\n    const { size, disabled, open } = useContext(SelectContext);\n\n    const ref = useForwardedRef(forwardedRef, null);\n\n    const availableSpace = useAvailableSpace(referenceElement, menuMargin);\n    const maxHeightValue = !isUndefined(availableSpace)\n      ? `${Math.min(availableSpace, maxMenuHeight)}px`\n      : 'unset';\n\n    const onClick = useCallback(\n      (event: React.MouseEvent) => {\n        if (ref.current) {\n          ref.current.focus();\n        }\n        event.stopPropagation();\n      },\n      [ref],\n    );\n\n    const popoverProps = {\n      popoverZIndex,\n      onEntering,\n      onEnter,\n      onEntered,\n      onExiting,\n      onExit,\n      onExited,\n      ...(usePortal\n        ? {\n            usePortal,\n            portalClassName,\n            portalContainer,\n            portalRef,\n            scrollContainer,\n          }\n        : { usePortal }),\n    };\n\n    return (\n      <Popover\n        active={open && !disabled}\n        spacing={6}\n        align={Align.Bottom}\n        justify={Justify.Start}\n        adjustOnMutation\n        className={cx(popoverClassName, className, {\n          [autoWidthStyles]: dropdownWidthBasis === DropdownWidthBasis.Option,\n        })}\n        refEl={referenceElement}\n        {...popoverProps}\n      >\n        {/* Keyboard events handled in Select component through event listener hook */}\n        {/* eslint-disable-next-line jsx-a11y/click-events-have-key-events */}\n        <ul\n          data-lgid={LGIDS_SELECT.popover}\n          aria-labelledby={labelId}\n          role=\"listbox\"\n          ref={ref}\n          tabIndex={-1}\n          onClick={onClick}\n          className={cx(\n            baseMenuStyle,\n            getMenuStyles(theme, size),\n            css`\n              max-height: ${maxHeightValue};\n              ${MobileMediaQuery} {\n                font-size: ${mobileSizeSet.option.text}px;\n              }\n            `,\n          )}\n          id={id}\n        >\n          {children}\n        </ul>\n      </Popover>\n    );\n  },\n);\n\nListMenu.displayName = 'ListMenu';\n\nexport default ListMenu;\n","import { css } from '@leafygreen-ui/emotion';\nimport { createUniqueClassName, Theme } from '@leafygreen-ui/lib';\nimport { palette } from '@leafygreen-ui/palette';\nimport {\n  color,\n  focusRing,\n  fontWeights,\n  hoverRing,\n  Size,\n  spacing,\n  typeScales,\n} from '@leafygreen-ui/tokens';\n\nimport { State } from '../Select/Select.types';\n\nexport const menuButtonTextClassName = createUniqueClassName('select-menu');\n\nexport const menuButtonStyleOverrides = css`\n  // Override button defaults\n  font-weight: ${fontWeights.regular};\n  > *:last-child {\n    grid-template-columns: 1fr 16px;\n    justify-content: flex-start;\n\n    > svg {\n      justify-self: right;\n      width: 16px;\n      height: 16px;\n    }\n  }\n`;\n\nexport const menuButtonSizeStyle: Record<Size, string> = {\n  [Size.Default]: css`\n    > *:last-child {\n      padding: 0 ${spacing[200]}px 0 ${spacing[300]}px;\n    }\n  `,\n  [Size.Large]: css`\n    > *:last-child {\n      padding: 0 ${spacing[200]}px 0 ${spacing[300]}px;\n    }\n  `,\n  [Size.Small]: css`\n    > *:last-child {\n      padding: 0 ${spacing[100]}px 0 ${spacing[200]}px;\n    }\n  `,\n  [Size.XSmall]: css`\n    text-transform: none;\n    font-size: ${typeScales.body1.fontSize}px;\n    line-height: ${typeScales.body1.lineHeight}px;\n    > *:last-child {\n      padding: 0 ${spacing[100]}px 0 ${spacing[200]}px;\n    }\n  `,\n};\n\nexport const menuButtonModeOverrides: Record<Theme, string> = {\n  [Theme.Light]: css`\n    background-color: ${color.light.background.primary.default};\n    // Override button default color\n    > *:last-child {\n      > svg {\n        color: ${color.light.icon.primary.default};\n      }\n    }\n  `,\n  [Theme.Dark]: css`\n    border-color: ${color.dark.border.primary.default};\n    background-color: ${palette.gray.dark4};\n    color: ${color.dark.text.primary.default};\n\n    // Override button default color\n    > *:last-child {\n      > svg {\n        color: ${color.dark.icon.primary.default};\n      }\n    }\n\n    &:hover,\n    &:active,\n    &:focus {\n      background-color: ${palette.gray.dark4};\n      color: ${color.dark.text.primary.hover};\n    }\n  `,\n};\n\n// Override default button focus styles\nexport const menuButtonFocusStyle: Record<Theme, string> = {\n  [Theme.Light]: css`\n    &:focus-visible {\n      box-shadow: ${focusRing['light'].input};\n      border-color: rgba(255, 255, 255, 0);\n    }\n  `,\n  [Theme.Dark]: css`\n    &:focus-visible {\n      background-color: ${palette.gray.dark4};\n      box-shadow: ${focusRing['dark'].input};\n      border-color: rgba(255, 255, 255, 0);\n    }\n  `,\n};\n\nexport const menuButtonDeselectedStyles: Record<Theme, string> = {\n  [Theme.Light]: css`\n    color: ${palette.gray.base};\n  `,\n  [Theme.Dark]: css`\n    color: ${palette.gray.dark1};\n\n    &:hover,\n    &:active,\n    &:focus {\n      color: ${palette.gray.light1};\n    }\n  `,\n};\n\nexport const getMenuButtonDisabledThemeStyles = (theme: Theme) => css`\n  cursor: not-allowed;\n  pointer-events: unset;\n  box-shadow: unset;\n\n  &:active {\n    pointer-events: none;\n  }\n\n  &[aria-disabled='true'] {\n    background-color: ${color[theme].background.disabled.default};\n    border-color: ${color[theme].border.disabled.default};\n    color: ${color[theme].text.disabled.default};\n\n    &:hover,\n    &:active {\n      box-shadow: inherit;\n    }\n\n    > *:last-child {\n      > svg {\n        color: ${color[theme].icon.disabled.default};\n      }\n    }\n  }\n`;\n\nexport const menuButtonTextWrapperStyle = css`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-grow: 1;\n  gap: ${spacing[100]}px;\n  overflow: hidden;\n`;\n\nexport const menuButtonTextStyle = css`\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 100%;\n`;\n\nexport const getMenuButtonStateStyles = (theme: Theme) => ({\n  [State.Error]: css`\n    border-color: ${color[theme].border.error.default};\n\n    &:hover,\n    &:active {\n      border-color: ${color[theme].border.error.hover};\n      box-shadow: ${hoverRing[theme].red};\n    }\n  `,\n  [State.None]: css``,\n  [State.Valid]: css`\n    border-color: ${color[theme].border.success.default};\n\n    &:hover,\n    &:active {\n      border-color: ${color[theme].border.success.hover};\n      box-shadow: ${hoverRing[theme].green};\n    }\n  `,\n});\n","import React, { useCallback, useContext } from 'react';\n\nimport Button, { Size as ButtonSize, Variant } from '@leafygreen-ui/button';\nimport { css, cx } from '@leafygreen-ui/emotion';\nimport CaretDownIcon from '@leafygreen-ui/icon/dist/CaretDown';\nimport { useDarkMode } from '@leafygreen-ui/leafygreen-provider';\nimport { Theme } from '@leafygreen-ui/lib';\n\nimport { LGIDS_SELECT } from '../constants';\nimport { State } from '../Select/Select.types';\nimport SelectContext from '../SelectContext';\nimport { mobileSizeSet } from '../styleSets';\nimport { MobileMediaQuery, useForwardedRef } from '../utils/utils';\n\nimport {\n  getMenuButtonDisabledThemeStyles,\n  getMenuButtonStateStyles,\n  menuButtonDeselectedStyles,\n  menuButtonFocusStyle,\n  menuButtonModeOverrides,\n  menuButtonSizeStyle,\n  menuButtonStyleOverrides,\n  menuButtonTextClassName,\n  menuButtonTextStyle,\n  menuButtonTextWrapperStyle,\n} from './MenuButton.styles';\nimport { MenuButtonProps } from './MenuButton.types';\n\n/**\n * @internal\n */\nconst MenuButton = React.forwardRef<HTMLButtonElement, MenuButtonProps>(\n  function MenuButton(\n    {\n      children,\n      value,\n      text,\n      name,\n      deselected,\n      readOnly,\n      onClose,\n      onOpen,\n      state,\n      baseFontSize,\n      __INTERNAL__menuButtonSlot__,\n      __INTERNAL__menuButtonSlotProps__,\n      ...rest\n    }: MenuButtonProps,\n    forwardedRef,\n  ) {\n    const { theme } = useDarkMode();\n    const { open, size, disabled } = useContext(SelectContext);\n\n    const ref = useForwardedRef(forwardedRef, null);\n\n    const onClick = useCallback(() => {\n      if (open) {\n        onClose();\n      } else {\n        onOpen();\n      }\n      ref.current!.focus();\n    }, [onClose, onOpen, open, ref]);\n\n    const Component = __INTERNAL__menuButtonSlot__\n      ? __INTERNAL__menuButtonSlot__\n      : Button;\n\n    const buttonClassName = __INTERNAL__menuButtonSlot__\n      ? ''\n      : cx(\n          menuButtonStyleOverrides,\n          menuButtonModeOverrides[theme],\n          menuButtonSizeStyle[size],\n          menuButtonFocusStyle[theme],\n          {\n            [getMenuButtonStateStyles(theme)[state || State.None]]: !!state,\n            [menuButtonDeselectedStyles[theme]]: deselected,\n            [getMenuButtonDisabledThemeStyles(theme)]: disabled,\n            [css`\n              letter-spacing: initial;\n            `]: size === ButtonSize.XSmall,\n          },\n          css`\n            width: 100%;\n            ${MobileMediaQuery} {\n              height: ${mobileSizeSet.height}px;\n              font-size: ${mobileSizeSet.text}px;\n            }\n          `,\n        );\n\n    const testId =\n      (rest as any)['data-testid'] ?? 'leafygreen-ui-select-menubutton';\n\n    return (\n      <Component\n        {...rest}\n        {...__INTERNAL__menuButtonSlotProps__}\n        ref={ref}\n        name={name}\n        value={value}\n        disabled={disabled}\n        onClick={onClick}\n        variant={Variant.Default}\n        darkMode={theme === Theme.Dark}\n        rightGlyph={<CaretDownIcon />}\n        size={size}\n        data-testid={testId}\n        className={cx(\n          buttonClassName,\n          {\n            [css`\n              font-size: ${baseFontSize}px;\n            `]: size === ButtonSize.Default,\n          },\n          __INTERNAL__menuButtonSlotProps__?.className,\n        )}\n      >\n        <div className={menuButtonTextWrapperStyle}>\n          <div\n            data-lgid={LGIDS_SELECT.buttonText}\n            className={cx(menuButtonTextClassName, menuButtonTextStyle)}\n          >\n            {text}\n          </div>\n        </div>\n        {children}\n      </Component>\n    );\n  },\n);\n\nMenuButton.displayName = 'MenuButton';\n\nexport default MenuButton;\n","import { css } from '@leafygreen-ui/emotion';\nimport { spacing, typeScales } from '@leafygreen-ui/tokens';\n\nexport const labelDescriptionContainerStyle = css`\n  display: flex;\n  flex-direction: column;\n  margin-bottom: ${spacing[1]}px;\n`;\n\nexport const wrapperStyle = css`\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const largeLabelStyles = css`\n  font-size: ${typeScales.large.fontSize}px;\n  line-height: ${typeScales.large.lineHeight}px;\n`;\n","import React, {\n  ComponentProps,\n  forwardRef,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState,\n  WeakValidationMap,\n} from 'react';\nimport PropTypes from 'prop-types';\n\nimport { css, cx } from '@leafygreen-ui/emotion';\nimport { DEFAULT_MESSAGES, FormFieldFeedback } from '@leafygreen-ui/form-field';\nimport {\n  useEventListener,\n  useForwardedRef,\n  useIdAllocator,\n  useViewportSize,\n} from '@leafygreen-ui/hooks';\nimport LeafyGreenProvider, {\n  useDarkMode,\n} from '@leafygreen-ui/leafygreen-provider';\nimport { keyMap } from '@leafygreen-ui/lib';\nimport { BaseFontSize } from '@leafygreen-ui/tokens';\nimport { Description, Label } from '@leafygreen-ui/typography';\n\nimport { LGIDS_SELECT } from '../constants';\nimport ListMenu from '../ListMenu';\nimport MenuButton from '../MenuButton';\nimport { InternalOption, OptionElement } from '../Option';\nimport SelectContext from '../SelectContext';\nimport { mobileSizeSet } from '../styleSets';\nimport {\n  convertToInternalElements,\n  getOptionValue,\n  isOptionDisabled,\n  isOptionSelectable,\n  MobileMediaQuery,\n  reconcileOption,\n  traverseSelectChildren,\n  useStateRef,\n} from '../utils/utils';\n\nimport {\n  labelDescriptionContainerStyle,\n  largeLabelStyles,\n  wrapperStyle,\n} from './Select.styles';\nimport { DropdownWidthBasis, SelectProps, Size, State } from './Select.types';\n\n/**\n * Select inputs are typically used alongside other form elements like toggles, radio boxes, or text inputs when a user needs to make a selection from a list of items.\n *\n * In a select input where there are less than 3-4 items, consider using radio boxes, or radio inputs instead.\n */\nexport const Select = forwardRef<HTMLDivElement, SelectProps>(\n  (\n    {\n      children,\n      darkMode: darkModeProp,\n      size = Size.Default,\n      disabled = false,\n      allowDeselect = true,\n      usePortal = true,\n      placeholder = 'Select',\n      errorMessage = DEFAULT_MESSAGES.error,\n      successMessage = DEFAULT_MESSAGES.success,\n      state = State.None,\n      dropdownWidthBasis = DropdownWidthBasis.Trigger,\n      baseFontSize = BaseFontSize.Body1,\n      'data-lgid': dataLgId = LGIDS_SELECT.root,\n      id: idProp,\n      'aria-labelledby': ariaLabelledby,\n      'aria-label': ariaLabel,\n      className,\n      label,\n      description,\n      name,\n      defaultValue,\n      value,\n      onChange,\n      readOnly,\n      portalContainer,\n      portalRef,\n      scrollContainer,\n      portalClassName,\n      popoverZIndex,\n      onEntering,\n      onEnter,\n      onEntered,\n      onExiting,\n      onExit,\n      onExited,\n      __INTERNAL__menuButtonSlot__,\n      ...rest\n    },\n    fwdRef,\n  ) => {\n    const id = useIdAllocator({ prefix: 'select', id: idProp });\n    const labelId = useMemo(\n      () => (ariaLabel && !label ? undefined : ariaLabelledby ?? `${id}-label`),\n      [ariaLabelledby, ariaLabel, label, id],\n    );\n\n    if (!label && !ariaLabelledby && !ariaLabel) {\n      console.error(\n        'For screen-reader accessibility, label, aria-label, or aria-labelledby must be provided to Select.',\n      );\n    }\n\n    const { darkMode } = useDarkMode(darkModeProp);\n\n    const descriptionId = `${id}-description`;\n    const menuId = `${id}-menu`;\n\n    const [open, setOpen] = useState(false);\n\n    const containerRef = useForwardedRef(fwdRef, null);\n    const menuButtonRef = useStateRef<HTMLButtonElement>(null);\n    const menuButtonId = useIdAllocator({ prefix: 'select' });\n    const listMenuRef = useStateRef<HTMLUListElement | null>(null);\n\n    const providerData = useMemo(() => {\n      return { size, open, disabled };\n    }, [size, open, disabled]);\n\n    useEffect(() => {\n      if (value !== undefined && onChange === undefined && readOnly !== true) {\n        console.warn(\n          'You provided a `value` prop to a form field without an `onChange` handler. ' +\n            'This will render a read-only field. ' +\n            'If the field should be mutable use `defaultValue`. ' +\n            'Otherwise, set either `onChange` or `readOnly`.',\n        );\n      }\n    }, [onChange, readOnly, value]);\n\n    /**\n     * Open / close state\n     */\n    const onOpen = useCallback(() => {\n      setOpen(true);\n    }, []);\n\n    const onClose = useCallback(() => {\n      setOpen(false);\n      menuButtonRef.current!.focus();\n    }, [menuButtonRef]);\n\n    useEffect(() => {\n      if (!open) {\n        return;\n      }\n\n      const onClickOutside = (event: MouseEvent) => {\n        const stillFocused =\n          menuButtonRef.current!.contains(event.target as Node) ||\n          listMenuRef.current!.contains(event.target as Node);\n        setOpen(stillFocused);\n      };\n\n      document.addEventListener('mousedown', onClickOutside);\n      return () => {\n        document.removeEventListener('mousedown', onClickOutside);\n      };\n    }, [listMenuRef, menuButtonRef, open]);\n\n    const initialUncontrolledSelectedOption = useMemo(() => {\n      let initialUncontrolledSelectedOption: OptionElement | null = null;\n\n      if (value === undefined && defaultValue !== undefined) {\n        traverseSelectChildren(children, (option, group) => {\n          if (isOptionSelectable(option, group, defaultValue)) {\n            initialUncontrolledSelectedOption = option;\n          }\n        });\n      }\n\n      return initialUncontrolledSelectedOption;\n    }, [children, defaultValue, value]);\n\n    /**\n     * Selection\n     */\n\n    // We store the option element instance rather than just the value in order\n    // to differentiate between multiple options that have the same value.\n    const [uncontrolledSelectedOption, setUncontrolledSelectedOption] =\n      useState<OptionElement | null>(initialUncontrolledSelectedOption);\n\n    // If the option instances have changed we'll do our best to preserve\n    // the state by checking if any of the new option instances sufficiently\n    // match the current state and use it instead.\n    useEffect(() => {\n      if (uncontrolledSelectedOption !== null) {\n        setUncontrolledSelectedOption(\n          reconcileOption(children, uncontrolledSelectedOption) ??\n            initialUncontrolledSelectedOption,\n        );\n      }\n    }, [\n      children,\n      initialUncontrolledSelectedOption,\n      uncontrolledSelectedOption,\n    ]);\n\n    const selectedOption = useMemo(() => {\n      if (value !== undefined) {\n        let selectedOption: OptionElement | null = null;\n\n        traverseSelectChildren(children, (option, group) => {\n          if (isOptionSelectable(option, group, value)) {\n            selectedOption = option;\n          }\n        });\n        return selectedOption;\n      } else {\n        return uncontrolledSelectedOption;\n      }\n    }, [children, uncontrolledSelectedOption, value]);\n\n    const onSelect = useCallback(\n      (\n        option: OptionElement | null,\n        event: React.MouseEvent | KeyboardEvent,\n      ) => {\n        event.preventDefault();\n        event.stopPropagation();\n        if (value === undefined) {\n          setUncontrolledSelectedOption(option);\n        }\n        onChange?.(getOptionValue(option), event);\n        setFocusedOption(undefined);\n        onClose();\n      },\n      [onChange, onClose, value],\n    );\n\n    const getOptionClickHandler = useCallback(\n      (option: OptionElement | null, optionDisabled: boolean) => {\n        return (event: React.MouseEvent) => {\n          event.preventDefault();\n          event.stopPropagation();\n\n          if (!disabled && !optionDisabled) {\n            onSelect(option, event);\n            onClose();\n          }\n        };\n      },\n      [disabled, onClose, onSelect],\n    );\n\n    /**\n     * Focus\n     */\n\n    const [focusedOption, setFocusedOption] = useState<\n      OptionElement | null | undefined\n    >();\n\n    const enabledOptions = useMemo(() => {\n      const enabledOptions: Array<OptionElement | null> = [];\n\n      if (allowDeselect) {\n        enabledOptions.push(null);\n      }\n\n      traverseSelectChildren(children, (option, group) => {\n        if (!isOptionDisabled(option, group)) {\n          enabledOptions.push(option);\n        }\n      });\n\n      return enabledOptions;\n    }, [children, allowDeselect]);\n\n    const onSelectFocusedOption = useCallback(\n      (event: KeyboardEvent) => {\n        if (focusedOption !== undefined) {\n          onSelect(focusedOption, event);\n        }\n      },\n      [focusedOption, onSelect],\n    );\n\n    const onFocusFirstOption = useCallback(() => {\n      setFocusedOption(enabledOptions[0]);\n    }, [enabledOptions]);\n\n    const onFocusLastOption = useCallback(() => {\n      setFocusedOption(enabledOptions[enabledOptions.length - 1]);\n    }, [enabledOptions]);\n\n    const onFocusPreviousOption = useCallback(() => {\n      if (\n        focusedOption === undefined ||\n        enabledOptions.indexOf(focusedOption) === 0\n      ) {\n        onFocusLastOption();\n      } else {\n        const index = enabledOptions.indexOf(focusedOption) - 1;\n        setFocusedOption(enabledOptions[index]);\n      }\n    }, [enabledOptions, focusedOption, onFocusLastOption]);\n\n    const onFocusNextOption = useCallback(() => {\n      if (\n        focusedOption === undefined ||\n        enabledOptions.indexOf(focusedOption) === enabledOptions.length - 1\n      ) {\n        onFocusFirstOption();\n      } else {\n        const index = enabledOptions.indexOf(focusedOption) + 1;\n\n        setFocusedOption(enabledOptions[index]);\n      }\n    }, [enabledOptions, focusedOption, onFocusFirstOption]);\n\n    const getOptionFocusHandler = useCallback(\n      (option: OptionElement | null, optionDisabled: boolean) => {\n        return (event: React.FocusEvent) => {\n          event.preventDefault();\n          event.stopPropagation();\n\n          if (!disabled && !optionDisabled) {\n            setFocusedOption(option);\n          }\n        };\n      },\n      [disabled],\n    );\n\n    const onKeyDown = useCallback(\n      (event: KeyboardEvent) => {\n        // No support for modifiers yet\n        if (event.ctrlKey || event.shiftKey || event.altKey) {\n          return;\n        }\n\n        const isFocusInMenu = listMenuRef.current?.contains(\n          document.activeElement,\n        );\n        const isFocusOnButton = menuButtonRef.current?.contains(\n          document.activeElement,\n        );\n        const isFocusInComponent = isFocusOnButton || isFocusInMenu;\n\n        // We only respond to keypresses if the focus is in the component\n        if (isFocusInComponent) {\n          switch (event.key) {\n            case keyMap.Tab:\n            case keyMap.Escape:\n              onClose();\n              setFocusedOption(undefined);\n              break;\n            case keyMap.Enter:\n            case keyMap.Space:\n              if (open && !isFocusOnButton) {\n                // Default behavior is to use these keys to open the dropdown but we handle that manually\n                event.preventDefault();\n              }\n\n              onSelectFocusedOption(event);\n              break;\n            case keyMap.ArrowUp:\n              if (!open && isFocusOnButton) {\n                onOpen();\n              }\n              event.preventDefault(); // Prevents page scrolling\n              onFocusPreviousOption();\n              break;\n            case keyMap.ArrowDown:\n              if (!open && isFocusOnButton) {\n                onOpen();\n              }\n              event.preventDefault(); // Prevents page scrolling\n              onFocusNextOption();\n              break;\n          }\n        }\n      },\n      [\n        listMenuRef,\n        menuButtonRef,\n        onClose,\n        open,\n        onSelectFocusedOption,\n        onFocusPreviousOption,\n        onFocusNextOption,\n        onOpen,\n      ],\n    );\n\n    useEventListener('keydown', onKeyDown);\n\n    /**\n     * Rendering\n     */\n\n    const viewportSize = useViewportSize();\n\n    const hasGlyphs = useMemo(() => {\n      let hasGlyphs = false;\n\n      traverseSelectChildren(children, option => {\n        hasGlyphs ||= option.props.glyph !== undefined;\n      });\n\n      return hasGlyphs;\n    }, [children]);\n\n    const canTriggerScrollIntoView = useMemo(\n      () =>\n        viewportSize !== null &&\n        listMenuRef.current !== null &&\n        focusedOption === undefined &&\n        open,\n      [focusedOption, listMenuRef, open, viewportSize],\n    );\n\n    const deselectionOption = useMemo(() => {\n      const selected = selectedOption === null;\n\n      return (\n        <InternalOption\n          className={undefined}\n          glyph={undefined}\n          selected={selected}\n          focused={focusedOption === null}\n          disabled={false}\n          onClick={getOptionClickHandler(null, false)}\n          onFocus={getOptionFocusHandler(null, false)}\n          hasGlyphs={false}\n          triggerScrollIntoView={selected && canTriggerScrollIntoView}\n        >\n          {placeholder}\n        </InternalOption>\n      );\n    }, [\n      canTriggerScrollIntoView,\n      focusedOption,\n      getOptionClickHandler,\n      getOptionFocusHandler,\n      placeholder,\n      selectedOption,\n    ]);\n\n    const renderedChildren = useMemo(\n      () =>\n        convertToInternalElements(\n          children,\n          (option, group) => {\n            const selected = option === selectedOption;\n            const disabled = isOptionDisabled(option, group);\n\n            return {\n              ...option.props,\n              className: option.props.className,\n              glyph: option.props.glyph,\n              selected,\n              focused: option === focusedOption,\n              disabled,\n              children: option.props.children,\n              hasGlyphs,\n              onClick: getOptionClickHandler(option, disabled),\n              onFocus: getOptionFocusHandler(option, disabled),\n              triggerScrollIntoView: selected && canTriggerScrollIntoView,\n            };\n          },\n          () => {\n            console.error(\n              '`Select` instance received child that is not `Option` or `OptionGroup`.',\n            );\n          },\n        ),\n      [\n        canTriggerScrollIntoView,\n        children,\n        focusedOption,\n        getOptionClickHandler,\n        getOptionFocusHandler,\n        hasGlyphs,\n        selectedOption,\n      ],\n    );\n\n    const popoverProps = {\n      popoverZIndex,\n      onEntering,\n      onEnter,\n      onEntered,\n      onExiting,\n      onExit,\n      onExited,\n      ...(usePortal\n        ? {\n            usePortal,\n            portalClassName,\n            portalContainer,\n            portalRef,\n            scrollContainer,\n          }\n        : { usePortal }),\n    };\n\n    return (\n      <LeafyGreenProvider darkMode={darkMode}>\n        <div\n          ref={containerRef}\n          className={cx(wrapperStyle, className)}\n          data-lgid={dataLgId}\n        >\n          {(label || description) && (\n            <div className={labelDescriptionContainerStyle}>\n              {label && (\n                <Label\n                  htmlFor={menuButtonId}\n                  id={labelId}\n                  darkMode={darkMode}\n                  disabled={disabled}\n                  className={cx(\n                    {\n                      [largeLabelStyles]: size === Size.Large,\n                      [css`\n                        font-size: ${baseFontSize}px;\n                        line-height: 20px;\n                      `]: size === Size.Default,\n                    },\n                    css`\n                      // Prevent hover state from showing when hovering label\n                      pointer-events: none;\n                    `,\n                    css`\n                      ${MobileMediaQuery} {\n                        font-size: ${mobileSizeSet.label.text}px;\n                        line-height: ${mobileSizeSet.label.lineHeight}px;\n                      }\n                    `,\n                  )}\n                >\n                  {label}\n                </Label>\n              )}\n\n              {description && (\n                <Description\n                  id={descriptionId}\n                  darkMode={darkMode}\n                  disabled={disabled}\n                  className={cx(\n                    {\n                      [largeLabelStyles]: size === Size.Large,\n                      [css`\n                        font-size: ${baseFontSize}px;\n                        line-height: 20px;\n                      `]: size === Size.Default,\n                    },\n                    css`\n                      ${MobileMediaQuery} {\n                        font-size: ${mobileSizeSet.description.text}px;\n                        line-height: ${mobileSizeSet.description.lineHeight}px;\n                      }\n                    `,\n                  )}\n                >\n                  {description}\n                </Description>\n              )}\n            </div>\n          )}\n\n          <SelectContext.Provider value={providerData}>\n            <MenuButton\n              {...rest}\n              id={menuButtonId}\n              ref={menuButtonRef}\n              name={name}\n              readOnly={readOnly}\n              value={getOptionValue(selectedOption)}\n              text={\n                selectedOption !== null\n                  ? selectedOption.props.children\n                  : placeholder\n              }\n              deselected={selectedOption === null}\n              onOpen={onOpen}\n              onClose={onClose}\n              aria-labelledby={labelId}\n              aria-label={!label && !ariaLabelledby ? ariaLabel : undefined}\n              aria-controls={menuId}\n              aria-expanded={open}\n              aria-describedby={descriptionId}\n              aria-invalid={state === State.Error}\n              aria-disabled={disabled}\n              state={state}\n              baseFontSize={baseFontSize}\n              __INTERNAL__menuButtonSlot__={__INTERNAL__menuButtonSlot__}\n            >\n              <ListMenu\n                labelId={labelId}\n                id={menuId}\n                referenceElement={menuButtonRef}\n                ref={listMenuRef}\n                className={cx({\n                  [css`\n                    width: ${menuButtonRef.current?.clientWidth}px;\n                  `]: dropdownWidthBasis === DropdownWidthBasis.Trigger,\n                })}\n                dropdownWidthBasis={dropdownWidthBasis}\n                {...popoverProps}\n              >\n                {allowDeselect && deselectionOption}\n                {renderedChildren}\n              </ListMenu>\n            </MenuButton>\n          </SelectContext.Provider>\n          <FormFieldFeedback\n            disabled={disabled}\n            errorMessage={errorMessage}\n            hideFeedback={open}\n            size={size}\n            state={state}\n            successMessage={successMessage}\n          />\n        </div>\n      </LeafyGreenProvider>\n    );\n  },\n);\n\nSelect.displayName = 'Select';\n\nSelect.propTypes = {\n  label: PropTypes.string,\n  'aria-labelledby': PropTypes.string,\n  'aria-label': PropTypes.string,\n  description: PropTypes.node,\n  placeholder: PropTypes.string,\n  className: PropTypes.string,\n  darkMode: PropTypes.bool,\n  size: PropTypes.oneOf(Object.values(Size)),\n  disabled: PropTypes.bool,\n  id: PropTypes.string,\n  value: PropTypes.string,\n  defaultValue: PropTypes.string,\n  onChange: PropTypes.func,\n  readOnly: PropTypes.bool,\n  errorMessage: PropTypes.node,\n  successMessage: PropTypes.node,\n  state: PropTypes.oneOf(Object.values(State)),\n  allowDeselect: PropTypes.bool,\n  baseFontSize: PropTypes.oneOf(Object.values(BaseFontSize)),\n  dropdownWidthBasis: PropTypes.oneOf(Object.values(DropdownWidthBasis)),\n  portalRef: PropTypes.shape({\n    current:\n      typeof window !== 'undefined'\n        ? PropTypes.instanceOf(Element)\n        : PropTypes.any,\n  }),\n} as WeakValidationMap<ComponentProps<typeof Select>>;\n","import { getByLgId, queryBySelector } from '@lg-tools/test-harnesses';\n\nimport { LGIDS_FORM_FIELD } from '@leafygreen-ui/form-field';\nimport { transitionDuration } from '@leafygreen-ui/tokens';\nimport { LGIDS_TYPOGRAPHY } from '@leafygreen-ui/typography';\n\nimport { LGIDS_SELECT } from '../../constants';\n\nimport { TestUtilsReturnType } from './getTestUtils.types';\n\nexport function waitForSelectTransitionDuration() {\n  return new Promise(res => setTimeout(res, transitionDuration.slower));\n}\n\nexport const getTestUtils = (\n  lgId: string = LGIDS_SELECT.root,\n): TestUtilsReturnType => {\n  /**\n   * Queries the DOM for the element using the `data-lgid` data attribute.\n   * Will throw if no element is found.\n   */\n  const element = getByLgId!(lgId);\n\n  /**\n   * Queries the `element` for the label element. Will return `null` if the label is not found.\n   */\n  const getLabel = queryBySelector<HTMLLabelElement>(\n    element,\n    `[data-lgid=${LGIDS_TYPOGRAPHY.label}]`,\n  );\n\n  /**\n   * Queries the `element` for the description element. Will return `null` if the desription is not found.\n   */\n  const getDescription = queryBySelector<HTMLElement>(\n    element,\n    `[data-lgid=${LGIDS_TYPOGRAPHY.description}]`,\n  );\n\n  /**\n   * Queries the `element` for the input element.\n   */\n  const getSelectTrigger = queryBySelector<HTMLButtonElement>(\n    element,\n    'button',\n  ) as HTMLButtonElement;\n\n  /**\n   * Queries the `element` for the error message element. Will return `null` if the error message is not found.\n   */\n  const getErrorMessage = queryBySelector<HTMLElement>(\n    element,\n    `[data-lgid=${LGIDS_FORM_FIELD.errorMessage}]`,\n  );\n\n  /**\n   * Queries the `element` for aria-disabled.\n   */\n  const isInputDisabled = () => {\n    const ariaDisabled = queryBySelector<HTMLElement>(\n      element,\n      '[aria-disabled=\"true\"]',\n    );\n\n    return !!ariaDisabled;\n  };\n\n  /**\n   * Returns the `Select` value.\n   * We have to narrow the container to the text container since `Select`'s without a portal are rendered as children of the `button`.\n   */\n  const getSelectValue = () => {\n    const selectTriggerTextContainer = queryBySelector<HTMLDivElement>(\n      getSelectTrigger,\n      `[data-lgid=${LGIDS_SELECT.buttonText}]`,\n    ) as HTMLDivElement;\n    return selectTriggerTextContainer.textContent || '';\n  };\n\n  /**\n   * Queries the `element` for the warning Icon.\n   */\n  const isError = () => {\n    const warningIcon = queryBySelector<SVGElement>(\n      element,\n      'svg[title=\"Error\"]',\n    );\n\n    return !!warningIcon;\n  };\n\n  // We cannot query within the select element because if the popover is using a portal, the element will render outside the select element\n  const getPopover = () =>\n    queryBySelector<HTMLDivElement>(\n      document.body,\n      `[data-lgid=${LGIDS_SELECT.popover}]`,\n    );\n\n  const getAllOptions = (): Array<HTMLLIElement> => {\n    // only one select popover should be open at a time\n    const popover = getPopover();\n\n    if (!popover)\n      throw new Error(\n        `Unable to find an element by: [data-lgid=${LGIDS_SELECT.popover}]`,\n      );\n\n    // Find all options\n    const allOptions =\n      popover.querySelectorAll<HTMLLIElement>('[role=\"option\"]');\n\n    // unlikley to happen since the select will not render without options\n    if (!allOptions.length)\n      throw new Error('Unable to find any `Select` options.');\n\n    return Array.from(allOptions);\n  };\n\n  const getOptionByValue = (value: string) => {\n    if (!value) throw new Error('Value cannot be empty');\n\n    const allOptions = getAllOptions();\n\n    // Find the option with the value\n    const option = allOptions.find(node => node.textContent === value);\n\n    if (!option) return null;\n\n    return option;\n  };\n\n  return {\n    getLabel: () => getLabel,\n    getDescription: () => getDescription,\n    getInput: () => getSelectTrigger,\n    getErrorMessage: () => getErrorMessage,\n    getOptions: () => getAllOptions(),\n    getOptionByValue: (value: string) => getOptionByValue(value),\n    getPopover: () => getPopover(),\n    isDisabled: () => isInputDisabled(),\n    isError: () => isError(),\n    getInputValue: () => getSelectValue(),\n  };\n};\n"],"names":["LGID_ROOT","LGIDS_SELECT","root","errorMessage","concat","popover","buttonText","_templateObject","_templateObject2","_templateObject3","Size","XSmall","Small","Default","Large","State","FormFieldState","DropdownWidthBasis","Trigger","Option","SelectContext","createContext","size","open","disabled","colorSets","_defineProperty","Theme","Light","menu","border","palette","gray","light2","shadow","transparentize","black","option","group","label","dark1","background","base","white","hovered","focused","blue","light3","text","dark3","selected","dark2","icon","indicator","Dark","dark4","light1","sizeSets","height","warningIcon","mobileSizeSet","lineHeight","OptionClassName","createUniqueClassName","_excluded","InternalOption","_ref","children","className","glyph","onClick","onFocus","triggerScrollIntoView","hasGlyphs","description","rest","_objectWithoutProperties","theme","useDarkMode","colorSet","ref","useRef","scrollIntoView","useCallback","current","element","parent","offsetParent","scrollTop","offsetTop","clientHeight","alreadyScrolledIntoView","usePrevious","shouldScrollIntoView","useEffect","wasFocused","shouldFocus","focus","isComponentGlyph","console","error","glyphProp","undefined","checkmark","React","createElement","CheckmarkIcon","key","cx","css","_taggedTemplateLiteral","leftGlyph","rightGlyph","InputOption","_extends","role","tabIndex","onKeyDown","checked","highlighted","InputOptionContent","default","fontWeights","bold","_","Error","displayName","propTypes","PropTypes","node","isRequired","string","value","bool","optionGroupStyle","spacing","optionGroupLabelStyle","InternalOptionGroup","groupId","useIdAllocator","prefix","id","OptionGroup","oneOfType","arrayOf","oneOf","_baseQuery","breakpoints","Tablet","MobileMediaQuery","isReactEmpty","traverseSelectChildren","optionFn","Children","forEach","child","isComponentType","props","isFragment","convertToInternalElements","fallbackFn","toArray","every","consoleOnce","warn","map","_child$props","_options","getOptionValue","Array","isArray","filter","join","toString","isOptionDisabled","_option$props$disable","_group$props$disabled","_group$props","isOptionSelectable","useObservedRef","callback","_ref4","arguments","length","initialValue","_ref4$deps","deps","useMemo","nextValue","_toConsumableArray","useForwardedRef","forwardedRefOrRefs","forwardValueToRefs","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","_templateObject13","_templateObject14","_templateObject15","_templateObject16","_templateObject17","useStateRef","_useState2","_slicedToArray","useState","popoverClassName","menuMargin","baseMenuStyle","autoWidthStyles","getMenuStyles","sizeSet","color","primary","secondary","ListMenu","forwardRef","forwardedRef","referenceElement","labelId","dropdownWidthBasis","_ref$usePortal","usePortal","portalContainer","portalRef","scrollContainer","portalClassName","popoverZIndex","onEntering","onEnter","onEntered","onExiting","onExit","onExited","_useContext","useContext","availableSpace","useAvailableSpace","maxHeightValue","isUndefined","Math","min","event","stopPropagation","popoverProps","_objectSpread","Popover","active","align","Align","Bottom","justify","Justify","Start","adjustOnMutation","refEl","menuButtonTextClassName","menuButtonStyleOverrides","regular","menuButtonSizeStyle","typeScales","body1","fontSize","menuButtonModeOverrides","light","dark","hover","menuButtonFocusStyle","focusRing","input","menuButtonDeselectedStyles","menuButtonTextWrapperStyle","menuButtonTextStyle","MenuButton","_dataTestid","name","deselected","readOnly","onClose","onOpen","state","baseFontSize","__INTERNAL__menuButtonSlot__","__INTERNAL__menuButtonSlotProps__","Component","Button","buttonClassName","hoverRing","red","None","Valid","success","green","getMenuButtonStateStyles","getMenuButtonDisabledThemeStyles","ButtonSize","testId","variant","Variant","darkMode","CaretDownIcon","labelDescriptionContainerStyle","wrapperStyle","largeLabelStyles","large","Select","fwdRef","_menuButtonRef$curren2","darkModeProp","_ref$size","_ref$disabled","_ref$allowDeselect","allowDeselect","_ref$placeholder","placeholder","_ref$errorMessage","DEFAULT_MESSAGES","_ref$successMessage","successMessage","_ref$state","_ref$dropdownWidthBas","_ref$baseFontSize","BaseFontSize","Body1","_ref$dataLgid","dataLgId","idProp","ariaLabelledby","ariaLabel","defaultValue","onChange","descriptionId","menuId","setOpen","containerRef","menuButtonRef","menuButtonId","listMenuRef","providerData","onClickOutside","stillFocused","contains","target","document","addEventListener","removeEventListener","initialUncontrolledSelectedOption","_useState4","uncontrolledSelectedOption","setUncontrolledSelectedOption","_reconcileOption","previousOption","_ref2","_ref3","_sameInstance","sameInstance","sameChildrenAndValue","sameExplicitValue","sameValue","_sameChildrenAndValue","_sameExplicitValue","_sameValue","reconcileOption","selectedOption","_selectedOption","onSelect","preventDefault","setFocusedOption","getOptionClickHandler","optionDisabled","_useState6","focusedOption","enabledOptions","push","onSelectFocusedOption","onFocusFirstOption","onFocusLastOption","onFocusPreviousOption","indexOf","index","onFocusNextOption","getOptionFocusHandler","_listMenuRef$current","_menuButtonRef$curren","ctrlKey","shiftKey","altKey","isFocusInMenu","activeElement","isFocusOnButton","keyMap","Tab","Escape","Enter","Space","ArrowUp","ArrowDown","useEventListener","viewportSize","useViewportSize","canTriggerScrollIntoView","deselectionOption","renderedChildren","LeafyGreenProvider","Label","htmlFor","Description","Provider","clientWidth","FormFieldFeedback","hideFeedback","Object","values","func","shape","window","instanceOf","Element","any","lgId","getByLgId","_getLabel","queryBySelector","LGIDS_TYPOGRAPHY","_getDescription","getSelectTrigger","_getErrorMessage","LGIDS_FORM_FIELD","_getPopover","body","getAllOptions","allOptions","querySelectorAll","from","getLabel","getDescription","getInput","getErrorMessage","getOptions","getOptionByValue","find","textContent","_getOptionByValue","getPopover","isDisabled","isError","getInputValue"],"mappings":"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"}