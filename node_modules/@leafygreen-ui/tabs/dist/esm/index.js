import e,{useRef as n,useEffect as t,useMemo as r,useState as a,useCallback as o}from"react";import{useIdAllocator as l}from"@leafygreen-ui/hooks";import i from"@leafygreen-ui/portal";import c from"@leafygreen-ui/box";import{css as s,cx as d}from"@leafygreen-ui/emotion";import{Theme as f,getNodeTextContent as u,keyMap as b,isComponentType as p}from"@leafygreen-ui/lib";import{useUpdatedBaseFontSize as m}from"@leafygreen-ui/typography";import{palette as g}from"@leafygreen-ui/palette";import{fontWeights as y,typeScales as h,BaseFontSize as v,fontFamilies as w,transitionDuration as x}from"@leafygreen-ui/tokens";import O from"prop-types";import{validateAriaLabelProps as k}from"@leafygreen-ui/a11y";import j,{useDarkMode as E}from"@leafygreen-ui/leafygreen-provider";import{getByLgId as S,queryBySelector as N}from"@lg-tools/test-harnesses";function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){A(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function C(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof n?n:n+""}function A(e,n,t){return(n=C(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},R.apply(this,arguments)}function z(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function D(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function I(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,l,i=[],c=!0,s=!1;try{if(o=(t=t.call(e)).next,0===n);else for(;!(c=(r=o.call(t)).done)&&(i.push(r.value),i.length!==n);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(s)throw a}}return i}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return L(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return L(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,n){n>e.length&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var M,F,K,X,U,B,H,_,q,W,$,G,J,Q,V={light:{base:s(M||(M=D(["\n      color: ",";\n    "])),g.gray.dark1),hover:s(F||(F=D(["\n      &:hover {\n        cursor: pointer;\n        color: ",";\n        &:after {\n          background-color: ",";\n        }\n      }\n    "])),g.gray.dark3,g.gray.light2),focus:s(K||(K=D(["\n      &:focus-visible {\n        color: ",";\n\n        &:after {\n          background-color: ",";\n        }\n      }\n    "])),g.blue.base,g.blue.light1),selected:s(X||(X=D(["\n      &,\n      &:hover {\n        color: ",";\n        font-weight: ",";\n\n        &:after {\n          transform: scaleX(1);\n          background-color: ",";\n        }\n      }\n    "])),g.green.dark2,y.bold,g.green.dark1),disabled:s(U||(U=D(["\n      cursor: not-allowed;\n      color: ",";\n    "])),g.gray.light1)},dark:{base:s(B||(B=D(["\n      color: ",";\n    "])),g.gray.light1),hover:s(H||(H=D(["\n      &:hover {\n        cursor: pointer;\n        color: ",";\n\n        &:after {\n          background-color: ",";\n        }\n      }\n    "])),g.white,g.gray.dark2),focus:s(_||(_=D(["\n      &:focus-visible {\n        color: ",";\n\n        &:after {\n          background-color: ",";\n        }\n      }\n    "])),g.blue.light1,g.blue.light1),selected:s(q||(q=D(["\n      &,\n      &:hover {\n        color: ",";\n        font-weight: ",";\n\n        &:after {\n          transform: scaleX(1);\n          background-color: ",";\n        }\n      }\n    "])),g.gray.light2,y.bold,g.green.dark1),disabled:s(W||(W=D(["\n      cursor: not-allowed;\n      color: ",";\n    "])),g.gray.dark2)}},Y=A(A({},v.Body1,s($||($=D(["\n    font-size: ","px;\n    line-height: ","px;\n  "])),h.body1.fontSize,h.body1.lineHeight)),v.Body2,s(G||(G=D(["\n    font-size: ","px;\n    line-height: ","px;\n  "])),h.body2.fontSize,h.body2.lineHeight)),Z=s(J||(J=D(["\n  font-family: ",";\n  font-weight: ",";\n  position: relative;\n  display: inline-flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: center;\n  max-width: 300px;\n  padding: 12px 16px;\n  background-color: transparent;\n  border: 0px;\n  margin: 0;\n  text-decoration: none;\n  transition: ","ms color ease-in-out;\n\n  &:focus:not(:disabled) {\n    outline: none;\n    font-weight: ",";\n  }\n\n  // We create a pseudo element that's the width of the bolded text\n  // This way there's no layout shift on hover when the text is bolded.\n  &:before {\n    content: attr(data-text);\n    height: 0;\n    font-weight: ",";\n    visibility: hidden;\n    overflow: hidden;\n    user-select: none;\n    pointer-events: none;\n  }\n\n  &:after {\n    content: '';\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    height: 4px;\n    border-radius: 4px 4px 0 0;\n    transition: all ","ms ease-in-out;\n    background-color: transparent;\n    transform: scaleX(0.8);\n  }\n\n  &:hover:after {\n    transform: scaleX(0.95);\n  }\n\n  &:active:after {\n    &:after {\n      transform: scaleX(1);\n    }\n  }\n"])),w.default,y.medium,x.default,y.bold,y.bold,x.default),ee=s(Q||(Q=D(["\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  // Cannot use flexbox here to center children because it breaks text-overflow: ellipsis\n  > svg {\n    vertical-align: text-bottom;\n    margin-right: 4px;\n  }\n"]))),ne=["selected","disabled","children","className","darkMode","parentRef"],te=function(r){var a=r.selected,o=void 0!==a&&a,l=r.disabled,i=void 0!==l&&l,s=r.children,b=r.className,p=r.darkMode,g=r.parentRef,y=z(r,ne),h=n(null),v=m(),w=p?f.Dark:f.Light;t((function(){var e,n=Array.from(null!==(e=null==g?void 0:g.children)&&void 0!==e?e:[]),t=document.activeElement;t&&-1!==n.indexOf(t)&&!i&&o&&h.current&&h.current.focus()}),[g,i,o,h]);var x=u(y.name),O=P(P({},y),{},A(A(A(A({className:d(Y[v],Z,V[w].base,A(A(A({},V[w].selected,o),V[w].hover,!i&&!o),V[w].disabled,i),V[w].focus,b),role:"tab",tabIndex:o?0:-1},"aria-selected",o),"name",x),"data-text",x),"disabled",i));return"string"==typeof y.href?e.createElement(c,R({as:"a",ref:h},O),e.createElement("div",{className:ee},s)):e.createElement(c,R({as:"button",ref:h},O),e.createElement("div",{className:ee},s))};te.displayName="TabTitle";var re=["child","selected","tabRef","panelRef"],ae=e.memo((function(n){var t=n.child,a=n.selected,o=n.tabRef,c=n.panelRef,s=z(n,re),d=t.props,f=d.id,u=d.name,b=l({prefix:"tab-panel"}),p=l({prefix:"tab",id:f}),m=e.createElement(te,R({},s,{selected:a,id:p,"aria-controls":b}),u),g=r((function(){return e.cloneElement(t,A({id:b,selected:a},"aria-labelledby",p))}),[t,b,a,p]);return e.createElement(e.Fragment,null,e.createElement(i,{container:o},m),e.createElement(i,{container:c},g))}));ae.displayName="InternalTab";var oe=["selected","children"];function le(n){var t=n.selected,r=n.children,a=z(n,oe);return delete a.default,delete a.name,delete a.onClick,delete a.href,e.createElement("div",R({},a,{role:"tabpanel"}),t?r:null)}le.displayName="Tab",le.propTypes={selected:O.bool,children:O.node,name:O.oneOfType([O.string,O.node]),content:O.node,disabled:O.bool,ariaControl:O.string};var ie,ce,se,de,fe,ue,be="lg-tabs",pe={root:be,tabList:"".concat(be,"-tab_list"),tabPanels:"".concat(be,"-tab_panels")},me=A(A({},f.Light,{underlineColor:s(ie||(ie=D(["\n      background: linear-gradient(\n        0deg,\n        "," 1px,\n        rgb(255 255 255 / 0%) 1px\n      );\n    "])),g.gray.light2)}),f.Dark,{underlineColor:s(ce||(ce=D(["\n      background: linear-gradient(\n        0deg,\n        "," 1px,\n        rgb(255 255 255 / 0%) 1px\n      );\n    "])),g.gray.dark2)}),ge=s(se||(se=D(["\n  display: flex;\n  align-items: stretch;\n  justify-content: space-between;\n"]))),ye=s(de||(de=D(["\n  display: flex;\n"]))),he=s(fe||(fe=D(["\n  display: flex;\n  align-items: center;\n"]))),ve=s(ue||(ue=D(["\n  list-style: none;\n  padding: 0;\n  display: flex;\n  width: 100%;\n  overflow-x: auto;\n\n  /* Remove scrollbar */\n\n  /* Chrome, Edge, Safari and Opera */\n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  -ms-overflow-style: none; /* IE */\n  scrollbar-width: none; /* Firefox */\n"]))),we=["children","inlineChildren","className","as","baseFontSize","setSelected","selected","darkMode","data-lgid","aria-labelledby","aria-label"],xe=["disabled","onClick","onKeyDown","className"];function Oe(n){k(n,"Tabs");var t=n.children,l=n.inlineChildren,i=n.className,c=n.as,s=void 0===c?"button":c,f=n.baseFontSize,u=n.setSelected,g=n.selected,y=n.darkMode,h=n["data-lgid"],v=void 0===h?pe.root:h,w=n["aria-labelledby"],x=n["aria-label"],O=z(n,we),S=m(f),N=E(y),T=N.theme,C=N.darkMode,D=I(a(null),2),L=D[0],M=D[1],F=I(a(null),2),K=F[0],X=F[1],U=A(A({},"aria-label",x),"aria-labelledby",w),B=r((function(){return e.Children.toArray(t)}),[t]),H="number"==typeof g,_=I(a(B.findIndex((function(e){return e.props.default||0}))),2),q=_[0],W=_[1],$=H?g:q,G=H?u:W,J=o((function(e,n){null==G||G(n)}),[G]),Q=o((function(){var e=B.filter((function(e){return!e.props.disabled})).map((function(e){return B.indexOf(e)}));return[e,e.indexOf($)]}),[B,$]),V=o((function(e){if(!e.metaKey&&!e.ctrlKey)if(e.key===b.ArrowRight){var n=I(Q(),2),t=n[0],r=n[1];null==G||G(t[(r+1)%t.length])}else if(e.key===b.ArrowLeft){var a=I(Q(),2),o=a[0],l=a[1];null==G||G(o[(l-1+o.length)%o.length])}}),[Q,G]),Y=e.Children.map(t,(function(n,t){if(!p(n,"Tab"))return n;var r=t===$,a=n.props,o=a.disabled,l=a.onClick,i=a.onKeyDown,c=a.className,d=z(a,xe),f=P({as:s,disabled:o,darkMode:C,parentRef:L,className:c,onKeyDown:function(e){null==i||i(e),V(e)},onClick:o?void 0:function(e){null==l||l(e),J(e,t)}},d);return e.createElement(ae,R({child:n,selected:r,tabRef:L,panelRef:K},f))}));return e.createElement(j,{baseFontSize:16===S?16:14},e.createElement("div",R({},O,{className:i,"data-lgid":v}),Y,e.createElement("div",{className:ge},e.createElement("div",R({className:d(ve,me[T].underlineColor),"data-lgid":pe.tabList,role:"tablist",ref:M,"aria-orientation":"horizontal"},U)),e.createElement("div",{className:ye},e.createElement("div",{className:he},l))),e.createElement("div",{"data-lgid":pe.tabPanels,ref:X})))}Oe.displayName="Tabs",Oe.propTypes={children:O.node,setSelected:O.func,selected:O.number,className:O.string,as:O.oneOfType([O.string,O.func,O.elementType,O.element])};var ke=function(){var e=S(arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe.root),n=function(){var n=N(e,"[data-lgid=".concat(pe.tabList,"]"));if(!n)throw new Error("Unable to find tab list");var t=n.querySelectorAll('[role="tab"]');if(0===t.length)throw new Error("Unable to find any tabs in tab list");return Array.from(t)};return{getAllTabsInTabList:function(){return n()},getTabUtilsByName:function(e){return function(e){var t=n().find((function(n){return n.textContent===e}));return t?{getTab:function(){return t},isSelected:function(){return"true"===t.getAttribute("aria-selected")},isDisabled:function(){return t.hasAttribute("disabled")}}:null}(e)},getSelectedPanel:function(){return N(e,'[role="tabpanel"]:not(:empty)')}}};export{le as Tab,Oe as Tabs,ke as getTestUtils};
//# sourceMappingURL=index.js.map
