import e,{useRef as n,useEffect as t,useMemo as r,useState as a,useCallback as l}from"react";import{storybookExcludedControlParams as o}from"@lg-tools/storybook-utils";import i from"@leafygreen-ui/button";import c from"@leafygreen-ui/card";import{css as s,cx as d}from"@leafygreen-ui/emotion";import u from"@leafygreen-ui/icon";import f from"@leafygreen-ui/icon/dist/Export";import m from"@leafygreen-ui/icon/dist/Save";import b from"@leafygreen-ui/icon-button";import p,{useDarkMode as y}from"@leafygreen-ui/leafygreen-provider";import{useUpdatedBaseFontSize as g,Subtitle as h,Body as v}from"@leafygreen-ui/typography";import{useIdAllocator as E}from"@leafygreen-ui/hooks";import w from"@leafygreen-ui/portal";import x from"@leafygreen-ui/box";import{Theme as k,getNodeTextContent as O,keyMap as T,isComponentType as j}from"@leafygreen-ui/lib";import{palette as S}from"@leafygreen-ui/palette";import{fontWeights as C,typeScales as N,BaseFontSize as P,fontFamilies as A,transitionDuration as z}from"@leafygreen-ui/tokens";import I from"prop-types";import{validateAriaLabelProps as R}from"@leafygreen-ui/a11y";import"@lg-tools/test-harnesses";function D(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?D(Object(t),!0).forEach((function(n){L(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function M(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof n?n:n+""}function L(e,n,t){return(n=M(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function K(){return K=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},K.apply(this,arguments)}function X(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function B(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function H(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,l,o,i=[],c=!0,s=!1;try{if(l=(t=t.call(e)).next,0===n);else for(;!(c=(r=l.call(t)).done)&&(i.push(r.value),i.length!==n);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,n)||U(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,n){if(e){if("string"==typeof e)return _(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_(e,n):void 0}}function _(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var W,$,q,G,J,Q,V,Y,Z,ee,ne,te,re,ae,le={light:{base:s(W||(W=B(["\n      color: ",";\n    "])),S.gray.dark1),hover:s($||($=B(["\n      &:hover {\n        cursor: pointer;\n        color: ",";\n        &:after {\n          background-color: ",";\n        }\n      }\n    "])),S.gray.dark3,S.gray.light2),focus:s(q||(q=B(["\n      &:focus-visible {\n        color: ",";\n\n        &:after {\n          background-color: ",";\n        }\n      }\n    "])),S.blue.base,S.blue.light1),selected:s(G||(G=B(["\n      &,\n      &:hover {\n        color: ",";\n        font-weight: ",";\n\n        &:after {\n          transform: scaleX(1);\n          background-color: ",";\n        }\n      }\n    "])),S.green.dark2,C.bold,S.green.dark1),disabled:s(J||(J=B(["\n      cursor: not-allowed;\n      color: ",";\n    "])),S.gray.light1)},dark:{base:s(Q||(Q=B(["\n      color: ",";\n    "])),S.gray.light1),hover:s(V||(V=B(["\n      &:hover {\n        cursor: pointer;\n        color: ",";\n\n        &:after {\n          background-color: ",";\n        }\n      }\n    "])),S.white,S.gray.dark2),focus:s(Y||(Y=B(["\n      &:focus-visible {\n        color: ",";\n\n        &:after {\n          background-color: ",";\n        }\n      }\n    "])),S.blue.light1,S.blue.light1),selected:s(Z||(Z=B(["\n      &,\n      &:hover {\n        color: ",";\n        font-weight: ",";\n\n        &:after {\n          transform: scaleX(1);\n          background-color: ",";\n        }\n      }\n    "])),S.gray.light2,C.bold,S.green.dark1),disabled:s(ee||(ee=B(["\n      cursor: not-allowed;\n      color: ",";\n    "])),S.gray.dark2)}},oe=L(L({},P.Body1,s(ne||(ne=B(["\n    font-size: ","px;\n    line-height: ","px;\n  "])),N.body1.fontSize,N.body1.lineHeight)),P.Body2,s(te||(te=B(["\n    font-size: ","px;\n    line-height: ","px;\n  "])),N.body2.fontSize,N.body2.lineHeight)),ie=s(re||(re=B(["\n  font-family: ",";\n  font-weight: ",";\n  position: relative;\n  display: inline-flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: center;\n  max-width: 300px;\n  padding: 12px 16px;\n  background-color: transparent;\n  border: 0px;\n  margin: 0;\n  text-decoration: none;\n  transition: ","ms color ease-in-out;\n\n  &:focus:not(:disabled) {\n    outline: none;\n    font-weight: ",";\n  }\n\n  // We create a pseudo element that's the width of the bolded text\n  // This way there's no layout shift on hover when the text is bolded.\n  &:before {\n    content: attr(data-text);\n    height: 0;\n    font-weight: ",";\n    visibility: hidden;\n    overflow: hidden;\n    user-select: none;\n    pointer-events: none;\n  }\n\n  &:after {\n    content: '';\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    height: 4px;\n    border-radius: 4px 4px 0 0;\n    transition: all ","ms ease-in-out;\n    background-color: transparent;\n    transform: scaleX(0.8);\n  }\n\n  &:hover:after {\n    transform: scaleX(0.95);\n  }\n\n  &:active:after {\n    &:after {\n      transform: scaleX(1);\n    }\n  }\n"])),A.default,C.medium,z.default,C.bold,C.bold,z.default),ce=s(ae||(ae=B(["\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  // Cannot use flexbox here to center children because it breaks text-overflow: ellipsis\n  > svg {\n    vertical-align: text-bottom;\n    margin-right: 4px;\n  }\n"]))),se=["selected","disabled","children","className","darkMode","parentRef"],de=function(r){var a=r.selected,l=void 0!==a&&a,o=r.disabled,i=void 0!==o&&o,c=r.children,s=r.className,u=r.darkMode,f=r.parentRef,m=X(r,se),b=n(null),p=g(),y=u?k.Dark:k.Light;t((function(){var e,n=Array.from(null!==(e=null==f?void 0:f.children)&&void 0!==e?e:[]),t=document.activeElement;t&&-1!==n.indexOf(t)&&!i&&l&&b.current&&b.current.focus()}),[f,i,l,b]);var h=O(m.name),v=F(F({},m),{},L(L(L(L({className:d(oe[p],ie,le[y].base,L(L(L({},le[y].selected,l),le[y].hover,!i&&!l),le[y].disabled,i),le[y].focus,s),role:"tab",tabIndex:l?0:-1},"aria-selected",l),"name",h),"data-text",h),"disabled",i));return"string"==typeof m.href?e.createElement(x,K({as:"a",ref:b},v),e.createElement("div",{className:ce},c)):e.createElement(x,K({as:"button",ref:b},v),e.createElement("div",{className:ce},c))};de.displayName="TabTitle";var ue=["child","selected","tabRef","panelRef"],fe=e.memo((function(n){var t=n.child,a=n.selected,l=n.tabRef,o=n.panelRef,i=X(n,ue),c=t.props,s=c.id,d=c.name,u=E({prefix:"tab-panel"}),f=E({prefix:"tab",id:s}),m=e.createElement(de,K({},i,{selected:a,id:f,"aria-controls":u}),d),b=r((function(){return e.cloneElement(t,L({id:u,selected:a},"aria-labelledby",f))}),[t,u,a,f]);return e.createElement(e.Fragment,null,e.createElement(w,{container:l},m),e.createElement(w,{container:o},b))}));fe.displayName="InternalTab";var me=["selected","children"];function be(n){var t=n.selected,r=n.children,a=X(n,me);return delete a.default,delete a.name,delete a.onClick,delete a.href,e.createElement("div",K({},a,{role:"tabpanel"}),t?r:null)}be.displayName="Tab",be.propTypes={selected:I.bool,children:I.node,name:I.oneOfType([I.string,I.node]),content:I.node,disabled:I.bool,ariaControl:I.string};var pe,ye,ge,he,ve,Ee,we="lg-tabs",xe={root:we,tabList:"".concat(we,"-tab_list"),tabPanels:"".concat(we,"-tab_panels")},ke=L(L({},k.Light,{underlineColor:s(pe||(pe=B(["\n      background: linear-gradient(\n        0deg,\n        "," 1px,\n        rgb(255 255 255 / 0%) 1px\n      );\n    "])),S.gray.light2)}),k.Dark,{underlineColor:s(ye||(ye=B(["\n      background: linear-gradient(\n        0deg,\n        "," 1px,\n        rgb(255 255 255 / 0%) 1px\n      );\n    "])),S.gray.dark2)}),Oe=s(ge||(ge=B(["\n  display: flex;\n  align-items: stretch;\n  justify-content: space-between;\n"]))),Te=s(he||(he=B(["\n  display: flex;\n"]))),je=s(ve||(ve=B(["\n  display: flex;\n  align-items: center;\n"]))),Se=s(Ee||(Ee=B(["\n  list-style: none;\n  padding: 0;\n  display: flex;\n  width: 100%;\n  overflow-x: auto;\n\n  /* Remove scrollbar */\n\n  /* Chrome, Edge, Safari and Opera */\n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  -ms-overflow-style: none; /* IE */\n  scrollbar-width: none; /* Firefox */\n"]))),Ce=["children","inlineChildren","className","as","baseFontSize","setSelected","selected","darkMode","data-lgid","aria-labelledby","aria-label"],Ne=["disabled","onClick","onKeyDown","className"];function Pe(n){R(n,"Tabs");var t=n.children,o=n.inlineChildren,i=n.className,c=n.as,s=void 0===c?"button":c,u=n.baseFontSize,f=n.setSelected,m=n.selected,b=n.darkMode,h=n["data-lgid"],v=void 0===h?xe.root:h,E=n["aria-labelledby"],w=n["aria-label"],x=X(n,Ce),k=g(u),O=y(b),S=O.theme,C=O.darkMode,N=H(a(null),2),P=N[0],A=N[1],z=H(a(null),2),I=z[0],D=z[1],M=L(L({},"aria-label",w),"aria-labelledby",E),B=r((function(){return e.Children.toArray(t)}),[t]),U="number"==typeof m,_=H(a(B.findIndex((function(e){return e.props.default||0}))),2),W=_[0],$=_[1],q=U?m:W,G=U?f:$,J=l((function(e,n){null==G||G(n)}),[G]),Q=l((function(){var e=B.filter((function(e){return!e.props.disabled})).map((function(e){return B.indexOf(e)}));return[e,e.indexOf(q)]}),[B,q]),V=l((function(e){if(!e.metaKey&&!e.ctrlKey)if(e.key===T.ArrowRight){var n=H(Q(),2),t=n[0],r=n[1];null==G||G(t[(r+1)%t.length])}else if(e.key===T.ArrowLeft){var a=H(Q(),2),l=a[0],o=a[1];null==G||G(l[(o-1+l.length)%l.length])}}),[Q,G]),Y=e.Children.map(t,(function(n,t){if(!j(n,"Tab"))return n;var r=t===q,a=n.props,l=a.disabled,o=a.onClick,i=a.onKeyDown,c=a.className,d=X(a,Ne),u=F({as:s,disabled:l,darkMode:C,parentRef:P,className:c,onKeyDown:function(e){null==i||i(e),V(e)},onClick:l?void 0:function(e){null==o||o(e),J(e,t)}},d);return e.createElement(fe,K({child:n,selected:r,tabRef:P,panelRef:I},u))}));return e.createElement(p,{baseFontSize:16===k?16:14},e.createElement("div",K({},x,{className:i,"data-lgid":v}),Y,e.createElement("div",{className:Oe},e.createElement("div",K({className:d(Se,ke[S].underlineColor),"data-lgid":xe.tabList,role:"tablist",ref:A,"aria-orientation":"horizontal"},M)),e.createElement("div",{className:Te},e.createElement("div",{className:je},o))),e.createElement("div",{"data-lgid":xe.tabPanels,ref:D})))}Pe.displayName="Tabs",Pe.propTypes={children:I.node,setSelected:I.func,selected:I.number,className:I.string,as:I.oneOfType([I.string,I.func,I.elementType,I.element])};var Ae,ze,Ie,Re=["baseFontSize"],De=function(n){return e.createElement(c,K({},n,{className:s(Ae||(Ae=B(["\n      margin: 1em;\n    "])))}))},Fe="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ullamcorper nulla non metus auctor fringilla.",Me={title:"Components/Tabs",component:Pe,parameters:{default:"LiveExample",generate:{combineArgs:{darkMode:[!1,!0]}},controls:{exclude:[].concat((Ie=o,function(e){if(Array.isArray(e))return _(e)}(Ie)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(Ie)||U(Ie)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),["children","as","setSelected"])}},args:{darkMode:!1,children:[e.createElement(be,{key:"Tab 1",default:!0,name:"Tab 1"},e.createElement(De,null,e.createElement(h,null,"Tab 1 Content"),e.createElement(v,null,Fe))),e.createElement(be,{key:"Tab 2",name:"Tab 2 with a really long name that might overflow and stretch past the width of the Tab"},e.createElement(De,null,e.createElement(h,null,"Tab 2 Content"),e.createElement(v,null,Fe))),e.createElement(be,{key:"Tab 3",disabled:!0,name:"Tab 3"},e.createElement(De,null,e.createElement(h,null,"Tab 3 Content"),e.createElement(v,null,Fe))),e.createElement(be,{key:"Tab 4",name:e.createElement(e.Fragment,null,e.createElement(u,{glyph:"Support"})," Tab 4 with an icon in the name")},e.createElement(De,null,e.createElement(h,null,"Tab 4 Content"),e.createElement(v,null,Fe)))]},argTypes:{selected:{control:"number"}},subcomponents:{tab:be}},Le=function(n){var t=n.baseFontSize,r=X(n,Re);return e.createElement(p,{baseFontSize:16===t?16:14},e.createElement(Pe,K({className:s(ze||(ze=B(["\n        max-width: 66vw;\n      "]))),"aria-label":"Tabs to demonstrate usage of Leafygreen UI Tab Components"},r)))},Ke=Le.bind({});Ke.args={inlineChildren:e.createElement(e.Fragment,null,e.createElement(b,{"aria-label":"export"},e.createElement(f,null)),e.createElement(b,{"aria-label":"save"},e.createElement(m,null)),e.createElement(i,{variant:"primary"},"Continue"))},Ke.argTypes={inlineChildren:{control:"none"}};var Xe=function(){};export{Xe as Generated,Le as LiveExample,Ke as WithInlineChildren,Me as default};
