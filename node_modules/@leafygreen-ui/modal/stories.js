import e,{useState as n,useCallback as t}from"react";import{faker as r}from"@faker-js/faker";import{storybookArgTypes as o,storybookExcludedControlParams as a}from"@lg-tools/storybook-utils";import l from"@leafygreen-ui/button";import i from"@leafygreen-ui/code";import c from"@leafygreen-ui/copyable";import{css as s,cx as u}from"@leafygreen-ui/emotion";import{Select as m,OptionGroup as p,Option as d}from"@leafygreen-ui/select";import{breakpoints as f,transitionDuration as g,fontFamilies as y,spacing as h}from"@leafygreen-ui/tokens";import{H3 as b,Body as v,Subtitle as x}from"@leafygreen-ui/typography";import E from"prop-types";import k,{useDarkMode as O,usePopoverContext as w,PortalContextProvider as j,PopoverProvider as C}from"@leafygreen-ui/leafygreen-provider";import{Transition as N}from"react-transition-group";import D from"focus-trap-react";import{useIdAllocator as M,useEscapeKey as S}from"@leafygreen-ui/hooks";import I from"@leafygreen-ui/icon/dist/X";import A from"@leafygreen-ui/icon-button";import P from"@leafygreen-ui/portal";import{transparentize as z}from"polished";import{Theme as L}from"@leafygreen-ui/lib";import{palette as T}from"@leafygreen-ui/palette";function F(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof n?n:n+""}function R(e,n,t){return(n=F(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function V(){return V=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},V.apply(this,arguments)}function B(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function H(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function $(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,l,i=[],c=!0,s=!1;try{if(a=(t=t.call(e)).next,0===n);else for(;!(c=(r=a.call(t)).done)&&(i.push(r.value),i.length!==n);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(s)throw o}}return i}}(e,n)||q(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,n){if(e){if("string"==typeof e)return U(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?U(e,n):void 0}}function U(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var W,X="lg-modal",Z={root:X,close:"".concat(X,"-close_button")};s(W||(W=H(["\n  position: relative;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  display: flex;\n  justify-content: right;\n  flex-direction: row-reverse;\n  padding: 24px 35px 35px;\n"])));var _,G,J,K,Q,Y,ee,ne,te,re,oe,ae,le,ie,ce,se,ue,me,pe,de={Default:"default",Dark:"dark",Light:"light"},fe={Small:"small",Default:"default",Large:"large"},ge="".concat(f.Desktop+1,"px"),ye=s(_||(_=H(["\n  overflow-y: auto;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  opacity: 0;\n  transition: opacity ","ms ease-in-out;\n"])),g.default),he=R(R({},L.Light,s(G||(G=H(["\n    background-color: ",";\n  "])),z(.4,T.black))),L.Dark,s(J||(J=H(["\n    background-color: ",";\n  "])),z(.4,T.gray.dark2))),be=s(K||(K=H(["\n  opacity: 1;\n"]))),ve=s(Q||(Q=H(["\n  position: absolute;\n  min-height: 100%;\n  width: 100%;\n  padding: ","px ","px;\n  overflow-y: auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])),64,18),xe=s(Y||(Y=H(["\n  font-family: ",";\n  transition: transform ","ms ease-in-out,\n    opacity ","ms ease-in-out;\n  margin: auto;\n  max-height: calc(100% - ","px);\n  position: relative;\n  pointer-events: all;\n  transform: translate3d(0, -16px, 0);\n  opacity: 0;\n  border-radius: 24px;\n  padding: 40px 36px;\n  box-shadow: 0px 8px 20px -8px ",";\n\n  &:focus {\n    outline: none;\n  }\n"])),y.default,g.default,g.default,64,z(.4,T.black)),Ee=R(R({},L.Light,s(ee||(ee=H(["\n    color: ",";\n    background-color: ",";\n  "])),T.black,T.white)),L.Dark,s(ne||(ne=H(["\n    color: ",";\n    background-color: ",";\n  "])),T.gray.light2,T.black)),ke=s(te||(te=H(["\n  transform: translate3d(0, 0, 0);\n  opacity: 1;\n"]))),Oe={small:s(re||(re=H(["\n    width: 400px;\n  "]))),default:s(oe||(oe=H(["\n    width: 600px;\n  "]))),large:s(ae||(ae=H(["\n    width: 720px;\n\n    @media only screen and (min-width: ",") {\n      width: 960px;\n    }\n  "])),ge)},we=s(le||(le=H(["\n  position: absolute;\n  cursor: pointer;\n  // x-icon should be 24px from edge. IconButton is 28x28 and Icon is 16x16\n  // so there's already (28 - 16) / 2 = 6px of spacing. 24 - 6 = 18.\n  right: 18px;\n  top: 18px;\n"]))),je=R(R({},L.Light,R(R(R({},de.Default,s(ie||(ie=H(["\n      color: ",";\n    "])),T.gray.dark1)),de.Dark,s(ce||(ce=H(["\n      color: ",";\n    "])),T.black)),de.Light,s(se||(se=H(["\n      color: ",";\n    "])),T.gray.light2))),L.Dark,R(R(R({},de.Default,s(ue||(ue=H(["\n      color: ",";\n    "])),T.gray.base)),de.Dark,s(me||(me=H(["\n      color: ",";\n    "])),T.black)),de.Light,s(pe||(pe=H(["\n      color: ",";\n    "])),T.gray.light2))),Ce=["open","size","setOpen","shouldClose","closeIconColor","darkMode","id","children","className","contentClassName","initialFocus"],Ne=e.forwardRef((function(r,o){var a=r.open,l=void 0!==a&&a,i=r.size,c=void 0===i?fe.Default:i,s=r.setOpen,m=void 0===s?function(){}:s,p=r.shouldClose,d=void 0===p?function(){return!0}:p,f=r.closeIconColor,g=void 0===f?de.Default:f,y=r.darkMode,h=r.id,b=r.children,v=r.className,x=r.contentClassName,E=r.initialFocus,C=B(r,Ce),z=O(y),L=z.theme,T=z.darkMode,F=e.useRef(null),H=null!=o?o:F,q=$(n(null),2),U=q[0],W=q[1],X=w().isPopoverOpen,_=t((function(){m&&d()&&m(!1)}),[m,d]),G=M({prefix:"modal",id:h}),J=M({prefix:"modal"});S(_,{enabled:l&&!X});var K=E?{initialFocus:"#".concat(G," ").concat(E),fallbackFocus:"#".concat(J)}:{fallbackFocus:"#".concat(J)},Q=Object.values(fe).includes(c)?c:fe.Default;return e.createElement(N,{in:l,timeout:150,mountOnEnter:!0,unmountOnExit:!0,nodeRef:F},(function(n){return e.createElement(P,null,e.createElement("div",V({},C,{id:G,ref:H,className:u(v,ye,he[L],R({},be,"entered"===n))}),e.createElement(k,{darkMode:T},e.createElement(D,{active:"entered"===n,focusTrapOptions:K},e.createElement("div",{className:ve,ref:function(e){return W(e)}},e.createElement("div",{"data-testid":Z.root,"aria-modal":"true",role:"dialog",tabIndex:-1,className:u(xe,Ee[L],Oe[Q],R({},ke,"entered"===n),x)},e.createElement(j,{popover:{portalContainer:U,scrollContainer:U}},b,e.createElement(A,{id:J,"data-testid":Z.close,onClick:_,"aria-label":"Close modal",className:u(we,je[L][g])},e.createElement(I,null)))))))))}))}));Ne.displayName="ModalView";var De,Me,Se,Ie,Ae,Pe,ze=e.forwardRef((function(n,t){return e.createElement(C,null,e.createElement(Ne,V({},n,{ref:t})))}));ze.displayName="Modal",ze.propTypes={open:E.bool,size:E.oneOf(Object.values(fe)),children:E.node,shouldClose:E.func,className:E.string,setOpen:E.func,darkMode:E.bool,closeIconColor:E.oneOf(Object.values(de))};r.seed(0);var Le,Te=s(De||(De=H(["\n  & > * + * {\n    margin-top: ","px;\n  }\n"])),h[3]),Fe={title:"Components/Modals/Modal",component:ze,argTypes:{darkMode:o.darkMode,size:{options:Object.values(fe),control:"radio"},closeIconColor:{options:Object.values(de),control:"radio"}},args:{open:!0,className:s(Me||(Me=H(["\n      z-index: 1;\n    "]))),children:e.createElement("div",{className:Te},e.createElement(b,null,"Base modal"),e.createElement(v,null,"Modal Content goes here."))},parameters:{default:"LiveExample",controls:{exclude:[].concat((Le=a,function(e){if(Array.isArray(e))return U(e)}(Le)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(Le)||q(Le)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),["setOpen","shouldClose","children","open"])}}},Re=function(t){var r=$(n(!1),2),o=r[0],a=r[1];return e.createElement("div",null,e.createElement(l,{onClick:function(){return a((function(e){return!e}))}},"Open Modal"),e.createElement(ze,V({},t,{open:o,setOpen:a})))};Re.parameters={chromatic:{disableSnapshot:!0}},Re.args={open:void 0};var Ve=function(n){return e.createElement("div",{className:s(Se||(Se=H(["\n        height: 100vh;\n        min-height: ",";\n      "])),f.Desktop)},e.createElement(ze,n))},Be=Ve.bind({}),He=Ve.bind({});He.args={darkMode:!0};var $e=Ve.bind({});$e.args={children:e.createElement("div",{className:u(s(Ie||(Ie=H(["\n          height: 200vh;\n        "]))),Te)},e.createElement(x,null,"Modal Content goes here."),r.lorem.paragraphs(24,"\n").split("\n").map((function(n){return e.createElement(v,null,n)})))};var qe=function(t){var o=$(n("cat"),2),a=o[0],l=o[1];return e.createElement("div",{className:s(Ae||(Ae=H(["\n        height: 100vh;\n        min-height: ",";\n      "])),f.Desktop)},e.createElement(ze,t,e.createElement("div",{className:Te},e.createElement(x,null,"Modal Content goes here."),r.lorem.paragraphs(2,"\n").split("\n").map((function(n){return e.createElement(v,null,n)})),e.createElement("div",null,e.createElement(m,{label:"label",size:"small",placeholder:"animals",name:"pets",value:a,onChange:l,usePortal:!0},e.createElement(p,{label:"Common"},e.createElement(d,{value:"dog"},"Dog"),e.createElement(d,{value:"cat"},"Cat"),e.createElement(d,{value:"axolotl"},"Axolotl")))))))};function Ue(n){return e.createElement("div",{className:s(Pe||(Pe=H(["\n        height: 100vh;\n        min-height: ",";\n      "])),f.Desktop)},e.createElement(ze,n,e.createElement("div",{className:Te},e.createElement("div",null,"Modal Content goes here."),e.createElement(c,null,"Hello world in a modal"),e.createElement(i,{copyable:!0,language:"javascript"},"\n\nconst myVar = 42;\n\nvar myObj = {\n  someProp: ['arr', 'ay'],\n  regex: /([A-Z])w+/\n}\n\nexport default class myClass {\n  constructor(){\n    // access properties\n    this.myProp = false\n  }\n}\n\nfunction greeting(entity) {\n  return `Hello, ${entity}! Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper.`;\n}\n \nconsole.log(greeting('World'));\n\n"))))}export{Be as Basic,Ue as CopyableModal,He as DarkMode,qe as DefaultSelect,Re as LiveExample,$e as Scroll,Fe as default};
