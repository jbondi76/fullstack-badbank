import e,{useState as n,useCallback as t}from"react";import{css as r,cx as o}from"@leafygreen-ui/emotion";import a from"prop-types";import i,{useDarkMode as l,usePopoverContext as c,PortalContextProvider as u,PopoverProvider as s}from"@leafygreen-ui/leafygreen-provider";import{Transition as f}from"react-transition-group";import p from"focus-trap-react";import{useIdAllocator as d,useEscapeKey as m}from"@leafygreen-ui/hooks";import y from"@leafygreen-ui/icon/dist/X";import g from"@leafygreen-ui/icon-button";import b from"@leafygreen-ui/portal";import{transparentize as h}from"polished";import{Theme as v}from"@leafygreen-ui/lib";import{palette as x}from"@leafygreen-ui/palette";import{breakpoints as k,transitionDuration as O,fontFamilies as w}from"@leafygreen-ui/tokens";var j,E="lg-modal",D={root:E,close:"".concat(E,"-close_button")};function N(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof n?n:n+""}function C(e,n,t){return(n=N(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},I.apply(this,arguments)}function S(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function M(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function P(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n);else for(;!(c=(r=a.call(t)).done)&&(l.push(r.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return L(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return L(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,n){n>e.length&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var A=r(j||(j=M(["\n  position: relative;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  display: flex;\n  justify-content: right;\n  flex-direction: row-reverse;\n  padding: 24px 35px 35px;\n"]))),F=function(n){var t=n.children,r=n.className;return e.createElement("div",{className:o(A,r)},t)};F.displayName="Footer";var z,R,T,B,U,V,X,$,_,q,G,H,J,K,Q,W,Y,Z,ee,ne={Default:"default",Dark:"dark",Light:"light"},te={Small:"small",Default:"default",Large:"large"},re="".concat(k.Desktop+1,"px"),oe=r(z||(z=M(["\n  overflow-y: auto;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  opacity: 0;\n  transition: opacity ","ms ease-in-out;\n"])),O.default),ae=C(C({},v.Light,r(R||(R=M(["\n    background-color: ",";\n  "])),h(.4,x.black))),v.Dark,r(T||(T=M(["\n    background-color: ",";\n  "])),h(.4,x.gray.dark2))),ie=r(B||(B=M(["\n  opacity: 1;\n"]))),le=r(U||(U=M(["\n  position: absolute;\n  min-height: 100%;\n  width: 100%;\n  padding: ","px ","px;\n  overflow-y: auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])),64,18),ce=r(V||(V=M(["\n  font-family: ",";\n  transition: transform ","ms ease-in-out,\n    opacity ","ms ease-in-out;\n  margin: auto;\n  max-height: calc(100% - ","px);\n  position: relative;\n  pointer-events: all;\n  transform: translate3d(0, -16px, 0);\n  opacity: 0;\n  border-radius: 24px;\n  padding: 40px 36px;\n  box-shadow: 0px 8px 20px -8px ",";\n\n  &:focus {\n    outline: none;\n  }\n"])),w.default,O.default,O.default,64,h(.4,x.black)),ue=C(C({},v.Light,r(X||(X=M(["\n    color: ",";\n    background-color: ",";\n  "])),x.black,x.white)),v.Dark,r($||($=M(["\n    color: ",";\n    background-color: ",";\n  "])),x.gray.light2,x.black)),se=r(_||(_=M(["\n  transform: translate3d(0, 0, 0);\n  opacity: 1;\n"]))),fe={small:r(q||(q=M(["\n    width: 400px;\n  "]))),default:r(G||(G=M(["\n    width: 600px;\n  "]))),large:r(H||(H=M(["\n    width: 720px;\n\n    @media only screen and (min-width: ",") {\n      width: 960px;\n    }\n  "])),re)},pe=r(J||(J=M(["\n  position: absolute;\n  cursor: pointer;\n  // x-icon should be 24px from edge. IconButton is 28x28 and Icon is 16x16\n  // so there's already (28 - 16) / 2 = 6px of spacing. 24 - 6 = 18.\n  right: 18px;\n  top: 18px;\n"]))),de=C(C({},v.Light,C(C(C({},ne.Default,r(K||(K=M(["\n      color: ",";\n    "])),x.gray.dark1)),ne.Dark,r(Q||(Q=M(["\n      color: ",";\n    "])),x.black)),ne.Light,r(W||(W=M(["\n      color: ",";\n    "])),x.gray.light2))),v.Dark,C(C(C({},ne.Default,r(Y||(Y=M(["\n      color: ",";\n    "])),x.gray.base)),ne.Dark,r(Z||(Z=M(["\n      color: ",";\n    "])),x.black)),ne.Light,r(ee||(ee=M(["\n      color: ",";\n    "])),x.gray.light2))),me=["open","size","setOpen","shouldClose","closeIconColor","darkMode","id","children","className","contentClassName","initialFocus"],ye=e.forwardRef((function(r,a){var s=r.open,h=void 0!==s&&s,v=r.size,x=void 0===v?te.Default:v,k=r.setOpen,O=void 0===k?function(){}:k,w=r.shouldClose,j=void 0===w?function(){return!0}:w,E=r.closeIconColor,N=void 0===E?ne.Default:E,M=r.darkMode,L=r.id,A=r.children,F=r.className,z=r.contentClassName,R=r.initialFocus,T=S(r,me),B=l(M),U=B.theme,V=B.darkMode,X=e.useRef(null),$=null!=a?a:X,_=P(n(null),2),q=_[0],G=_[1],H=c().isPopoverOpen,J=t((function(){O&&j()&&O(!1)}),[O,j]),K=d({prefix:"modal",id:L}),Q=d({prefix:"modal"});m(J,{enabled:h&&!H});var W=R?{initialFocus:"#".concat(K," ").concat(R),fallbackFocus:"#".concat(Q)}:{fallbackFocus:"#".concat(Q)},Y=Object.values(te).includes(x)?x:te.Default;return e.createElement(f,{in:h,timeout:150,mountOnEnter:!0,unmountOnExit:!0,nodeRef:X},(function(n){return e.createElement(b,null,e.createElement("div",I({},T,{id:K,ref:$,className:o(F,oe,ae[U],C({},ie,"entered"===n))}),e.createElement(i,{darkMode:V},e.createElement(p,{active:"entered"===n,focusTrapOptions:W},e.createElement("div",{className:le,ref:function(e){return G(e)}},e.createElement("div",{"data-testid":D.root,"aria-modal":"true",role:"dialog",tabIndex:-1,className:o(ce,ue[U],fe[Y],C({},se,"entered"===n),z)},e.createElement(u,{popover:{portalContainer:q,scrollContainer:q}},A,e.createElement(g,{id:Q,"data-testid":D.close,onClick:J,"aria-label":"Close modal",className:o(pe,de[U][N])},e.createElement(y,null)))))))))}))}));ye.displayName="ModalView";var ge=e.forwardRef((function(n,t){return e.createElement(s,null,e.createElement(ye,I({},n,{ref:t})))}));ge.displayName="Modal",ge.propTypes={open:a.bool,size:a.oneOf(Object.values(te)),children:a.node,shouldClose:a.func,className:a.string,setOpen:a.func,darkMode:a.bool,closeIconColor:a.oneOf(Object.values(ne))};export{ne as CloseIconColor,F as Footer,D as LGIDS_MODAL,te as ModalSize,ye as ModalView,ge as default};
//# sourceMappingURL=index.js.map
