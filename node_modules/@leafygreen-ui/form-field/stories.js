import e,{useContext as n,forwardRef as t}from"react";import r from"@leafygreen-ui/button";import{css as a,cx as i}from"@leafygreen-ui/emotion";import o,{glyphs as l}from"@leafygreen-ui/icon";import s from"@leafygreen-ui/icon-button";import c,{useDarkMode as d}from"@leafygreen-ui/leafygreen-provider";import{Size as p,spacing as u,typeScales as b,Variant as f,color as m,fontFamilies as g,fontWeights as h,transitionDuration as y,focusRing as v,hoverRing as x}from"@leafygreen-ui/tokens";import{useUpdatedBaseFontSize as E,Error as z,Body as k,Label as w,Description as O}from"@leafygreen-ui/typography";import{useIdAllocator as N}from"@leafygreen-ui/hooks";import{createUniqueClassName as S,Theme as j}from"@leafygreen-ui/lib";import{palette as M}from"@leafygreen-ui/palette";function F(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?F(Object(t),!0).forEach((function(n){I(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function D(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof n?n:n+""}function I(e,n,t){return(n=D(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},C.apply(this,arguments)}function L(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function H(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var V,X,T,W,_,A,B,G,q,J,K="lg-form_field",Q={root:K,description:"".concat(K,"-description"),errorMessage:"".concat(K,"-error_message"),feedback:"".concat(K,"-feedback"),input:"".concat(K,"-input"),label:"".concat(K,"-label"),optional:"".concat(K,"-optional"),successMessage:"".concat(K,"-success_message")},R="This input needs your attention",U="Success",Y={None:"none",Error:"error",Valid:"valid"},Z={disabled:!1,size:p.Default,state:Y.None},$=e.createContext(Z),ee=function(n){var t=n.value,r=n.children;return e.createElement($.Provider,{value:t},r)},ne=function(){return n($)},te=function(e){var n=e.baseFontSize,t=e.size;return t===p.XSmall||t===p.Small?a(V||(V=H(["\n      font-size: ","px;\n      line-height: ","px;\n    "])),b.body1.fontSize,b.body1.lineHeight):t===p.Default?a(X||(X=H(["\n      font-size: ","px;\n      line-height: ","px;\n    "])),n,b.body1.lineHeight):t===p.Large?a(T||(T=H(["\n      font-size: ","px;\n      line-height: ","px;\n    "])),b.large.fontSize,b.large.lineHeight):void 0},re=function(e){return e===Y.Error?f.Error:e===Y.Valid?f.Success:f.Primary},ae=a(W||(W=H(["\n  display: flex;\n  flex-direction: column;\n"]))),ie=a(_||(_=H(["\n  margin-bottom: ","px;\n"])),u[100]),oe=a(A||(A=H(["\n  display: flex;\n  gap: ","px;\n"])),u[100]),le=a(B||(B=H(["\n  padding-top: ","px;\n"])),u[100]),se=a(G||(G=H(["\n  opacity: 0;\n"]))),ce=a(q||(q=H(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),de=function(e){return a(J||(J=H(["\n    height: ","px;\n  "])),e===p.Large?b.large.lineHeight:b.body1.lineHeight)},pe=["baseFontSize","disabled","errorMessage","hideFeedback","id","size","state","successMessage"],ue=function(n){var t=n.baseFontSize,r=n.disabled,a=n.errorMessage,l=n.hideFeedback,s=void 0!==l&&l,c=n.id,p=n.size,u=n.state,b=n.successMessage,f=L(n,pe),g=d().theme,h=E(t),y=te({baseFontSize:h,size:p}),v=u===Y.Error,x=(v||u===Y.Valid)&&!r,w=x?{glyph:v?"Warning":"Checkmark",fill:m[g].icon[re(u)].default,title:v?"Error":"Valid"}:void 0;return e.createElement("div",C({id:c,"data-lgid":Q.feedback,"data-testid":Q.feedback,className:i(oe,I(I({},le,x),se,s)),"aria-live":"polite","aria-relevant":"all"},f),x&&e.createElement(e.Fragment,null,w&&e.createElement("div",{className:i(ce,de(p))},e.createElement(o,C({},w,{"aria-hidden":!0}))),v?e.createElement(z,{"data-lgid":Q.errorMessage,"data-testid":Q.errorMessage,className:y},a):e.createElement(k,{"data-lgid":Q.successMessage,"data-testid":Q.successMessage,className:y},b)))};ue.displayName="FormFieldFeedback";var be,fe,me,ge,he,ye,ve,xe,Ee,ze,ke,we,Oe,Ne,Se,je,Me=["label","description","state","id","disabled"],Fe=["label","description","children","baseFontSize","state","size","disabled","errorMessage","successMessage","className","darkMode","optional","id"],Pe=t((function(n,t){var r=n.label,a=n.description,o=n.children,l=n.baseFontSize,s=n.state,d=void 0===s?Y.None:s,u=n.size,b=void 0===u?p.Default:u,f=n.disabled,m=void 0!==f&&f,g=n.errorMessage,h=void 0===g?R:g,y=n.successMessage,v=void 0===y?U:y,x=n.className,z=n.darkMode,k=n.optional,S=n.id,j=L(n,Fe),M=E(l),F=te({baseFontSize:M,size:b}),D=function(e){var n,t=e.label,r=e.description,a=e.state,i=e.id,o=e.disabled,l=L(e,Me),s=N({prefix:Q.label}),c=N({prefix:Q.description}),d=N({prefix:Q.feedback}),p=N({prefix:Q.input}),u=null!=i?i:p,b=a===Y.Error,f=a!==Y.None,m=t?s:l["aria-labelledby"],g=t||m?void 0:l["aria-label"],h="".concat(r?c:""," ").concat(f?d:"").trim(),y=null!==(n=l["aria-invalid"])&&void 0!==n?n:b;return{labelId:s,descriptionId:c,feedbackId:d,inputId:u,inputProps:{id:u,"aria-labelledby":m,"aria-describedby":h,"aria-label":g,"aria-disabled":o,readOnly:l.readOnly?l.readOnly:o,"aria-invalid":y}}}(P({label:r,description:a,state:d,id:S,disabled:m},j)),H=D.labelId,V=D.descriptionId,X=D.feedbackId,T=D.inputId,W=D.inputProps,_={baseFontSize:M,disabled:m,errorMessage:h,id:X,size:b,state:d,successMessage:v};return e.createElement(c,{darkMode:z},e.createElement(ee,{value:{disabled:m,size:b,state:d,inputProps:W,optional:k}},e.createElement("div",C({className:i(F,x),ref:t},j),e.createElement("div",{className:i(ae,I({},ie,!(!r&&!a)))},r&&e.createElement(w,{"data-testid":Q.label,className:F,htmlFor:T,id:H,disabled:m},r),a&&e.createElement(O,{"data-testid":Q.description,className:F,id:V,disabled:m},a)),o,e.createElement(ue,_))))}));Pe.displayName="FormField";var De=S("form-field-input"),Ie=S("form-field-icon"),Ce=function(e){return"0 0 0 100px ".concat(e," inset")},Le=a(be||(be=H(["\n  display: flex;\n  align-items: center;\n  gap: ","px;\n  font-size: inherit;\n  line-height: inherit;\n  font-family: ",";\n  width: 100%;\n  height: 36px;\n  font-weight: ",";\n  border: 1px solid;\n  z-index: 1;\n  outline: none;\n  border-radius: 6px;\n  transition: ","ms ease-in-out;\n  transition-property: border-color, box-shadow;\n  z-index: 0;\n\n  & ."," {\n    font-family: ",";\n    color: inherit;\n    background-color: inherit;\n    font-size: inherit;\n    line-height: inherit;\n    outline: none;\n    border: none;\n  }\n\n  & ."," svg,\n  & svg {\n    min-height: 16px;\n    min-width: 16px;\n  }\n"])),u[1],g.default,h.regular,y.default,De,g.default,Ie),He=function(e){return a(me||(me=H(["\n  @supports selector(:has(a, b)) {\n    &:focus-within:not(:has(.",":focus)) {\n      ",'\n    }\n  }\n\n  /* Fallback for when "has" is unsupported */\n  @supports not selector(:has(a, b)) {\n    &:focus-within {\n      ',"\n    }\n  }\n"])),Ie,e,e)},Ve=I(I({},j.Light,He("\n     {\n      box-shadow: ".concat(v.light.input,";\n      border-color: ").concat(M.white,";\n    }\n  "))),j.Dark,He("\n     {\n      box-shadow: ".concat(v.dark.input,";\n      border-color: ").concat(M.gray.dark4,";\n    }\n  "))),Xe="&:has(button.".concat(Ie,")"),Te=I(I(I(I({},p.XSmall,a(ge||(ge=H(["\n    height: 22px;\n    padding-inline: ","px;\n\n    "," {\n      padding-inline-end: ","px;\n    }\n  "])),u[200],Xe,u[100])),p.Small,a(he||(he=H(["\n    height: 28px;\n    padding-inline: ","px;\n\n    "," {\n      padding-inline-end: ","px;\n    }\n  "])),u[200],Xe,u[100])),p.Default,a(ye||(ye=H(["\n    height: 36px;\n    padding-inline: ","px;\n\n    "," {\n      padding-inline-end: ","px;\n    }\n  "])),u[300],Xe,u[150])),p.Large,a(ve||(ve=H(["\n    height: 48px;\n    padding-inline: ","px;\n\n    "," {\n      padding-inline-end: ","px;\n    }\n  "])),u[300],Xe,u[200]));function We(e){var n=e.disabled,t=e.size,r=e.state,o=e.theme;return i(Le,function(e){var n=e===j.Dark?M.gray.dark4:m.light.background.primary.default;return a(fe||(fe=H(["\n    color: ",";\n    background: ",";\n    border: 1px solid;\n\n    & ."," {\n      &:-webkit-autofill {\n        color: ",";\n        background: ",";\n        border: 1px solid ",";\n        -webkit-text-fill-color: ",";\n        box-shadow: ",";\n\n        &:focus {\n          box-shadow: ",",\n            ",";\n          border-color: ",";\n        }\n\n        &:hover:not(:focus) {\n          box-shadow: ",",\n            ",";\n        }\n      }\n\n      &::placeholder {\n        font-weight: ",";\n        color: ",";\n      }\n    }\n  "])),m[e].text.primary.default,n,De,m[e].text.primary.default,n,m[e].border.primary.default,m[e].text.primary.default,Ce(n),Ce(n),v[e].input,m[e].border.primary.focus,Ce(n),x[e].gray,h.regular,m[e].text.placeholder.default)}(o),Te[t],I(I({},i(function(e){var n=e.theme,t=e.state;return I(I(I({},Y.Error,a(xe||(xe=H(["\n      border-color: ",";\n\n      &:hover,\n      &:active {\n        &:not(:focus) {\n          box-shadow: ",";\n        }\n      }\n    "])),m[n].border.error.default,x[n].red)),Y.None,a(Ee||(Ee=H(["\n      border-color: ",";\n\n      &:hover,\n      &:active {\n        &:not(:focus) {\n          box-shadow: ",";\n        }\n      }\n    "])),m[n].border.primary.default,x[n].gray)),Y.Valid,a(ze||(ze=H(["\n      border-color: ",";\n\n      &:hover,\n      &:active {\n        &:not(:focus) {\n          box-shadow: ",";\n        }\n      }\n    "])),m[n].border.success.default,x[n].green))[t]}({theme:o,state:r}),Ve[o]),!n),function(e){return a(ke||(ke=H(["\n    cursor: not-allowed;\n    color: ",";\n    background-color: ",";\n    border-color: ",";\n\n    &:hover,\n    &:active {\n      &:not(:focus) {\n        box-shadow: inherit;\n      }\n    }\n\n    & ."," {\n      cursor: not-allowed;\n      pointer-events: none;\n      color: ",";\n\n      &::placeholder {\n        color: inherit;\n      }\n\n      &:-webkit-autofill {\n        &,\n        &:hover,\n        &:focus {\n          appearance: none;\n\n          border: 1px solid ",";\n          -webkit-text-fill-color: ",";\n          box-shadow: ",";\n        }\n\n        &:hover:not(:focus) {\n          box-shadow: inherit;\n        }\n      }\n    }\n  "])),m[e].text.disabled.default,m[e].background.disabled.default,m[e].border.disabled.default,De,m[e].text.disabled.default,m[e].border.disabled.hover,m[e].text.disabled.hover,Ce(m[e].background.disabled.hover))}(o),n))}var _e,Ae=a(we||(we=H(["\n  width: 100%;\n"]))),Be=a(Oe||(Oe=H(["\n  display: flex;\n  align-items: center;\n  gap: ","px;\n"])),u[100]),Ge=function(e){return a(Ne||(Ne=H(["\n    color: ",";\n  "])),m[e].icon.disabled.default)},qe=function(e){return a(Se||(Se=H(["\n    color: ",";\n  "])),m[e].icon.secondary.default)},Je=function(e){return a(je||(je=H(["\n    color: ",";\n\n    font-size: 12px;\n    line-height: 12px;\n    font-style: italic;\n    font-weight: ",";\n    display: flex;\n    align-items: center;\n    > p {\n      margin: 0;\n    }\n  "])),m[e].text.secondary.default,h.regular)},Ke=["contentEnd","className","children"],Qe=t((function(n,t){var r=n.contentEnd,a=n.className,o=n.children,l=L(n,Ke),s=d().theme,c=ne(),u=c.disabled,b=c.size,f=c.state,m=c.inputProps,g=c.optional,h=We({disabled:u,size:null!=b?b:p.Default,state:f,theme:s}),y=e.cloneElement(o,P(P({},m),{},{className:i(De,o.props.className)})),v=f===Y.None&&!u&&g,x=v||r;return e.createElement("div",C({},l,{ref:t,className:i(h,a)}),e.createElement("div",{className:Ae},y),x&&e.createElement("div",{className:Be},v&&e.createElement("div",{"data-lgid":Q.optional,className:Je(s)},e.createElement("p",null,"Optional")),r&&e.cloneElement(r,{className:i(Ie,qe(s),I({},Ge(s),u),r.props.className)})))}));Qe.displayName="FormFieldInputWrapper";var Re=["label","description","state","size","disabled","glyph"],Ue=["label","description","state","size","disabled","glyph"],Ye=["glyph"],Ze={title:"Components/FormField",component:Pe,parameters:{default:"LiveExample",generate:{storyNames:["LargeSize","DefaultSize","SmallSize","XSmallSize"],combineArgs:{darkMode:[!1,!0],optional:[!1,!0],description:[void 0,"Description"],contentEnd:[void 0,e.createElement(o,{glyph:"Cloud",key:""})],state:Object.values(Y),disabled:[!1,!0]},excludeCombinations:[{disabled:!0,state:Y.Error}],args:{children:e.createElement("input",{placeholder:"placeholder"})},decorator:function(n,t){return e.createElement(c,{darkMode:null==t?void 0:t.args.darkMode},e.createElement(n,null,e.createElement(Qe,{contentEnd:null==t?void 0:t.args.contentEnd},null==t?void 0:t.args.children)))}}},args:{label:"Label",description:"Description",errorMessage:"This is a notification",successMessage:"Success",size:p.Default,state:Y.None,glyph:"Beaker"},argTypes:{darkMode:{control:"boolean"},label:{control:"text"},description:{control:"text"},errorMessage:{control:"text"},successMessage:{control:"text"},size:{control:"select",options:Object.values(p)},state:{control:"select",options:Object.values(Y)},glyph:{control:"select",options:Object.keys(l)}}},$e=function(n){var t=n.label,r=n.description,a=n.state,i=n.size,l=n.disabled,s=n.glyph,c=L(n,Re);return e.createElement(Pe,C({label:t,description:r,state:a,size:i,disabled:l},c),e.createElement(Qe,{role:"combobox",tabIndex:-1,contentEnd:e.createElement(o,{glyph:s})},e.createElement("input",{placeholder:"placeholder"})))},en=function(n){var t=n.label,r=n.description,a=n.state,i=n.size,l=n.disabled,c=n.glyph,d=L(n,Ue);return e.createElement(Pe,C({label:t,description:r,state:a,size:i,disabled:l},d),e.createElement(Qe,{role:"combobox",tabIndex:-1,contentEnd:e.createElement(s,{"aria-label":"Icon"},e.createElement(o,{glyph:c}))},e.createElement("input",{placeholder:"placeholder"})))},nn=function(n){n.glyph;var t=L(n,Ye);return e.createElement(Pe,t,e.createElement(Qe,{role:"combobox",tabIndex:-1,contentEnd:e.createElement("span",{className:a(_e||(_e=H(["\n            display: flex;\n            align-items: center;\n            gap: 0;\n          "])))},e.createElement(s,{"aria-label":"Icon"},e.createElement(o,{glyph:"XWithCircle"})),e.createElement(o,{glyph:"CaretDown"}))},e.createElement("input",{placeholder:"placeholder"})))},tn=function(n){var t=ne().inputProps;return e.createElement(r,{rightGlyph:e.createElement(o,C({glyph:n.glyph},t))},"Click Me")},rn=function(n){return e.createElement(Pe,n,e.createElement(tn,n))},an=function(){return e.createElement(e.Fragment,null)};an.parameters={generate:{args:{size:p.Large}}};var on=function(){return e.createElement(e.Fragment,null)};on.parameters={generate:{args:{size:p.Default}}};var ln=function(){return e.createElement(e.Fragment,null)};ln.parameters={generate:{args:{size:p.Small}}};var sn=function(){return e.createElement(e.Fragment,null)};sn.parameters={generate:{args:{size:p.XSmall}}};export{rn as Custom_ButtonInput,nn as Custom_TwoIcons,on as DefaultSize,an as LargeSize,$e as LiveExample,ln as SmallSize,en as WithIconButton,sn as XSmallSize,Ze as default};
