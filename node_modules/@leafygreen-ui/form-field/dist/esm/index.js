import e,{useContext as n,forwardRef as r}from"react";import{css as t,cx as i}from"@leafygreen-ui/emotion";import a,{useDarkMode as o}from"@leafygreen-ui/leafygreen-provider";import{Size as l,spacing as s,typeScales as d,Variant as c,color as u,fontFamilies as p,fontWeights as f,transitionDuration as b,focusRing as m,hoverRing as g}from"@leafygreen-ui/tokens";import{useUpdatedBaseFontSize as h,Error as y,Body as v,Label as x,Description as w}from"@leafygreen-ui/typography";import O from"@leafygreen-ui/icon";import{useIdAllocator as k}from"@leafygreen-ui/hooks";import{createUniqueClassName as E,Theme as z}from"@leafygreen-ui/lib";import{palette as N}from"@leafygreen-ui/palette";var j="lg-form_field",S={root:j,description:"".concat(j,"-description"),errorMessage:"".concat(j,"-error_message"),feedback:"".concat(j,"-feedback"),input:"".concat(j,"-input"),label:"".concat(j,"-label"),optional:"".concat(j,"-optional"),successMessage:"".concat(j,"-success_message")},P={error:"This input needs your attention",success:"Success"};function F(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function M(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?F(Object(r),!0).forEach((function(n){I(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function D(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,n);if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof n?n:n+""}function I(e,n,r){return(n=D(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function H(){return H=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},H.apply(this,arguments)}function V(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function L(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var _,C,T,W,X,q,A,B,G,J,K={None:"none",Error:"error",Valid:"valid"},Q={disabled:!1,size:l.Default,state:K.None},R=e.createContext(Q),U=function(n){var r=n.value,t=n.children;return e.createElement(R.Provider,{value:r},t)},Y=function(){return n(R)},Z=function(e){var n=e.baseFontSize,r=e.size;return r===l.XSmall||r===l.Small?t(_||(_=L(["\n      font-size: ","px;\n      line-height: ","px;\n    "])),d.body1.fontSize,d.body1.lineHeight):r===l.Default?t(C||(C=L(["\n      font-size: ","px;\n      line-height: ","px;\n    "])),n,d.body1.lineHeight):r===l.Large?t(T||(T=L(["\n      font-size: ","px;\n      line-height: ","px;\n    "])),d.large.fontSize,d.large.lineHeight):void 0},$=function(e){return e===K.Error?c.Error:e===K.Valid?c.Success:c.Primary},ee=t(W||(W=L(["\n  display: flex;\n  flex-direction: column;\n"]))),ne=t(X||(X=L(["\n  margin-bottom: ","px;\n"])),s[100]),re=t(q||(q=L(["\n  display: flex;\n  gap: ","px;\n"])),s[100]),te=t(A||(A=L(["\n  padding-top: ","px;\n"])),s[100]),ie=t(B||(B=L(["\n  opacity: 0;\n"]))),ae=t(G||(G=L(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),oe=function(e){return t(J||(J=L(["\n    height: ","px;\n  "])),e===l.Large?d.large.lineHeight:d.body1.lineHeight)},le=["baseFontSize","disabled","errorMessage","hideFeedback","id","size","state","successMessage"],se=function(n){var r=n.baseFontSize,t=n.disabled,a=n.errorMessage,l=n.hideFeedback,s=void 0!==l&&l,d=n.id,c=n.size,p=n.state,f=n.successMessage,b=V(n,le),m=o().theme,g=h(r),x=Z({baseFontSize:g,size:c}),w=p===K.Error,k=(w||p===K.Valid)&&!t,E=k?{glyph:w?"Warning":"Checkmark",fill:u[m].icon[$(p)].default,title:w?"Error":"Valid"}:void 0;return e.createElement("div",H({id:d,"data-lgid":S.feedback,"data-testid":S.feedback,className:i(re,I(I({},te,k),ie,s)),"aria-live":"polite","aria-relevant":"all"},b),k&&e.createElement(e.Fragment,null,E&&e.createElement("div",{className:i(ae,oe(c))},e.createElement(O,H({},E,{"aria-hidden":!0}))),w?e.createElement(y,{"data-lgid":S.errorMessage,"data-testid":S.errorMessage,className:x},a):e.createElement(v,{"data-lgid":S.successMessage,"data-testid":S.successMessage,className:x},f)))};se.displayName="FormFieldFeedback";var de,ce,ue,pe,fe,be,me,ge,he,ye,ve,xe,we,Oe,ke,Ee,ze=["label","description","state","id","disabled"],Ne=["label","description","children","baseFontSize","state","size","disabled","errorMessage","successMessage","className","darkMode","optional","id"],je=r((function(n,r){var t=n.label,o=n.description,s=n.children,d=n.baseFontSize,c=n.state,u=void 0===c?K.None:c,p=n.size,f=void 0===p?l.Default:p,b=n.disabled,m=void 0!==b&&b,g=n.errorMessage,y=void 0===g?P.error:g,v=n.successMessage,O=void 0===v?P.success:v,E=n.className,z=n.darkMode,N=n.optional,j=n.id,F=V(n,Ne),D=h(d),L=Z({baseFontSize:D,size:f}),_=function(e){var n,r=e.label,t=e.description,i=e.state,a=e.id,o=e.disabled,l=V(e,ze),s=k({prefix:S.label}),d=k({prefix:S.description}),c=k({prefix:S.feedback}),u=k({prefix:S.input}),p=null!=a?a:u,f=i===K.Error,b=i!==K.None,m=r?s:l["aria-labelledby"],g=r||m?void 0:l["aria-label"],h="".concat(t?d:""," ").concat(b?c:"").trim(),y=null!==(n=l["aria-invalid"])&&void 0!==n?n:f;return{labelId:s,descriptionId:d,feedbackId:c,inputId:p,inputProps:{id:p,"aria-labelledby":m,"aria-describedby":h,"aria-label":g,"aria-disabled":o,readOnly:l.readOnly?l.readOnly:o,"aria-invalid":y}}}(M({label:t,description:o,state:u,id:j,disabled:m},F)),C=_.labelId,T=_.descriptionId,W=_.feedbackId,X=_.inputId,q=_.inputProps,A={baseFontSize:D,disabled:m,errorMessage:y,id:W,size:f,state:u,successMessage:O};return e.createElement(a,{darkMode:z},e.createElement(U,{value:{disabled:m,size:f,state:u,inputProps:q,optional:N}},e.createElement("div",H({className:i(L,E),ref:r},F),e.createElement("div",{className:i(ee,I({},ne,!(!t&&!o)))},t&&e.createElement(x,{"data-testid":S.label,className:L,htmlFor:X,id:C,disabled:m},t),o&&e.createElement(w,{"data-testid":S.description,className:L,id:T,disabled:m},o)),s,e.createElement(se,A))))}));je.displayName="FormField";var Se=E("form-field-input"),Pe=E("form-field-icon"),Fe=function(e){return"0 0 0 100px ".concat(e," inset")},Me=t(de||(de=L(["\n  display: flex;\n  align-items: center;\n  gap: ","px;\n  font-size: inherit;\n  line-height: inherit;\n  font-family: ",";\n  width: 100%;\n  height: 36px;\n  font-weight: ",";\n  border: 1px solid;\n  z-index: 1;\n  outline: none;\n  border-radius: 6px;\n  transition: ","ms ease-in-out;\n  transition-property: border-color, box-shadow;\n  z-index: 0;\n\n  & ."," {\n    font-family: ",";\n    color: inherit;\n    background-color: inherit;\n    font-size: inherit;\n    line-height: inherit;\n    outline: none;\n    border: none;\n  }\n\n  & ."," svg,\n  & svg {\n    min-height: 16px;\n    min-width: 16px;\n  }\n"])),s[1],p.default,f.regular,b.default,Se,p.default,Pe),De=function(e){return t(ue||(ue=L(["\n  @supports selector(:has(a, b)) {\n    &:focus-within:not(:has(.",":focus)) {\n      ",'\n    }\n  }\n\n  /* Fallback for when "has" is unsupported */\n  @supports not selector(:has(a, b)) {\n    &:focus-within {\n      ',"\n    }\n  }\n"])),Pe,e,e)},Ie=I(I({},z.Light,De("\n     {\n      box-shadow: ".concat(m.light.input,";\n      border-color: ").concat(N.white,";\n    }\n  "))),z.Dark,De("\n     {\n      box-shadow: ".concat(m.dark.input,";\n      border-color: ").concat(N.gray.dark4,";\n    }\n  "))),He="&:has(button.".concat(Pe,")"),Ve=I(I(I(I({},l.XSmall,t(pe||(pe=L(["\n    height: 22px;\n    padding-inline: ","px;\n\n    "," {\n      padding-inline-end: ","px;\n    }\n  "])),s[200],He,s[100])),l.Small,t(fe||(fe=L(["\n    height: 28px;\n    padding-inline: ","px;\n\n    "," {\n      padding-inline-end: ","px;\n    }\n  "])),s[200],He,s[100])),l.Default,t(be||(be=L(["\n    height: 36px;\n    padding-inline: ","px;\n\n    "," {\n      padding-inline-end: ","px;\n    }\n  "])),s[300],He,s[150])),l.Large,t(me||(me=L(["\n    height: 48px;\n    padding-inline: ","px;\n\n    "," {\n      padding-inline-end: ","px;\n    }\n  "])),s[300],He,s[200]));function Le(e){var n=e.disabled,r=e.size,a=e.state,o=e.theme;return i(Me,function(e){var n=e===z.Dark?N.gray.dark4:u.light.background.primary.default;return t(ce||(ce=L(["\n    color: ",";\n    background: ",";\n    border: 1px solid;\n\n    & ."," {\n      &:-webkit-autofill {\n        color: ",";\n        background: ",";\n        border: 1px solid ",";\n        -webkit-text-fill-color: ",";\n        box-shadow: ",";\n\n        &:focus {\n          box-shadow: ",",\n            ",";\n          border-color: ",";\n        }\n\n        &:hover:not(:focus) {\n          box-shadow: ",",\n            ",";\n        }\n      }\n\n      &::placeholder {\n        font-weight: ",";\n        color: ",";\n      }\n    }\n  "])),u[e].text.primary.default,n,Se,u[e].text.primary.default,n,u[e].border.primary.default,u[e].text.primary.default,Fe(n),Fe(n),m[e].input,u[e].border.primary.focus,Fe(n),g[e].gray,f.regular,u[e].text.placeholder.default)}(o),Ve[r],I(I({},i(function(e){var n=e.theme,r=e.state;return I(I(I({},K.Error,t(ge||(ge=L(["\n      border-color: ",";\n\n      &:hover,\n      &:active {\n        &:not(:focus) {\n          box-shadow: ",";\n        }\n      }\n    "])),u[n].border.error.default,g[n].red)),K.None,t(he||(he=L(["\n      border-color: ",";\n\n      &:hover,\n      &:active {\n        &:not(:focus) {\n          box-shadow: ",";\n        }\n      }\n    "])),u[n].border.primary.default,g[n].gray)),K.Valid,t(ye||(ye=L(["\n      border-color: ",";\n\n      &:hover,\n      &:active {\n        &:not(:focus) {\n          box-shadow: ",";\n        }\n      }\n    "])),u[n].border.success.default,g[n].green))[r]}({theme:o,state:a}),Ie[o]),!n),function(e){return t(ve||(ve=L(["\n    cursor: not-allowed;\n    color: ",";\n    background-color: ",";\n    border-color: ",";\n\n    &:hover,\n    &:active {\n      &:not(:focus) {\n        box-shadow: inherit;\n      }\n    }\n\n    & ."," {\n      cursor: not-allowed;\n      pointer-events: none;\n      color: ",";\n\n      &::placeholder {\n        color: inherit;\n      }\n\n      &:-webkit-autofill {\n        &,\n        &:hover,\n        &:focus {\n          appearance: none;\n\n          border: 1px solid ",";\n          -webkit-text-fill-color: ",";\n          box-shadow: ",";\n        }\n\n        &:hover:not(:focus) {\n          box-shadow: inherit;\n        }\n      }\n    }\n  "])),u[e].text.disabled.default,u[e].background.disabled.default,u[e].border.disabled.default,Se,u[e].text.disabled.default,u[e].border.disabled.hover,u[e].text.disabled.hover,Fe(u[e].background.disabled.hover))}(o),n))}var _e=t(xe||(xe=L(["\n  width: 100%;\n"]))),Ce=t(we||(we=L(["\n  display: flex;\n  align-items: center;\n  gap: ","px;\n"])),s[100]),Te=function(e){return t(Oe||(Oe=L(["\n    color: ",";\n  "])),u[e].icon.disabled.default)},We=function(e){return t(ke||(ke=L(["\n    color: ",";\n  "])),u[e].icon.secondary.default)},Xe=function(e){return t(Ee||(Ee=L(["\n    color: ",";\n\n    font-size: 12px;\n    line-height: 12px;\n    font-style: italic;\n    font-weight: ",";\n    display: flex;\n    align-items: center;\n    > p {\n      margin: 0;\n    }\n  "])),u[e].text.secondary.default,f.regular)},qe=["contentEnd","className","children"],Ae=r((function(n,r){var t=n.contentEnd,a=n.className,s=n.children,d=V(n,qe),c=o().theme,u=Y(),p=u.disabled,f=u.size,b=u.state,m=u.inputProps,g=u.optional,h=Le({disabled:p,size:null!=f?f:l.Default,state:b,theme:c}),y=e.cloneElement(s,M(M({},m),{},{className:i(Se,s.props.className)})),v=b===K.None&&!p&&g,x=v||t;return e.createElement("div",H({},d,{ref:r,className:i(h,a)}),e.createElement("div",{className:_e},y),x&&e.createElement("div",{className:Ce},v&&e.createElement("div",{"data-lgid":S.optional,className:Xe(c)},e.createElement("p",null,"Optional")),t&&e.cloneElement(t,{className:i(Pe,We(c),I({},Te(c),p),t.props.className)})))}));Ae.displayName="FormFieldInputWrapper";export{P as DEFAULT_MESSAGES,je as FormField,R as FormFieldContext,se as FormFieldFeedback,Ae as FormFieldInputContainer,U as FormFieldProvider,K as FormFieldState,S as LGIDS_FORM_FIELD,Q as defaultFormFieldContext,Y as useFormFieldContext};
//# sourceMappingURL=index.js.map
