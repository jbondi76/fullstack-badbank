import e,{createContext as n,useRef as r,useCallback as t,useEffect as o,useState as a,useMemo as l,useContext as i,forwardRef as s}from"react";import{storybookArgTypes as c,storybookExcludedControlParams as d}from"@lg-tools/storybook-utils";import{css as u,cx as p}from"@leafygreen-ui/emotion";import f from"@leafygreen-ui/icon/dist/Beaker";import g,{useDarkMode as m}from"@leafygreen-ui/leafygreen-provider";import h from"lodash/isUndefined";import{usePrevious as b,useIdAllocator as v,useAvailableSpace as y,useForwardedRef as x,useEventListener as E,useViewportSize as w}from"@leafygreen-ui/hooks";import k,{Align as O,Justify as N}from"@leafygreen-ui/popover";import{transparentize as S}from"polished";import{Theme as C,createUniqueClassName as _,isComponentType as j,consoleOnce as D,keyMap as z}from"@leafygreen-ui/lib";import{palette as I}from"@leafygreen-ui/palette";import{isFragment as P}from"react-is";import{transitionDuration as M,spacing as L,fontFamilies as A,fontWeights as T,breakpoints as B,typeScales as G,Size as F,focusRing as H,hoverRing as R,BaseFontSize as V}from"@leafygreen-ui/tokens";import W from"prop-types";import{isComponentGlyph as Z}from"@leafygreen-ui/icon";import K from"@leafygreen-ui/icon/dist/Checkmark";import{descriptionClassName as X,InputOption as q,InputOptionContent as U}from"@leafygreen-ui/input-option";import Y,{Size as $,Variant as J}from"@leafygreen-ui/button";import Q from"@leafygreen-ui/icon/dist/CaretDown";import ee from"@leafygreen-ui/icon/dist/Warning";import{Label as ne,Description as re}from"@leafygreen-ui/typography";function te(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function oe(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?te(Object(r),!0).forEach((function(n){le(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function ae(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,n||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}function le(e,n,r){return(n=ae(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},ie.apply(this,arguments)}function se(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function ce(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function de(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,a,l,i=[],s=!0,c=!1;try{if(a=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;s=!1}else for(;!(s=(t=a.call(r)).done)&&(i.push(t.value),i.length!==n);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return i}}(e,n)||pe(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,n){if(e){if("string"==typeof e)return fe(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fe(e,n):void 0}}function fe(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}var ge,me,he,be,ve,ye,xe,Ee,we,ke,Oe,Ne,Se,Ce="lg-select",_e={root:Ce,errorMessage:"".concat(Ce,"-error_message"),popover:"".concat(Ce,"-popover"),buttonText:"".concat(Ce,"-button_text")},je={XSmall:"xsmall",Small:"small",Default:"default",Large:"large"},De={None:"none",Error:"error"},ze={Trigger:"trigger",Option:"option"},Ie=n({size:je.Default,open:!1,disabled:!1}),Pe=le(le({},C.Light,{menu:{border:I.gray.light2,shadow:S(.75,I.black)},option:{group:{label:I.gray.dark1},background:{base:I.white,hovered:I.gray.light2,focused:I.blue.light3},text:{base:I.gray.dark3,selected:I.blue.base,disabled:I.gray.base,focused:I.blue.dark2},icon:{base:I.gray.dark1,selected:I.blue.base,disabled:I.gray.base},indicator:{focused:I.blue.base}}}),C.Dark,{menu:{border:I.gray.dark2,shadow:S(.85,"#000000")},option:{group:{label:I.gray.base},background:{base:I.gray.dark3,hovered:I.gray.dark4,focused:I.blue.dark3},text:{base:I.gray.light2,selected:I.gray.light2,disabled:I.gray.base,focused:I.blue.light3},icon:{base:I.gray.base,selected:I.blue.light1,disabled:I.gray.base},indicator:{focused:I.blue.light1}}}),Me=le(le(le(le({},je.XSmall,{height:22,text:13,option:{text:13},warningIcon:16}),je.Small,{height:28,text:13,option:{text:13},warningIcon:16}),je.Default,{height:36,text:13,option:{text:13},warningIcon:16}),je.Large,{height:48,text:18,option:{text:16},warningIcon:16}),Le=36,Ae=16,Te={text:16,lineHeight:19},Be={text:16,lineHeight:22},Ge={text:16},Fe=_("option"),He=u(ge||(ge=ce(["\n  display: flex;\n  width: 100%;\n  outline: none;\n  overflow-wrap: anywhere;\n  transition: background-color ","ms ease-in-out;\n  position: relative;\n  padding: ","px 12px;\n  line-height: inherit;\n\n  &:before {\n    content: '';\n    position: absolute;\n    transform: scaleY(0.3);\n    top: 7px;\n    bottom: 7px;\n    left: 0;\n    right: 0;\n    width: 4px;\n    border-radius: 0px 4px 4px 0px;\n    opacity: 0;\n    transition: all ","ms ease-in-out;\n  }\n\n  ."," {\n    line-height: 16px; // Hardcoding because it does not match a token\n  }\n"])),M.default,L[2],M.default,X),Re=u(me||(me=ce(["\n  display: flex;\n  align-items: center;\n  font-family: ",";\n"])),A.default),Ve=u(he||(he=ce(["\n  min-width: 16px;\n"]))),We=u(be||(be=ce(["\n  ."," {\n    &:focus-visible & {\n      color: currentColor;\n    }\n  }\n"])),Fe),Ze=["children","className","glyph","selected","focused","disabled","onClick","onFocus","triggerScrollIntoView","hasGlyphs","description"];function Ke(n){var a=n.children,l=n.className,i=n.glyph,s=n.selected,c=n.focused,d=n.disabled,f=n.onClick,g=n.onFocus,h=n.triggerScrollIntoView,v=n.hasGlyphs,y=n.description,x=se(n,Ze),E=m().theme,w=Pe[E].option,k=r(null),O=t((function(){if(null==k.current)return null;var e=k.current,n=null==e?void 0:e.offsetParent;if(!n)return null;n.scrollTop=e.offsetTop+(e.clientHeight-n.clientHeight)/2}),[k]),N=b(h),S=h&&!N;o((function(){S&&O()}),[O,S]);var C=b(c),_=c&&!C;o((function(){_&&k.current.focus()}),[_]),i&&(Z(i)||console.error("`Option` instance did not render icon because it is not a known glyph element."));var j=i&&Z(i)?e.cloneElement(i,{key:"glyph",className:p(Ve,u(ve||(ve=ce(["\n              color: ",";\n            "])),w.icon.base),We,le({},u(ye||(ye=ce(["\n                color: ",";\n              "])),w.icon.disabled),d),i.props.className)}):void 0,D=s?e.createElement(K,{key:"checkmark",className:p(Ve,u(xe||(xe=ce(["\n          color: ",";\n        "])),w.icon.selected),We,le({},u(Ee||(Ee=ce(["\n            color: ",";\n          "])),w.icon.disabled),d))}):void 0,z=v?j:D,I=v?D:void 0;return e.createElement(q,ie({"aria-label":"string"==typeof a?a:"option"},x,{disabled:d,role:"option",tabIndex:-1,ref:k,className:p(Fe,He,le(le({},u(we||(we=ce(["\n            &:focus-visible {\n              color: ",";\n              background-color: ",";\n\n              &:before {\n                opacity: 1;\n                transform: scaleY(1);\n                background-color: ",";\n              }\n            }\n          "])),w.text.focused,w.background.focused,w.indicator.focused),!d),u(ke||(ke=ce(["\n            &,\n            & ."," {\n              color: ",";\n            }\n          "])),X,w.text.disabled),d),l),onClick:f,onFocus:g,onKeyDown:void 0}),e.createElement(U,{leftGlyph:z,rightGlyph:I,description:y},e.createElement("span",{className:p(Re,le({},u(Oe||(Oe=ce(["\n              font-weight: ",";\n            "])),T.bold),s))},a)))}function Xe(e){throw Error("`Option` must be a child of a `Select` instance")}Ke.displayName="Option",Xe.displayName="Option",Xe.propTypes={children:W.node.isRequired,className:W.string,glyph:W.element,value:W.string,disabled:W.bool,description:W.string};var qe,Ue=u(Ne||(Ne=ce(["\n  padding: ","px 0;\n"])),L[2]),Ye=u(Se||(Se=ce(["\n  cursor: default;\n  width: 100%;\n  padding: 0 12px 2px;\n  outline: none;\n  overflow-wrap: anywhere;\n  font-size: 12px;\n  line-height: 16px;\n  font-weight: ",";\n  text-transform: uppercase;\n  letter-spacing: 0.4px;\n"])),T.bold),$e=["className","label","children"];function Je(n){var r=n.className,t=n.label,o=n.children,a=se(n,$e),l=m().theme,i=Pe[l].option,s=v({prefix:"select-option-group"});return e.createElement("div",ie({className:p(Ue,r)},a),e.createElement("div",{id:s,className:p(Ye,u(qe||(qe=ce(["\n            color: ",";\n          "])),i.group.label))},t),e.createElement("div",{role:"group","aria-labelledby":s},o))}function Qe(e){throw Error("`OptionGroup` must be a child of a `Select` instance")}Je.displayName="OptionGroup",Qe.displayName="OptionGroup",Qe.propTypes={children:W.oneOfType([W.element,W.arrayOf(W.oneOfType([W.oneOf([!1,null,void 0,""]),W.element]))]).isRequired,className:W.string,label:W.string.isRequired,disabled:W.bool};var en=["children"],nn="@media only screen and (max-width: ".concat(B.Tablet,"px) and (hover: none)"),rn="".concat(nn," and (pointer: coarse), ").concat(nn," and (pointer: none)");function tn(e){return null==e||!1===e||""===e}function on(n,r){e.Children.forEach(n,(function(e){j(e,"Option")?r(e):j(e,"OptionGroup")?on(e.props.children,(function(n){return r(n,e)})):P(e)&&on(e.props.children,r)}))}function an(n,r,t){return e.Children.toArray(n).every((function(e){return j(e,"Option")}))||e.Children.toArray(n).every((function(e){return j(e,"OptionGroup")}))||D.warn("LeafyGreen Select: Combining grouped and ungrouped Select Options can cause styling issues"),e.Children.map(n,(function(n){if(j(n,"Option"))return e.createElement(Ke,r(n));if(j(n,"OptionGroup")){var o=n.props,a=o.children,l=se(o,en);return e.createElement(Je,ie({className:void 0},l),an(a,(function(e){return r(e,n)}),t))}return P(n)?an(n.props.children,r,t):(tn(n)||null==t||t(n),null)}))}function ln(e){return null===e?"":void 0!==e.props.value?e.props.value:Array.isArray(e.props.children)?e.props.children.filter((function(e){return!tn(e)})).join(""):e.props.children?e.props.children.toString():""}function sn(e,n){var r,t,o;return null!==(r=e.props.disabled)&&void 0!==r&&r||null!==(t=null==n||null===(o=n.props)||void 0===o?void 0:o.disabled)&&void 0!==t&&t}function cn(e,n,r){return ln(e)===r&&!sn(e,n)}function dn(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.initialValue,o=n.deps,a=void 0===o?[]:o,i=r(t);return l((function(){return{get current(){return i.current},set current(n){i.current=n,e(n)}}}),[e,i].concat(ue(a)))}function un(e,n){var r=t((function(e,n){Array.isArray(e)?e.forEach(r):"function"==typeof e?e(n):e&&(e.current=n)}),[]);return dn(t((function(n){return r(e,n)}),[e,r]),{initialValue:n})}var pn,fn,gn,mn,hn,bn,vn,yn,xn,En,wn,kn,On,Nn,Sn,Cn,_n,jn,Dn,zn,In,Pn,Mn=function(e){var n=de(a(e),2),r=n[0];return dn(n[1],{initialValue:e,deps:[r]})},Ln=_("select-popover"),An=L[2],Tn=u(pn||(pn=ce(["\n  position: relative;\n  text-align: left;\n  width: 100%;\n  border-radius: 3px;\n  line-height: 16px;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  overflow: auto;\n"]))),Bn=u(fn||(fn=ce(["\n  width: max-content;\n"]))),Gn=function(e,n){var r=Me[n],t=Pe[e];return p(u(gn||(gn=ce(["\n      font-family: ",";\n      font-size: ","px;\n      min-height: ","px;\n      background-color: ",";\n      border-radius: 12px;\n      box-shadow: 0 4px 7px 0 ",";\n      padding: ","px 0;\n      border: 1px solid ",";\n    "])),A.default,r.option.text,r.height,t.option.background.base,t.menu.shadow,L[2],t.menu.border))},Fn=e.forwardRef((function(n,r){var o=n.children,a=n.id,l=n.referenceElement,s=n.className,c=n.labelId,d=n.dropdownWidthBasis,f=n.usePortal,g=void 0===f||f,b=n.portalContainer,v=n.scrollContainer,x=n.portalClassName,E=n.popoverZIndex,w=n.onEntering,S=n.onEnter,C=n.onEntered,_=n.onExiting,j=n.onExit,D=n.onExited,z=m().theme,I=i(Ie),P=I.size,M=I.disabled,L=I.open,A=un(r,null),T=y(l,An),B=h(T)?"unset":"".concat(Math.min(T,274),"px"),G=t((function(e){A.current&&A.current.focus(),e.stopPropagation()}),[A]),F=oe({popoverZIndex:E,onEntering:w,onEnter:S,onEntered:C,onExiting:_,onExit:j,onExited:D},g?{usePortal:g,portalClassName:x,portalContainer:b,scrollContainer:v}:{usePortal:g});return e.createElement(k,ie({active:L&&!M,spacing:6,align:O.Bottom,justify:N.Start,adjustOnMutation:!0,className:p(Ln,s,le({},Bn,d===ze.Option)),refEl:l},F),e.createElement("ul",{"data-lgid":_e.popover,"aria-labelledby":c,role:"listbox",ref:A,tabIndex:-1,onClick:G,className:p(Tn,Gn(z,P),u(mn||(mn=ce(["\n              max-height: ",";\n              "," {\n                font-size: ","px;\n              }\n            "])),B,rn,Ge.text)),id:a},o))}));Fn.displayName="ListMenu";var Hn,Rn,Vn,Wn,Zn,Kn,Xn,qn,Un=_("select-menu"),Yn=u(hn||(hn=ce(["\n  // Override button defaults\n  font-weight: ",";\n  > *:last-child {\n    grid-template-columns: 1fr 16px;\n    justify-content: flex-start;\n\n    > svg {\n      justify-self: right;\n      width: 16px;\n      height: 16px;\n    }\n  }\n"])),T.regular),$n=le(le(le(le({},F.Default,u(bn||(bn=ce(["\n    > *:last-child {\n      padding: 0 12px;\n    }\n  "])))),F.Large,u(vn||(vn=ce(["\n    > *:last-child {\n      padding: 0 12px 0 ","px;\n    }\n  "])),L[3])),F.Small,u(yn||(yn=ce(["\n    > *:last-child {\n      padding: 0 ","px 0 10px;\n    }\n  "])),L[2])),F.XSmall,u(xn||(xn=ce(["\n    text-transform: none;\n    font-size: ","px;\n    line-height: ","px;\n    > *:last-child {\n      padding: 0 ","px 0 10px;\n    }\n  "])),G.body1.fontSize,G.body1.lineHeight,L[1])),Jn=le(le({},C.Light,u(En||(En=ce(["\n    background-color: ",";\n    // Override button default color\n    > *:last-child {\n      > svg {\n        color: ",";\n      }\n    }\n  "])),I.white,I.gray.dark2)),C.Dark,u(wn||(wn=ce(["\n    border-color: ",";\n    background-color: ",";\n    color: ",";\n\n    // Override button default color\n    > *:last-child {\n      > svg {\n        color: ",";\n      }\n    }\n\n    &:hover,\n    &:active,\n    &:focus {\n      background-color: ",";\n      color: ",";\n    }\n  "])),I.gray.base,I.gray.dark4,I.gray.light3,I.gray.light1,I.gray.dark4,I.gray.light3)),Qn=le(le({},C.Light,u(kn||(kn=ce(["\n    &:focus-visible {\n      box-shadow: ",";\n      border-color: rgba(255, 255, 255, 0);\n    }\n  "])),H.light.input)),C.Dark,u(On||(On=ce(["\n    &:focus-visible {\n      background-color: ",";\n      box-shadow: ",";\n      border-color: rgba(255, 255, 255, 0);\n    }\n  "])),I.gray.dark4,H.dark.input)),er=le(le({},C.Light,u(Nn||(Nn=ce(["\n    color: ",";\n  "])),I.gray.dark1)),C.Dark,u(Sn||(Sn=ce(["\n    color: ",";\n\n    &:hover,\n    &:active,\n    &:focus {\n      color: ",";\n    }\n  "])),I.gray.light1,I.gray.light1)),nr=u(Cn||(Cn=ce(["\n  cursor: not-allowed;\n  pointer-events: unset;\n  box-shadow: unset;\n\n  &:active {\n    pointer-events: none;\n  }\n"]))),rr=le(le({},C.Light,p(nr,u(_n||(_n=ce(["\n      &[aria-disabled='true'] {\n        background-color: ",";\n        color: ",";\n\n        > *:last-child {\n          > svg {\n            color: ",";\n          }\n        }\n      }\n    "])),I.gray.light2,I.gray.base,I.gray.base))),C.Dark,p(nr,u(jn||(jn=ce(["\n      &[aria-disabled='true'] {\n        background-color: ",";\n        color: ",";\n        border-color: ",";\n\n        > *:last-child {\n          > svg {\n            color: ",";\n          }\n        }\n      }\n    "])),I.gray.dark3,I.gray.dark1,I.gray.dark2,I.gray.dark1))),tr=u(Dn||(Dn=ce(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-grow: 1;\n  gap: ","px;\n  overflow: hidden;\n"])),L[1]),or=u(zn||(zn=ce(["\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 100%;\n"]))),ar=le(le({},C.Light,I.red.base),C.Dark,I.red.light1),lr=le(le({},C.Light,u(In||(In=ce(["\n    border-color: ",";\n    background-color: ",";\n\n    &:hover,\n    &:active {\n      box-shadow: ",";\n    }\n  "])),ar[C.Light],I.white,R.light.red)),C.Dark,u(Pn||(Pn=ce(["\n    border-color: ",";\n\n    &:hover,\n    &:active {\n      border-color: ",";\n      box-shadow: ",";\n    }\n  "])),ar[C.Dark],ar[C.Dark],R.dark.red)),ir=["children","value","text","name","deselected","readOnly","onClose","onOpen","errorMessage","state","baseFontSize","__INTERNAL__menuButtonSlot__","__INTERNAL__menuButtonSlotProps__"],sr=e.forwardRef((function(n,r){var o,a=n.children,l=n.value,s=n.text,c=n.name,d=n.deselected;n.readOnly;var f=n.onClose,g=n.onOpen,h=n.errorMessage,b=n.state,v=n.baseFontSize,y=n.__INTERNAL__menuButtonSlot__,x=n.__INTERNAL__menuButtonSlotProps__,E=se(n,ir),w=m().theme,k=i(Ie),O=k.open,N=k.size,S=k.disabled,_=un(r,null),j=Me[N],D=t((function(){O?f():g(),_.current.focus()}),[f,g,O,_]),z=y||Y,I=y?"":p(Yn,Jn[w],$n[N],Qn[w],le(le(le(le({},er[w],d),rr[w],S),lr[w],b===De.Error&&!!h),u(Hn||(Hn=ce(["\n              letter-spacing: initial;\n            "]))),N===$.XSmall),u(Rn||(Rn=ce(["\n            width: 100%;\n            "," {\n              height: ","px;\n              font-size: ","px;\n            }\n          "])),rn,Le,Ae)),P=null!==(o=E["data-testid"])&&void 0!==o?o:"leafygreen-ui-select-menubutton";return e.createElement(z,ie({},E,x,{ref:_,name:c,value:l,disabled:S,onClick:D,variant:J.Default,darkMode:w===C.Dark,rightGlyph:e.createElement(Q,null),size:N,"data-testid":P,className:p(I,le({},u(Vn||(Vn=ce(["\n              font-size: ","px;\n            "])),v),N===$.Default),null==x?void 0:x.className)}),e.createElement("div",{className:tr},e.createElement("div",{"data-lgid":_e.buttonText,className:p(Un,or)},s),b===De.Error&&h&&e.createElement(ee,{"aria-hidden":!0,className:u(Wn||(Wn=ce(["\n                color: ",";\n              "])),ar[w]),size:j.warningIcon,title:"Error"})),a)}));sr.displayName="MenuButton";var cr,dr,ur,pr,fr,gr,mr,hr,br=u(Zn||(Zn=ce(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: ","px;\n"])),L[1]),vr=u(Kn||(Kn=ce(["\n  display: flex;\n  flex-direction: column;\n"]))),yr=u(Xn||(Xn=ce(["\n  font-size: ","px;\n  line-height: ","px;\n"])),G.large.fontSize,G.large.lineHeight),xr=function(e){var n=e.darkMode,r=e.sizeSet;return u(qn||(qn=ce(["\n  font-family: ",";\n  color: ",";\n  font-size: ","px;\n  margin-top: ","px;\n  padding-left: 2px;\n  transition: color ","ms ease-in-out;\n  transition-delay: ","ms;\n"])),A.default,n?I.red.light1:I.red.base,r.text,L[1],M.faster,M.faster)},Er=["children","darkMode","size","disabled","allowDeselect","usePortal","placeholder","errorMessage","state","dropdownWidthBasis","baseFontSize","data-lgid","id","aria-labelledby","aria-label","className","label","description","name","defaultValue","value","onChange","readOnly","portalContainer","scrollContainer","portalClassName","popoverZIndex","onEntering","onEnter","onEntered","onExiting","onExit","onExited","__INTERNAL__menuButtonSlot__"],wr=s((function(n,r){var i,s=n.children,c=n.darkMode,d=n.size,f=void 0===d?je.Default:d,h=n.disabled,b=void 0!==h&&h,y=n.allowDeselect,k=void 0===y||y,O=n.usePortal,N=void 0===O||O,S=n.placeholder,C=void 0===S?"Select":S,_=n.errorMessage,j=void 0===_?"":_,D=n.state,I=void 0===D?De.None:D,P=n.dropdownWidthBasis,M=void 0===P?ze.Trigger:P,L=n.baseFontSize,A=void 0===L?V.Body1:L,T=n["data-lgid"],B=void 0===T?_e.root:T,G=n.id,F=n["aria-labelledby"],H=n["aria-label"],R=n.className,W=n.label,Z=n.description,K=n.name,X=n.defaultValue,q=n.value,U=n.onChange,Y=n.readOnly,$=n.portalContainer,J=n.scrollContainer,Q=n.portalClassName,ee=n.popoverZIndex,te=n.onEntering,ae=n.onEnter,ue=n.onEntered,pe=n.onExiting,fe=n.onExit,ge=n.onExited,me=n.__INTERNAL__menuButtonSlot__,he=se(n,Er),be=v({prefix:"select",id:G}),ve=l((function(){return H&&!W?void 0:null!=F?F:"".concat(be,"-label")}),[F,H,W,be]);W||F||H||console.error("For screen-reader accessibility, label, aria-label, or aria-labelledby must be provided to Select.");var ye=m(c).darkMode,xe="".concat(be,"-description"),Ee="".concat(be,"-menu"),we=de(a(!1),2),ke=we[0],Oe=we[1],Ne=x(r,null),Se=Mn(null),Ce=v({prefix:"select"}),Pe=Mn(null),Le=Me[f],Ae=l((function(){return{size:f,open:ke,disabled:b}}),[f,ke,b]);o((function(){void 0!==q&&void 0===U&&!0!==Y&&console.warn("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")}),[U,Y,q]);var Ge=t((function(){Oe(!0)}),[]),Fe=t((function(){Oe(!1),Se.current.focus()}),[Se]);o((function(){if(ke){var e=function(e){var n=Se.current.contains(e.target)||Pe.current.contains(e.target);Oe(n)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}}),[Pe,Se,ke]);var He=l((function(){var e=null;return void 0===q&&void 0!==X&&on(s,(function(n,r){cn(n,r,X)&&(e=n)})),e}),[s,X,q]),Re=de(a(He),2),Ve=Re[0],We=Re[1];o((function(){var e;null!==Ve&&We(null!==(e=function(e,n){var r,t,o,a,l,i,s,c;return on(e,(function(e){if(e===n)l=n;else if(e.props.children===n.props.children&&e.props.value===n.props.value){var r;null!==(r=i)&&void 0!==r||(i=e)}else if(void 0!==e.props.value&&e.props.value===n.props.value){var t;null!==(t=s)&&void 0!==t||(s=e)}else if(ln(e)===ln(n)){var o;null!==(o=c)&&void 0!==o||(c=e)}})),null!==(r=null!==(t=null!==(o=null!==(a=l)&&void 0!==a?a:i)&&void 0!==o?o:s)&&void 0!==t?t:c)&&void 0!==r?r:null}(s,Ve))&&void 0!==e?e:He)}),[s,He,Ve]);var Ze=l((function(){if(void 0!==q){var e=null;return on(s,(function(n,r){cn(n,r,q)&&(e=n)})),e}return Ve}),[s,Ve,q]),Xe=t((function(e,n){n.preventDefault(),n.stopPropagation(),void 0===q&&We(e),null==U||U(ln(e),n),$e(void 0),Fe()}),[U,Fe,q]),qe=t((function(e,n){return function(r){r.preventDefault(),r.stopPropagation(),b||n||(Xe(e,r),Fe())}}),[b,Fe,Xe]),Ue=de(a(),2),Ye=Ue[0],$e=Ue[1],Je=l((function(){var e=[];return k&&e.push(null),on(s,(function(n,r){sn(n,r)||e.push(n)})),e}),[s,k]),Qe=t((function(e){void 0!==Ye&&Xe(Ye,e)}),[Ye,Xe]),en=t((function(){$e(Je[0])}),[Je]),nn=t((function(){$e(Je[Je.length-1])}),[Je]),tn=t((function(){if(void 0===Ye||0===Je.indexOf(Ye))nn();else{var e=Je.indexOf(Ye)-1;$e(Je[e])}}),[Je,Ye,nn]),dn=t((function(){if(void 0===Ye||Je.indexOf(Ye)===Je.length-1)en();else{var e=Je.indexOf(Ye)+1;$e(Je[e])}}),[Je,Ye,en]),un=t((function(e,n){return function(r){r.preventDefault(),r.stopPropagation(),b||n||$e(e)}}),[b]),pn=t((function(e){var n,r;if(!(e.ctrlKey||e.shiftKey||e.altKey)){var t=null===(n=Pe.current)||void 0===n?void 0:n.contains(document.activeElement),o=null===(r=Se.current)||void 0===r?void 0:r.contains(document.activeElement);if(o||t)switch(e.key){case z.Tab:case z.Escape:Fe(),$e(void 0);break;case z.Enter:case z.Space:ke&&!o&&e.preventDefault(),Qe(e);break;case z.ArrowUp:!ke&&o&&Ge(),e.preventDefault(),tn();break;case z.ArrowDown:!ke&&o&&Ge(),e.preventDefault(),dn()}}}),[Pe,Se,Fe,ke,Qe,tn,dn,Ge]);E("keydown",pn);var fn=w(),gn=l((function(){var e=!1;return on(s,(function(n){e||(e=void 0!==n.props.glyph)})),e}),[s]),mn=l((function(){return null!==fn&&null!==Pe.current&&void 0===Ye&&ke}),[Ye,Pe,ke,fn]),hn=l((function(){var n=null===Ze;return e.createElement(Ke,{className:void 0,glyph:void 0,selected:n,focused:null===Ye,disabled:!1,onClick:qe(null,!1),onFocus:un(null,!1),hasGlyphs:!1,triggerScrollIntoView:n&&mn},C)}),[mn,Ye,qe,un,C,Ze]),bn=l((function(){return an(s,(function(e,n){var r=e===Ze,t=sn(e,n);return oe(oe({},e.props),{},{className:e.props.className,glyph:e.props.glyph,selected:r,focused:e===Ye,disabled:t,children:e.props.children,hasGlyphs:gn,onClick:qe(e,t),onFocus:un(e,t),triggerScrollIntoView:r&&mn})}),(function(){console.error("`Select` instance received child that is not `Option` or `OptionGroup`.")}))}),[mn,s,Ye,qe,un,gn,Ze]),vn=oe({popoverZIndex:ee,onEntering:te,onEnter:ae,onEntered:ue,onExiting:pe,onExit:fe,onExited:ge},N?{usePortal:N,portalClassName:Q,portalContainer:$,scrollContainer:J}:{usePortal:N});return e.createElement(g,{darkMode:ye},e.createElement("div",{ref:Ne,className:p(vr,R),"data-lgid":B},(W||Z)&&e.createElement("div",{className:br},W&&e.createElement(ne,{htmlFor:Ce,id:ve,darkMode:ye,disabled:b,className:p(le(le({},yr,f===je.Large),u(cr||(cr=ce(["\n                        font-size: ","px;\n                        line-height: 20px;\n                      "])),A),f===je.Default),u(dr||(dr=ce(["\n                      // Prevent hover state from showing when hovering label\n                      pointer-events: none;\n                    "]))),u(ur||(ur=ce(["\n                      "," {\n                        font-size: ","px;\n                        line-height: ","px;\n                      }\n                    "])),rn,Te.text,Te.lineHeight))},W),Z&&e.createElement(re,{id:xe,darkMode:ye,disabled:b,className:p(le(le({},yr,f===je.Large),u(pr||(pr=ce(["\n                        font-size: ","px;\n                        line-height: 20px;\n                      "])),A),f===je.Default),u(fr||(fr=ce(["\n                      "," {\n                        font-size: ","px;\n                        line-height: ","px;\n                      }\n                    "])),rn,Be.text,Be.lineHeight))},Z)),e.createElement(Ie.Provider,{value:Ae},e.createElement(sr,ie({},he,{id:Ce,ref:Se,name:K,readOnly:Y,value:ln(Ze),text:null!==Ze?Ze.props.children:C,deselected:null===Ze,onOpen:Ge,onClose:Fe,"aria-labelledby":ve,"aria-label":W||F?void 0:H,"aria-controls":Ee,"aria-expanded":ke,"aria-describedby":xe,"aria-invalid":I===De.Error,"aria-disabled":b,errorMessage:j,state:I,baseFontSize:A,__INTERNAL__menuButtonSlot__:me}),e.createElement(Fn,ie({labelId:ve,id:Ee,referenceElement:Se,ref:Pe,className:p(le({},u(gr||(gr=ce(["\n                    width: ","px;\n                  "])),null===(i=Se.current)||void 0===i?void 0:i.clientWidth),M===ze.Trigger)),dropdownWidthBasis:M},vn),k&&hn,bn))),I===De.Error&&j&&e.createElement("span",{"data-lgid":_e.errorMessage,className:p(xr({darkMode:ye,sizeSet:Le}),u(mr||(mr=ce(["\n                  "," {\n                    font-size: ","px;\n                    line-height: ","px;\n                  }\n                "])),rn,Be.text,Be.lineHeight),le({},u(hr||(hr=ce(["\n                    // Hide error text when menu is open,\n                    // so it doesn't peek around the menu corner\n                    color: transparent;\n                  "]))),ke))},j)))}));wr.displayName="Select",wr.propTypes={label:W.string,"aria-labelledby":W.string,"aria-label":W.string,description:W.node,placeholder:W.string,className:W.string,darkMode:W.bool,size:W.oneOf(Object.values(je)),disabled:W.bool,id:W.string,value:W.string,defaultValue:W.string,onChange:W.func,readOnly:W.bool,errorMessage:W.string,state:W.oneOf(Object.values(De)),allowDeselect:W.bool,baseFontSize:W.oneOf(Object.values(V)),dropdownWidthBasis:W.oneOf(Object.values(ze))};var kr,Or,Nr=["className"],Sr={title:"Components/Select",component:wr,parameters:{default:"LiveExample",controls:{exclude:[].concat(ue(d),["children","value"])},generate:{combineArgs:{darkMode:[!1,!0],state:Object.values(De),size:Object.values(je),disabled:[!1,!0]},args:{className:u(kr||(kr=ce(["\n          width: 256px;\n        "])))},decorator:function(n,r){return e.createElement(g,{darkMode:null==r?void 0:r.args.darkMode},e.createElement(n,{glyph:null==r?void 0:r.args.glyph}))}}},args:{placeholder:"Select",disabled:!1,allowDeselect:!1,darkMode:!1,children:[e.createElement(Xe,{key:"long",value:"long",description:"I know a little lorem ipsum"},"Cras mattis consectetur purus sit amet fermentum. Maecenas sed diam eget risus varius blandit sit amet non magna."),e.createElement(Qe,{key:"Common",label:"Common"},e.createElement(Xe,{value:"dog"},"Dog"),e.createElement(Xe,{value:"cat"},"Cat")),e.createElement(Qe,{key:"Less common",label:"Less common"},e.createElement(Xe,{value:"hamster"},"Hamster"),e.createElement(Xe,{value:"parrot"},"Parrot")),e.createElement(Xe,{key:"iguana",value:"iguana"},"Mexican spiny-tailed iguana"),e.createElement(Xe,{key:"spider",value:"spider",description:"I'm chill, I swear"},"Spider"),e.createElement(Xe,{key:"aardvark",value:"aardvark",disabled:!0,description:"Call me Arthur"},"Aardvark")],usePortal:!0},argTypes:{placeholder:{control:"text"},disabled:{control:"boolean"},label:{control:"text"},description:{control:"text"},defaultValue:{control:"text"},readOnly:{control:"boolean"},errorMessage:{control:"text"},allowDeselect:{control:"boolean"},darkMode:c.darkMode}},Cr=function(n){var r=n.className,t=se(n,Nr);return e.createElement(wr,ie({},t,{"data-test":"hello-world",className:p(u(Or||(Or=ce(["\n        min-width: 200px;\n        max-width: 400px;\n      "]))),r),onChange:function(e){return console.log(e)}}))};Cr.parameters={chromatic:{disableSnapshot:!0}};var _r=Cr.bind({});_r.args={children:[e.createElement(Qe,{key:"Common",label:"Common"},e.createElement(Xe,{glyph:e.createElement(f,null),value:"dog"},"Dog"),e.createElement(Xe,{glyph:e.createElement(f,null),value:"cat",description:"Bark bark"},"Cat")),e.createElement(Qe,{key:"Less common",label:"Less common"},e.createElement(Xe,{glyph:e.createElement(f,null),value:"hamster"},"Hamster"),e.createElement(Xe,{glyph:e.createElement(f,null),value:"parrot"},"Parrot")),e.createElement(Xe,{glyph:e.createElement(f,null),key:"iguana",value:"iguana"},"Mexican spiny-tailed iguana"),e.createElement(Xe,{glyph:e.createElement(f,null),key:"spider",value:"spider",disabled:!0,description:"I'm chill, I swear"},"Spider")]},_r.parameters={chromatic:{disableSnapshot:!0}};var jr=Cr.bind({});jr.args={usePortal:!1},jr.parameters={chromatic:{disableSnapshot:!0}};var Dr=function(){};export{Dr as Generated,Cr as LiveExample,jr as NoPortal,_r as WithIcons,Sr as default};
