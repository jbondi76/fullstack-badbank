import e,{createContext as n,useRef as r,useCallback as t,useEffect as o,useState as i,useMemo as a,useContext as l,forwardRef as s}from"react";import d from"lodash/isUndefined";import{css as c,cx as u}from"@leafygreen-ui/emotion";import{usePrevious as p,useIdAllocator as f,useAvailableSpace as g,useForwardedRef as h,useEventListener as b,useViewportSize as m}from"@leafygreen-ui/hooks";import v,{useDarkMode as y}from"@leafygreen-ui/leafygreen-provider";import x,{Align as w,Justify as E}from"@leafygreen-ui/popover";import{transparentize as O}from"polished";import{Theme as k,createUniqueClassName as N,isComponentType as S,consoleOnce as _,keyMap as j}from"@leafygreen-ui/lib";import{palette as C}from"@leafygreen-ui/palette";import{isFragment as z}from"react-is";import{transitionDuration as D,spacing as I,fontFamilies as P,fontWeights as T,breakpoints as A,typeScales as L,Size as M,focusRing as B,hoverRing as G,BaseFontSize as F}from"@leafygreen-ui/tokens";import R from"prop-types";import{isComponentGlyph as H}from"@leafygreen-ui/icon";import V from"@leafygreen-ui/icon/dist/Checkmark";import{descriptionClassName as W,InputOption as Z,InputOptionContent as K}from"@leafygreen-ui/input-option";import X,{Size as q,Variant as U}from"@leafygreen-ui/button";import Y from"@leafygreen-ui/icon/dist/CaretDown";import $ from"@leafygreen-ui/icon/dist/Warning";import{Label as J,Description as Q}from"@leafygreen-ui/typography";function ee(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function ne(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ee(Object(r),!0).forEach((function(n){te(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function re(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,n||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}function te(e,n,r){return(n=re(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},oe.apply(this,arguments)}function ie(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function ae(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function le(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i,a,l=[],s=!0,d=!1;try{if(i=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;s=!1}else for(;!(s=(t=i.call(r)).done)&&(l.push(t.value),l.length!==n);s=!0);}catch(e){d=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw o}}return l}}(e,n)||de(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||de(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,n){if(e){if("string"==typeof e)return ce(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ce(e,n):void 0}}function ce(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}var ue,pe,fe,ge,he,be,me,ve,ye,xe,we,Ee,Oe,ke="lg-select",Ne={root:ke,errorMessage:"".concat(ke,"-error_message"),popover:"".concat(ke,"-popover"),buttonText:"".concat(ke,"-button_text")},Se={XSmall:"xsmall",Small:"small",Default:"default",Large:"large"},_e={None:"none",Error:"error"},je={Trigger:"trigger",Option:"option"},Ce=n({size:Se.Default,open:!1,disabled:!1}),ze=te(te({},k.Light,{menu:{border:C.gray.light2,shadow:O(.75,C.black)},option:{group:{label:C.gray.dark1},background:{base:C.white,hovered:C.gray.light2,focused:C.blue.light3},text:{base:C.gray.dark3,selected:C.blue.base,disabled:C.gray.base,focused:C.blue.dark2},icon:{base:C.gray.dark1,selected:C.blue.base,disabled:C.gray.base},indicator:{focused:C.blue.base}}}),k.Dark,{menu:{border:C.gray.dark2,shadow:O(.85,"#000000")},option:{group:{label:C.gray.base},background:{base:C.gray.dark3,hovered:C.gray.dark4,focused:C.blue.dark3},text:{base:C.gray.light2,selected:C.gray.light2,disabled:C.gray.base,focused:C.blue.light3},icon:{base:C.gray.base,selected:C.blue.light1,disabled:C.gray.base},indicator:{focused:C.blue.light1}}}),De=te(te(te(te({},Se.XSmall,{height:22,text:13,option:{text:13},warningIcon:16}),Se.Small,{height:28,text:13,option:{text:13},warningIcon:16}),Se.Default,{height:36,text:13,option:{text:13},warningIcon:16}),Se.Large,{height:48,text:18,option:{text:16},warningIcon:16}),Ie=36,Pe=16,Te={text:16,lineHeight:19},Ae={text:16,lineHeight:22},Le={text:16},Me=N("option"),Be=c(ue||(ue=ae(["\n  display: flex;\n  width: 100%;\n  outline: none;\n  overflow-wrap: anywhere;\n  transition: background-color ","ms ease-in-out;\n  position: relative;\n  padding: ","px 12px;\n  line-height: inherit;\n\n  &:before {\n    content: '';\n    position: absolute;\n    transform: scaleY(0.3);\n    top: 7px;\n    bottom: 7px;\n    left: 0;\n    right: 0;\n    width: 4px;\n    border-radius: 0px 4px 4px 0px;\n    opacity: 0;\n    transition: all ","ms ease-in-out;\n  }\n\n  ."," {\n    line-height: 16px; // Hardcoding because it does not match a token\n  }\n"])),D.default,I[2],D.default,W),Ge=c(pe||(pe=ae(["\n  display: flex;\n  align-items: center;\n  font-family: ",";\n"])),P.default),Fe=c(fe||(fe=ae(["\n  min-width: 16px;\n"]))),Re=c(ge||(ge=ae(["\n  ."," {\n    &:focus-visible & {\n      color: currentColor;\n    }\n  }\n"])),Me),He=["children","className","glyph","selected","focused","disabled","onClick","onFocus","triggerScrollIntoView","hasGlyphs","description"];function Ve(n){var i=n.children,a=n.className,l=n.glyph,s=n.selected,d=n.focused,f=n.disabled,g=n.onClick,h=n.onFocus,b=n.triggerScrollIntoView,m=n.hasGlyphs,v=n.description,x=ie(n,He),w=y().theme,E=ze[w].option,O=r(null),k=t((function(){if(null==O.current)return null;var e=O.current,n=null==e?void 0:e.offsetParent;if(!n)return null;n.scrollTop=e.offsetTop+(e.clientHeight-n.clientHeight)/2}),[O]),N=p(b),S=b&&!N;o((function(){S&&k()}),[k,S]);var _=p(d),j=d&&!_;o((function(){j&&O.current.focus()}),[j]),l&&(H(l)||console.error("`Option` instance did not render icon because it is not a known glyph element."));var C=l&&H(l)?e.cloneElement(l,{key:"glyph",className:u(Fe,c(he||(he=ae(["\n              color: ",";\n            "])),E.icon.base),Re,te({},c(be||(be=ae(["\n                color: ",";\n              "])),E.icon.disabled),f),l.props.className)}):void 0,z=s?e.createElement(V,{key:"checkmark",className:u(Fe,c(me||(me=ae(["\n          color: ",";\n        "])),E.icon.selected),Re,te({},c(ve||(ve=ae(["\n            color: ",";\n          "])),E.icon.disabled),f))}):void 0,D=m?C:z,I=m?z:void 0;return e.createElement(Z,oe({"aria-label":"string"==typeof i?i:"option"},x,{disabled:f,role:"option",tabIndex:-1,ref:O,className:u(Me,Be,te(te({},c(ye||(ye=ae(["\n            &:focus-visible {\n              color: ",";\n              background-color: ",";\n\n              &:before {\n                opacity: 1;\n                transform: scaleY(1);\n                background-color: ",";\n              }\n            }\n          "])),E.text.focused,E.background.focused,E.indicator.focused),!f),c(xe||(xe=ae(["\n            &,\n            & ."," {\n              color: ",";\n            }\n          "])),W,E.text.disabled),f),a),onClick:g,onFocus:h,onKeyDown:void 0}),e.createElement(K,{leftGlyph:D,rightGlyph:I,description:v},e.createElement("span",{className:u(Ge,te({},c(we||(we=ae(["\n              font-weight: ",";\n            "])),T.bold),s))},i)))}function We(e){throw Error("`Option` must be a child of a `Select` instance")}Ve.displayName="Option",We.displayName="Option",We.propTypes={children:R.node.isRequired,className:R.string,glyph:R.element,value:R.string,disabled:R.bool,description:R.string};var Ze,Ke=c(Ee||(Ee=ae(["\n  padding: ","px 0;\n"])),I[2]),Xe=c(Oe||(Oe=ae(["\n  cursor: default;\n  width: 100%;\n  padding: 0 12px 2px;\n  outline: none;\n  overflow-wrap: anywhere;\n  font-size: 12px;\n  line-height: 16px;\n  font-weight: ",";\n  text-transform: uppercase;\n  letter-spacing: 0.4px;\n"])),T.bold),qe=["className","label","children"];function Ue(n){var r=n.className,t=n.label,o=n.children,i=ie(n,qe),a=y().theme,l=ze[a].option,s=f({prefix:"select-option-group"});return e.createElement("div",oe({className:u(Ke,r)},i),e.createElement("div",{id:s,className:u(Xe,c(Ze||(Ze=ae(["\n            color: ",";\n          "])),l.group.label))},t),e.createElement("div",{role:"group","aria-labelledby":s},o))}function Ye(e){throw Error("`OptionGroup` must be a child of a `Select` instance")}Ue.displayName="OptionGroup",Ye.displayName="OptionGroup",Ye.propTypes={children:R.oneOfType([R.element,R.arrayOf(R.oneOfType([R.oneOf([!1,null,void 0,""]),R.element]))]).isRequired,className:R.string,label:R.string.isRequired,disabled:R.bool};var $e=["children"],Je="@media only screen and (max-width: ".concat(A.Tablet,"px) and (hover: none)"),Qe="".concat(Je," and (pointer: coarse), ").concat(Je," and (pointer: none)");function en(e){return null==e||!1===e||""===e}function nn(n,r){e.Children.forEach(n,(function(e){S(e,"Option")?r(e):S(e,"OptionGroup")?nn(e.props.children,(function(n){return r(n,e)})):z(e)&&nn(e.props.children,r)}))}function rn(n,r,t){return e.Children.toArray(n).every((function(e){return S(e,"Option")}))||e.Children.toArray(n).every((function(e){return S(e,"OptionGroup")}))||_.warn("LeafyGreen Select: Combining grouped and ungrouped Select Options can cause styling issues"),e.Children.map(n,(function(n){if(S(n,"Option"))return e.createElement(Ve,r(n));if(S(n,"OptionGroup")){var o=n.props,i=o.children,a=ie(o,$e);return e.createElement(Ue,oe({className:void 0},a),rn(i,(function(e){return r(e,n)}),t))}return z(n)?rn(n.props.children,r,t):(en(n)||null==t||t(n),null)}))}function tn(e){return null===e?"":void 0!==e.props.value?e.props.value:Array.isArray(e.props.children)?e.props.children.filter((function(e){return!en(e)})).join(""):e.props.children?e.props.children.toString():""}function on(e,n){var r,t,o;return null!==(r=e.props.disabled)&&void 0!==r&&r||null!==(t=null==n||null===(o=n.props)||void 0===o?void 0:o.disabled)&&void 0!==t&&t}function an(e,n,r){return tn(e)===r&&!on(e,n)}function ln(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.initialValue,o=n.deps,i=void 0===o?[]:o,l=r(t);return a((function(){return{get current(){return l.current},set current(n){l.current=n,e(n)}}}),[e,l].concat(se(i)))}function sn(e,n){var r=t((function(e,n){Array.isArray(e)?e.forEach(r):"function"==typeof e?e(n):e&&(e.current=n)}),[]);return ln(t((function(n){return r(e,n)}),[e,r]),{initialValue:n})}var dn,cn,un,pn,fn,gn,hn,bn,mn,vn,yn,xn,wn,En,On,kn,Nn,Sn,_n,jn,Cn,zn,Dn=function(e){var n=le(i(e),2),r=n[0];return ln(n[1],{initialValue:e,deps:[r]})},In=N("select-popover"),Pn=I[2],Tn=c(dn||(dn=ae(["\n  position: relative;\n  text-align: left;\n  width: 100%;\n  border-radius: 3px;\n  line-height: 16px;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  overflow: auto;\n"]))),An=c(cn||(cn=ae(["\n  width: max-content;\n"]))),Ln=function(e,n){var r=De[n],t=ze[e];return u(c(un||(un=ae(["\n      font-family: ",";\n      font-size: ","px;\n      min-height: ","px;\n      background-color: ",";\n      border-radius: 12px;\n      box-shadow: 0 4px 7px 0 ",";\n      padding: ","px 0;\n      border: 1px solid ",";\n    "])),P.default,r.option.text,r.height,t.option.background.base,t.menu.shadow,I[2],t.menu.border))},Mn=e.forwardRef((function(n,r){var o=n.children,i=n.id,a=n.referenceElement,s=n.className,p=n.labelId,f=n.dropdownWidthBasis,h=n.usePortal,b=void 0===h||h,m=n.portalContainer,v=n.scrollContainer,O=n.portalClassName,k=n.popoverZIndex,N=n.onEntering,S=n.onEnter,_=n.onEntered,j=n.onExiting,C=n.onExit,z=n.onExited,D=y().theme,I=l(Ce),P=I.size,T=I.disabled,A=I.open,L=sn(r,null),M=g(a,Pn),B=d(M)?"unset":"".concat(Math.min(M,274),"px"),G=t((function(e){L.current&&L.current.focus(),e.stopPropagation()}),[L]),F=ne({popoverZIndex:k,onEntering:N,onEnter:S,onEntered:_,onExiting:j,onExit:C,onExited:z},b?{usePortal:b,portalClassName:O,portalContainer:m,scrollContainer:v}:{usePortal:b});return e.createElement(x,oe({active:A&&!T,spacing:6,align:w.Bottom,justify:E.Start,adjustOnMutation:!0,className:u(In,s,te({},An,f===je.Option)),refEl:a},F),e.createElement("ul",{"data-lgid":Ne.popover,"aria-labelledby":p,role:"listbox",ref:L,tabIndex:-1,onClick:G,className:u(Tn,Ln(D,P),c(pn||(pn=ae(["\n              max-height: ",";\n              "," {\n                font-size: ","px;\n              }\n            "])),B,Qe,Le.text)),id:i},o))}));Mn.displayName="ListMenu";var Bn,Gn,Fn,Rn,Hn,Vn,Wn,Zn,Kn=N("select-menu"),Xn=c(fn||(fn=ae(["\n  // Override button defaults\n  font-weight: ",";\n  > *:last-child {\n    grid-template-columns: 1fr 16px;\n    justify-content: flex-start;\n\n    > svg {\n      justify-self: right;\n      width: 16px;\n      height: 16px;\n    }\n  }\n"])),T.regular),qn=te(te(te(te({},M.Default,c(gn||(gn=ae(["\n    > *:last-child {\n      padding: 0 12px;\n    }\n  "])))),M.Large,c(hn||(hn=ae(["\n    > *:last-child {\n      padding: 0 12px 0 ","px;\n    }\n  "])),I[3])),M.Small,c(bn||(bn=ae(["\n    > *:last-child {\n      padding: 0 ","px 0 10px;\n    }\n  "])),I[2])),M.XSmall,c(mn||(mn=ae(["\n    text-transform: none;\n    font-size: ","px;\n    line-height: ","px;\n    > *:last-child {\n      padding: 0 ","px 0 10px;\n    }\n  "])),L.body1.fontSize,L.body1.lineHeight,I[1])),Un=te(te({},k.Light,c(vn||(vn=ae(["\n    background-color: ",";\n    // Override button default color\n    > *:last-child {\n      > svg {\n        color: ",";\n      }\n    }\n  "])),C.white,C.gray.dark2)),k.Dark,c(yn||(yn=ae(["\n    border-color: ",";\n    background-color: ",";\n    color: ",";\n\n    // Override button default color\n    > *:last-child {\n      > svg {\n        color: ",";\n      }\n    }\n\n    &:hover,\n    &:active,\n    &:focus {\n      background-color: ",";\n      color: ",";\n    }\n  "])),C.gray.base,C.gray.dark4,C.gray.light3,C.gray.light1,C.gray.dark4,C.gray.light3)),Yn=te(te({},k.Light,c(xn||(xn=ae(["\n    &:focus-visible {\n      box-shadow: ",";\n      border-color: rgba(255, 255, 255, 0);\n    }\n  "])),B.light.input)),k.Dark,c(wn||(wn=ae(["\n    &:focus-visible {\n      background-color: ",";\n      box-shadow: ",";\n      border-color: rgba(255, 255, 255, 0);\n    }\n  "])),C.gray.dark4,B.dark.input)),$n=te(te({},k.Light,c(En||(En=ae(["\n    color: ",";\n  "])),C.gray.dark1)),k.Dark,c(On||(On=ae(["\n    color: ",";\n\n    &:hover,\n    &:active,\n    &:focus {\n      color: ",";\n    }\n  "])),C.gray.light1,C.gray.light1)),Jn=c(kn||(kn=ae(["\n  cursor: not-allowed;\n  pointer-events: unset;\n  box-shadow: unset;\n\n  &:active {\n    pointer-events: none;\n  }\n"]))),Qn=te(te({},k.Light,u(Jn,c(Nn||(Nn=ae(["\n      &[aria-disabled='true'] {\n        background-color: ",";\n        color: ",";\n\n        > *:last-child {\n          > svg {\n            color: ",";\n          }\n        }\n      }\n    "])),C.gray.light2,C.gray.base,C.gray.base))),k.Dark,u(Jn,c(Sn||(Sn=ae(["\n      &[aria-disabled='true'] {\n        background-color: ",";\n        color: ",";\n        border-color: ",";\n\n        > *:last-child {\n          > svg {\n            color: ",";\n          }\n        }\n      }\n    "])),C.gray.dark3,C.gray.dark1,C.gray.dark2,C.gray.dark1))),er=c(_n||(_n=ae(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-grow: 1;\n  gap: ","px;\n  overflow: hidden;\n"])),I[1]),nr=c(jn||(jn=ae(["\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 100%;\n"]))),rr=te(te({},k.Light,C.red.base),k.Dark,C.red.light1),tr=te(te({},k.Light,c(Cn||(Cn=ae(["\n    border-color: ",";\n    background-color: ",";\n\n    &:hover,\n    &:active {\n      box-shadow: ",";\n    }\n  "])),rr[k.Light],C.white,G.light.red)),k.Dark,c(zn||(zn=ae(["\n    border-color: ",";\n\n    &:hover,\n    &:active {\n      border-color: ",";\n      box-shadow: ",";\n    }\n  "])),rr[k.Dark],rr[k.Dark],G.dark.red)),or=["children","value","text","name","deselected","readOnly","onClose","onOpen","errorMessage","state","baseFontSize","__INTERNAL__menuButtonSlot__","__INTERNAL__menuButtonSlotProps__"],ir=e.forwardRef((function(n,r){var o,i=n.children,a=n.value,s=n.text,d=n.name,p=n.deselected;n.readOnly;var f=n.onClose,g=n.onOpen,h=n.errorMessage,b=n.state,m=n.baseFontSize,v=n.__INTERNAL__menuButtonSlot__,x=n.__INTERNAL__menuButtonSlotProps__,w=ie(n,or),E=y().theme,O=l(Ce),N=O.open,S=O.size,_=O.disabled,j=sn(r,null),C=De[S],z=t((function(){N?f():g(),j.current.focus()}),[f,g,N,j]),D=v||X,I=v?"":u(Xn,Un[E],qn[S],Yn[E],te(te(te(te({},$n[E],p),Qn[E],_),tr[E],b===_e.Error&&!!h),c(Bn||(Bn=ae(["\n              letter-spacing: initial;\n            "]))),S===q.XSmall),c(Gn||(Gn=ae(["\n            width: 100%;\n            "," {\n              height: ","px;\n              font-size: ","px;\n            }\n          "])),Qe,Ie,Pe)),P=null!==(o=w["data-testid"])&&void 0!==o?o:"leafygreen-ui-select-menubutton";return e.createElement(D,oe({},w,x,{ref:j,name:d,value:a,disabled:_,onClick:z,variant:U.Default,darkMode:E===k.Dark,rightGlyph:e.createElement(Y,null),size:S,"data-testid":P,className:u(I,te({},c(Fn||(Fn=ae(["\n              font-size: ","px;\n            "])),m),S===q.Default),null==x?void 0:x.className)}),e.createElement("div",{className:er},e.createElement("div",{"data-lgid":Ne.buttonText,className:u(Kn,nr)},s),b===_e.Error&&h&&e.createElement($,{"aria-hidden":!0,className:c(Rn||(Rn=ae(["\n                color: ",";\n              "])),rr[E]),size:C.warningIcon,title:"Error"})),i)}));ir.displayName="MenuButton";var ar,lr,sr,dr,cr,ur,pr,fr,gr=c(Hn||(Hn=ae(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: ","px;\n"])),I[1]),hr=c(Vn||(Vn=ae(["\n  display: flex;\n  flex-direction: column;\n"]))),br=c(Wn||(Wn=ae(["\n  font-size: ","px;\n  line-height: ","px;\n"])),L.large.fontSize,L.large.lineHeight),mr=function(e){var n=e.darkMode,r=e.sizeSet;return c(Zn||(Zn=ae(["\n  font-family: ",";\n  color: ",";\n  font-size: ","px;\n  margin-top: ","px;\n  padding-left: 2px;\n  transition: color ","ms ease-in-out;\n  transition-delay: ","ms;\n"])),P.default,n?C.red.light1:C.red.base,r.text,I[1],D.faster,D.faster)},vr=["children","darkMode","size","disabled","allowDeselect","usePortal","placeholder","errorMessage","state","dropdownWidthBasis","baseFontSize","data-lgid","id","aria-labelledby","aria-label","className","label","description","name","defaultValue","value","onChange","readOnly","portalContainer","scrollContainer","portalClassName","popoverZIndex","onEntering","onEnter","onEntered","onExiting","onExit","onExited","__INTERNAL__menuButtonSlot__"],yr=s((function(n,r){var l,s=n.children,d=n.darkMode,p=n.size,g=void 0===p?Se.Default:p,x=n.disabled,w=void 0!==x&&x,E=n.allowDeselect,O=void 0===E||E,k=n.usePortal,N=void 0===k||k,S=n.placeholder,_=void 0===S?"Select":S,C=n.errorMessage,z=void 0===C?"":C,D=n.state,I=void 0===D?_e.None:D,P=n.dropdownWidthBasis,T=void 0===P?je.Trigger:P,A=n.baseFontSize,L=void 0===A?F.Body1:A,M=n["data-lgid"],B=void 0===M?Ne.root:M,G=n.id,R=n["aria-labelledby"],H=n["aria-label"],V=n.className,W=n.label,Z=n.description,K=n.name,X=n.defaultValue,q=n.value,U=n.onChange,Y=n.readOnly,$=n.portalContainer,ee=n.scrollContainer,re=n.portalClassName,se=n.popoverZIndex,de=n.onEntering,ce=n.onEnter,ue=n.onEntered,pe=n.onExiting,fe=n.onExit,ge=n.onExited,he=n.__INTERNAL__menuButtonSlot__,be=ie(n,vr),me=f({prefix:"select",id:G}),ve=a((function(){return H&&!W?void 0:null!=R?R:"".concat(me,"-label")}),[R,H,W,me]);W||R||H||console.error("For screen-reader accessibility, label, aria-label, or aria-labelledby must be provided to Select.");var ye=y(d).darkMode,xe="".concat(me,"-description"),we="".concat(me,"-menu"),Ee=le(i(!1),2),Oe=Ee[0],ke=Ee[1],ze=h(r,null),Ie=Dn(null),Pe=f({prefix:"select"}),Le=Dn(null),Me=De[g],Be=a((function(){return{size:g,open:Oe,disabled:w}}),[g,Oe,w]);o((function(){void 0!==q&&void 0===U&&!0!==Y&&console.warn("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")}),[U,Y,q]);var Ge=t((function(){ke(!0)}),[]),Fe=t((function(){ke(!1),Ie.current.focus()}),[Ie]);o((function(){if(Oe){var e=function(e){var n=Ie.current.contains(e.target)||Le.current.contains(e.target);ke(n)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}}),[Le,Ie,Oe]);var Re=a((function(){var e=null;return void 0===q&&void 0!==X&&nn(s,(function(n,r){an(n,r,X)&&(e=n)})),e}),[s,X,q]),He=le(i(Re),2),We=He[0],Ze=He[1];o((function(){var e;null!==We&&Ze(null!==(e=function(e,n){var r,t,o,i,a,l,s,d;return nn(e,(function(e){if(e===n)a=n;else if(e.props.children===n.props.children&&e.props.value===n.props.value){var r;null!==(r=l)&&void 0!==r||(l=e)}else if(void 0!==e.props.value&&e.props.value===n.props.value){var t;null!==(t=s)&&void 0!==t||(s=e)}else if(tn(e)===tn(n)){var o;null!==(o=d)&&void 0!==o||(d=e)}})),null!==(r=null!==(t=null!==(o=null!==(i=a)&&void 0!==i?i:l)&&void 0!==o?o:s)&&void 0!==t?t:d)&&void 0!==r?r:null}(s,We))&&void 0!==e?e:Re)}),[s,Re,We]);var Ke=a((function(){if(void 0!==q){var e=null;return nn(s,(function(n,r){an(n,r,q)&&(e=n)})),e}return We}),[s,We,q]),Xe=t((function(e,n){n.preventDefault(),n.stopPropagation(),void 0===q&&Ze(e),null==U||U(tn(e),n),$e(void 0),Fe()}),[U,Fe,q]),qe=t((function(e,n){return function(r){r.preventDefault(),r.stopPropagation(),w||n||(Xe(e,r),Fe())}}),[w,Fe,Xe]),Ue=le(i(),2),Ye=Ue[0],$e=Ue[1],Je=a((function(){var e=[];return O&&e.push(null),nn(s,(function(n,r){on(n,r)||e.push(n)})),e}),[s,O]),en=t((function(e){void 0!==Ye&&Xe(Ye,e)}),[Ye,Xe]),ln=t((function(){$e(Je[0])}),[Je]),sn=t((function(){$e(Je[Je.length-1])}),[Je]),dn=t((function(){if(void 0===Ye||0===Je.indexOf(Ye))sn();else{var e=Je.indexOf(Ye)-1;$e(Je[e])}}),[Je,Ye,sn]),cn=t((function(){if(void 0===Ye||Je.indexOf(Ye)===Je.length-1)ln();else{var e=Je.indexOf(Ye)+1;$e(Je[e])}}),[Je,Ye,ln]),un=t((function(e,n){return function(r){r.preventDefault(),r.stopPropagation(),w||n||$e(e)}}),[w]),pn=t((function(e){var n,r;if(!(e.ctrlKey||e.shiftKey||e.altKey)){var t=null===(n=Le.current)||void 0===n?void 0:n.contains(document.activeElement),o=null===(r=Ie.current)||void 0===r?void 0:r.contains(document.activeElement);if(o||t)switch(e.key){case j.Tab:case j.Escape:Fe(),$e(void 0);break;case j.Enter:case j.Space:Oe&&!o&&e.preventDefault(),en(e);break;case j.ArrowUp:!Oe&&o&&Ge(),e.preventDefault(),dn();break;case j.ArrowDown:!Oe&&o&&Ge(),e.preventDefault(),cn()}}}),[Le,Ie,Fe,Oe,en,dn,cn,Ge]);b("keydown",pn);var fn=m(),gn=a((function(){var e=!1;return nn(s,(function(n){e||(e=void 0!==n.props.glyph)})),e}),[s]),hn=a((function(){return null!==fn&&null!==Le.current&&void 0===Ye&&Oe}),[Ye,Le,Oe,fn]),bn=a((function(){var n=null===Ke;return e.createElement(Ve,{className:void 0,glyph:void 0,selected:n,focused:null===Ye,disabled:!1,onClick:qe(null,!1),onFocus:un(null,!1),hasGlyphs:!1,triggerScrollIntoView:n&&hn},_)}),[hn,Ye,qe,un,_,Ke]),mn=a((function(){return rn(s,(function(e,n){var r=e===Ke,t=on(e,n);return ne(ne({},e.props),{},{className:e.props.className,glyph:e.props.glyph,selected:r,focused:e===Ye,disabled:t,children:e.props.children,hasGlyphs:gn,onClick:qe(e,t),onFocus:un(e,t),triggerScrollIntoView:r&&hn})}),(function(){console.error("`Select` instance received child that is not `Option` or `OptionGroup`.")}))}),[hn,s,Ye,qe,un,gn,Ke]),vn=ne({popoverZIndex:se,onEntering:de,onEnter:ce,onEntered:ue,onExiting:pe,onExit:fe,onExited:ge},N?{usePortal:N,portalClassName:re,portalContainer:$,scrollContainer:ee}:{usePortal:N});return e.createElement(v,{darkMode:ye},e.createElement("div",{ref:ze,className:u(hr,V),"data-lgid":B},(W||Z)&&e.createElement("div",{className:gr},W&&e.createElement(J,{htmlFor:Pe,id:ve,darkMode:ye,disabled:w,className:u(te(te({},br,g===Se.Large),c(ar||(ar=ae(["\n                        font-size: ","px;\n                        line-height: 20px;\n                      "])),L),g===Se.Default),c(lr||(lr=ae(["\n                      // Prevent hover state from showing when hovering label\n                      pointer-events: none;\n                    "]))),c(sr||(sr=ae(["\n                      "," {\n                        font-size: ","px;\n                        line-height: ","px;\n                      }\n                    "])),Qe,Te.text,Te.lineHeight))},W),Z&&e.createElement(Q,{id:xe,darkMode:ye,disabled:w,className:u(te(te({},br,g===Se.Large),c(dr||(dr=ae(["\n                        font-size: ","px;\n                        line-height: 20px;\n                      "])),L),g===Se.Default),c(cr||(cr=ae(["\n                      "," {\n                        font-size: ","px;\n                        line-height: ","px;\n                      }\n                    "])),Qe,Ae.text,Ae.lineHeight))},Z)),e.createElement(Ce.Provider,{value:Be},e.createElement(ir,oe({},be,{id:Pe,ref:Ie,name:K,readOnly:Y,value:tn(Ke),text:null!==Ke?Ke.props.children:_,deselected:null===Ke,onOpen:Ge,onClose:Fe,"aria-labelledby":ve,"aria-label":W||R?void 0:H,"aria-controls":we,"aria-expanded":Oe,"aria-describedby":xe,"aria-invalid":I===_e.Error,"aria-disabled":w,errorMessage:z,state:I,baseFontSize:L,__INTERNAL__menuButtonSlot__:he}),e.createElement(Mn,oe({labelId:ve,id:we,referenceElement:Ie,ref:Le,className:u(te({},c(ur||(ur=ae(["\n                    width: ","px;\n                  "])),null===(l=Ie.current)||void 0===l?void 0:l.clientWidth),T===je.Trigger)),dropdownWidthBasis:T},vn),O&&bn,mn))),I===_e.Error&&z&&e.createElement("span",{"data-lgid":Ne.errorMessage,className:u(mr({darkMode:ye,sizeSet:Me}),c(pr||(pr=ae(["\n                  "," {\n                    font-size: ","px;\n                    line-height: ","px;\n                  }\n                "])),Qe,Ae.text,Ae.lineHeight),te({},c(fr||(fr=ae(["\n                    // Hide error text when menu is open,\n                    // so it doesn't peek around the menu corner\n                    color: transparent;\n                  "]))),Oe))},z)))}));yr.displayName="Select",yr.propTypes={label:R.string,"aria-labelledby":R.string,"aria-label":R.string,description:R.node,placeholder:R.string,className:R.string,darkMode:R.bool,size:R.oneOf(Object.values(Se)),disabled:R.bool,id:R.string,value:R.string,defaultValue:R.string,onChange:R.func,readOnly:R.bool,errorMessage:R.string,state:R.oneOf(Object.values(_e)),allowDeselect:R.bool,baseFontSize:R.oneOf(Object.values(F)),dropdownWidthBasis:R.oneOf(Object.values(je))};export{je as DropdownWidthBasis,We as Option,Ye as OptionGroup,yr as Select,Se as Size,_e as State,Kn as menuButtonTextClassName,In as popoverClassName};
//# sourceMappingURL=index.js.map
