import*as e from"react";import t,{useState as n,useRef as r,useEffect as o,isValidElement as i,useCallback as a}from"react";import{flushSync as l}from"react-dom";import c from"lodash/debounce";import s from"prop-types";import{css as p,cx as f}from"@leafygreen-ui/emotion";import{useIdAllocator as u,useEscapeKey as d,useBackdropClick as h}from"@leafygreen-ui/hooks";import{isComponentGlyph as g}from"@leafygreen-ui/icon";import m,{useDarkMode as y}from"@leafygreen-ui/leafygreen-provider";import b,{Align as v,Justify as x}from"@leafygreen-ui/popover";export{Justify}from"@leafygreen-ui/popover";import{useUpdatedBaseFontSize as w,bodyTypeScaleStyles as O}from"@leafygreen-ui/typography";import{transparentize as j}from"polished";import{Theme as k}from"@leafygreen-ui/lib";import{palette as E}from"@leafygreen-ui/palette";import{fontFamilies as C,fontWeights as P,transitionDuration as N}from"@leafygreen-ui/tokens";import M from"lodash/clamp";function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function I(e,t,n){return(t=T(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R.apply(this,arguments)}function A(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function z(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){t>e.length&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(t){return e.createElement("svg",R({width:26,height:8,fill:"#001E2B",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 26 8"},t),e.createElement("path",{d:"M27 0H-1v1h.699a10 10 0 017.26 3.123l1.685 1.78a6 6 0 008.712 0l1.686-1.78A10 10 0 0126.302 1H27V0z"}))}var D,U,X,Y,Z,G,q,J,K,V,$,Q,W,_=8,ee=26,te=16,ne=p(D||(D=z(["\n  margin: unset;\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  width: 100%;\n  overflow-wrap: anywhere;\n"])),C.default,E.gray.light1,P.regular),re=p(U||(U=z(["\n  display: flex;\n  align-items: center;\n  border-radius: ","px;\n  padding: 12px ","px;\n  box-shadow: 0px 2px 4px -1px ",";\n  cursor: default;\n  width: fit-content;\n  max-width: 256px;\n"])),te,te,j(.85,E.black)),oe=p(X||(X=z(["\n  position: relative;\n"]))),ie=I(I({},k.Light,{tooltip:p(Y||(Y=z(["\n      background-color: ",";\n      color: ",";\n    "])),E.black,E.gray.light1),children:p(Z||(Z=z(["\n      color: inherit;\n    "]))),notchFill:E.black}),k.Dark,{tooltip:p(G||(G=z(["\n      background-color: ",";\n      color: ",";\n    "])),E.gray.light2,E.black),children:p(q||(q=z(["\n      color: inherit;\n    "]))),notchFill:E.gray.light2}),ae=ee+2*te,le=p(J||(J=z(["\n  min-height: ","px;\n"])),ae),ce=p(K||(K=z(["\n  transition-delay: ","ms;\n"])),N.slowest),se={Hover:"hover",Click:"click"},pe={Top:v.Top,Bottom:v.Bottom,Left:v.Left,Right:v.Right};var fe=["initialOpen","open","setOpen","darkMode","baseFontSize","triggerEvent","enabled","align","justify","spacing","usePortal","onClose","id","shouldClose","portalClassName","portalContainer","portalRef","scrollContainer","popoverZIndex","refEl","className","children","trigger"],ue=function(e){e.stopPropagation()};function de(e){var s,v=e.initialOpen,j=void 0!==v&&v,k=e.open,E=e.setOpen,C=e.darkMode,P=e.baseFontSize,N=e.triggerEvent,S=void 0===N?se.Hover:N,T=e.enabled,B=void 0===T||T,D=e.align,U=void 0===D?"top":D,X=e.justify,Y=void 0===X?"start":X,Z=e.spacing,G=void 0===Z?12:Z,q=e.usePortal,J=void 0===q||q,K=e.onClose,ae=void 0===K?function(){}:K,de=e.id,he=e.shouldClose,ge=e.portalClassName,me=e.portalContainer,ye=e.portalRef,be=e.scrollContainer,ve=e.popoverZIndex,xe=e.refEl,we=e.className,Oe=e.children,je=e.trigger,ke=A(e,fe),Ee="boolean"==typeof k,Ce=L(n(j),2),Pe=Ce[0],Ne=Ce[1],Me=w(P),Se=Ee?k:Pe,Fe=Ee&&E?E:Ne,Te=r(null),Ie=null!=de?de:null===(s=Te.current)||void 0===s?void 0:s.id,Re=u({prefix:"tooltip",id:Ie}),Ae=y(C),ze=Ae.darkMode,Le=Ae.theme;o((function(){je&&i(je)&&g(je)&&console.warn("Using a LeafyGreenUI Icon or Glyph component as a trigger will not render a Tooltip, as these components do not render their children. To use, please wrap your trigger element in another HTML tag.")}),[je]);var Be=a((function(){("function"!=typeof he||he())&&(ae(),Fe(!1))}),[Fe,he,ae]),He=a((function(e,t){return e===se.Hover?{onMouseEnter:c((function(e){n("onMouseEnter",e),l((function(){Fe(!0)}))}),35),onMouseLeave:c((function(e){n("onMouseLeave",e),Be()}),35),onFocus:function(e){n("onFocus",e),Fe(!0)},onBlur:function(e){n("onBlur",e),Be()}}:{onClick:function(e){e.target!==Te.current&&(n("onClick",e),Fe((function(e){return!e})))}};function n(e,n){t&&t[e]&&"function"==typeof t[e]&&t[e](n)}}),[Be,Fe,Te]);d(Be,{enabled:Se}),h(Be,[Te],Se&&"click"===S);var De=F({refEl:xe,popoverZIndex:ve},J?{spacing:G,usePortal:J,portalClassName:ge,portalContainer:me,portalRef:ye,scrollContainer:be}:{spacing:G,usePortal:J}),Ue=B&&Se,Xe=["left","right"].includes(U),Ye=t.createElement(b,R({key:"tooltip",active:Ue,align:U,justify:Y,adjustOnMutation:!0,onClick:ue,className:f(ce,I({},p(W||(W=z(["\n          // Try to fit all the content on one line (until it hits max-width)\n          // Overrides default behavior, which is to set width to size of the trigger.\n          // Except when justify is set to fit because the width should be the size of the trigger.\n          // Another exception is when justify is set to fit and the alignment is either left or right. In this case only the height should be the size of the trigger so we still want the width to fit the max content.\n          width: max-content;\n        "]))),Y!==x.Fit||Y===x.Fit&&(U===pe.Left||U===pe.Right)))},De),(function(e){var n=function(e){var t=e.align,n=e.justify,r=e.triggerRect;if(!t||!n||!r)return{notchContainer:"",notch:"",tooltip:""};var o,i,a=ee,l=-(a-_)/2,c={},s={},f=te,u=2*f,d=0,h="";switch(t){case"top":case"bottom":switch(u=3*f,o=r.width/2-a/2,d=M(o,f,u),i=o<=f,c.left="0px",c.right="0px","top"===t?(s.top="calc(100% - 1px)",c.top="".concat(l,"px")):(s.bottom="calc(100% - 1px)",c.bottom="".concat(l,"px"),c.transform="rotate(180deg)"),n){case x.Start:s.left="".concat(d,"px"),i&&(h="translateX(-".concat(f-o,"px)"));break;case x.Middle:s.left="0px",s.right="0px";break;case x.Fit:s.left="".concat(d,"px"),i&&(h="translateX(-".concat(f-o,"px)"));break;case x.End:s.right="".concat(d,"px"),i&&(h="translateX(".concat(f-o,"px)"))}break;case"left":case"right":switch(u=2*f,o=r.height/2-a/2,d=M(o,f,u),i=o<=f,c.top="0px",c.bottom="0px","left"===t?(s.left="calc(100% - 1px)",c.left="".concat(l,"px"),c.transform="rotate(-90deg)"):(s.right="calc(100% - 1px)",c.right="".concat(l,"px"),c.transform="rotate(90deg)"),n){case x.Start:s.top="".concat(d,"px"),i&&(h="translateY(-".concat(f-o,"px)"));break;case x.Middle:s.top="0px",s.bottom="0px";break;case x.Fit:s.top="".concat(d,"px"),i&&(h="translateY(-".concat(f-o,"px)"));break;case x.End:s.bottom="".concat(d,"px"),i&&(h="translateY(".concat(f-o,"px)"))}}return{notchContainer:p(V||(V=z(["\n      position: absolute;\n      width: ","px;\n      height: ","px;\n      overflow: hidden;\n      margin: auto;\n      pointer-events: none;\n      ",";\n    "])),a,a,p(s)),notch:p($||($=z(["\n      ",";\n      position: absolute;\n      width: ","px;\n      height: ","px; // Keep it square. Rotating is simpler\n      margin: 0;\n    "])),p(c),ee,ee),tooltip:p(Q||(Q=z(["\n      min-width: ","px;\n      transform: ",";\n    "])),2*d+a,h)}}({align:e.align,justify:e.justify,triggerRect:e.referenceElPos}),r=n.notchContainer,o=n.notch,i=n.tooltip;return t.createElement(m,{darkMode:!ze},t.createElement("div",R({role:"tooltip"},ke,{id:Re,className:f(re,i,ie[Le].tooltip,I({},le,Xe),we),ref:Te}),t.createElement("div",{className:f(ne,O[Me],ie[Le].children)},Oe),t.createElement("div",{className:r},t.createElement(H,{className:f(o),fill:ie[Le].notchFill}))))}));return je?"function"==typeof je?je(F(F({},He(S)),{},{className:oe,"aria-describedby":Ue?Re:void 0,children:Ye})):t.cloneElement(je,F(F({},He(S,je.props)),{},{"aria-describedby":Ue?Re:void 0,children:t.createElement(t.Fragment,null,je.props.children,Ye),className:f(oe,je.props.className)})):Ye}de.displayName="Tooltip",de.propTypes={children:s.node,className:s.string,align:s.oneOf(Object.values(pe)),justify:s.oneOf(Object.values(x)),trigger:s.oneOfType([s.node,s.func]),triggerEvent:s.oneOf(Object.values(se)),darkMode:s.bool,enabled:s.bool,open:s.bool,setOpen:s.func,id:s.string,shouldClose:s.func,usePortal:s.bool,portalClassName:s.string,portalRef:s.shape({current:"undefined"!=typeof window?s.instanceOf(Element):s.any})};export{pe as Align,se as TriggerEvent,de as default};
//# sourceMappingURL=index.js.map
